mirrorsv…
(function(a,b){
"use strict";
var c;
var d=a.Array;
var e=a.isNaN;
var f=a.JSON.stringify;
var g=a.Math.min;
var h=b.GetPrivateSymbol("promise_status_symbol");
var i=b.GetPrivateSymbol("promise_value_symbol");
var j;
var k;
b.Import(function(l){
c=l.FunctionSourceString;
j=l.ToBoolean;
k=l.ToString;
});
var m={
UNDEFINED_TYPE:'undefined',
NULL_TYPE:'null',
BOOLEAN_TYPE:'boolean',
NUMBER_TYPE:'number',
STRING_TYPE:'string',
SYMBOL_TYPE:'symbol',
OBJECT_TYPE:'object',
FUNCTION_TYPE:'function',
REGEXP_TYPE:'regexp',
ERROR_TYPE:'error',
PROPERTY_TYPE:'property',
INTERNAL_PROPERTY_TYPE:'internalProperty',
FRAME_TYPE:'frame',
SCRIPT_TYPE:'script',
CONTEXT_TYPE:'context',
SCOPE_TYPE:'scope',
PROMISE_TYPE:'promise',
MAP_TYPE:'map',
SET_TYPE:'set',
ITERATOR_TYPE:'iterator',
GENERATOR_TYPE:'generator',
}
var n=0;
var o=-1;
var p=[];
var q=true;
function MirrorCacheIsEmpty(){
return n==0&&p.length==0;
}
function ToggleMirrorCache(r){
q=r;
ClearMirrorCache();
}
function ClearMirrorCache(r){
n=0;
p=[];
}
function ObjectIsPromise(r){
try{
return(%_IsSpecObject(r))&&
!(%DebugGetProperty(r,h)===(void 0));
}catch(e){
return false;
}
}
function MakeMirror(r,s){
var t;
if(!s&&q){
for(var u in p){
t=p[u];
if(t.value()===r){
return t;
}
if(t.isNumber()&&e(t.value())&&
typeof r=='number'&&e(r)){
return t;
}
}
}
if((r===(void 0))){
t=new UndefinedMirror();
}else if((r===null)){
t=new NullMirror();
}else if((typeof(r)==='boolean')){
t=new BooleanMirror(r);
}else if((typeof(r)==='number')){
t=new NumberMirror(r);
}else if((typeof(r)==='string')){
t=new StringMirror(r);
}else if((typeof(r)==='symbol')){
t=new SymbolMirror(r);
}else if((%_IsArray(r))){
t=new ArrayMirror(r);
}else if((%_IsDate(r))){
t=new DateMirror(r);
}else if((%_IsFunction(r))){
t=new FunctionMirror(r);
}else if((%_IsRegExp(r))){
t=new RegExpMirror(r);
}else if((%_ClassOf(r)==='Error')){
t=new ErrorMirror(r);
}else if((%_ClassOf(r)==='Script')){
t=new ScriptMirror(r);
}else if((%_ClassOf(r)==='Map')||(%_ClassOf(r)==='WeakMap')){
t=new MapMirror(r);
}else if((%_ClassOf(r)==='Set')||(%_ClassOf(r)==='WeakSet')){
t=new SetMirror(r);
}else if((%_ClassOf(r)==='Map Iterator')||(%_ClassOf(r)==='Set Iterator')){
t=new IteratorMirror(r);
}else if(ObjectIsPromise(r)){
t=new PromiseMirror(r);
}else if((%_ClassOf(r)==='Generator')){
t=new GeneratorMirror(r);
}else{
t=new ObjectMirror(r,m.OBJECT_TYPE,s);
}
if(q)p[t.handle()]=t;
return t;
}
function LookupMirror(v){
if(!q){
throw MakeError(2,"Mirror cache is disabled");
}
return p[v];
}
function GetUndefinedMirror(){
return MakeMirror((void 0));
}
function inherits(w,x){
var y=function(){};
y.prototype=x.prototype;
w.super_=x.prototype;
w.prototype=new y();
w.prototype.constructor=w;
}
var z=80;
var A={};
A.Named=1;
A.Indexed=2;
var B={};
B.Data=0;
B.DataConstant=2;
B.AccessorConstant=3;
var C={};
C.None=0;
C.ReadOnly=1;
C.DontEnum=2;
C.DontDelete=4;
var D={Global:0,
Local:1,
With:2,
Closure:3,
Catch:4,
Block:5,
Script:6};
function Mirror(E){
this.type_=E;
}
Mirror.prototype.type=function(){
return this.type_;
};
Mirror.prototype.isValue=function(){
return this instanceof ValueMirror;
};
Mirror.prototype.isUndefined=function(){
return this instanceof UndefinedMirror;
};
Mirror.prototype.isNull=function(){
return this instanceof NullMirror;
};
Mirror.prototype.isBoolean=function(){
return this instanceof BooleanMirror;
};
Mirror.prototype.isNumber=function(){
return this instanceof NumberMirror;
};
Mirror.prototype.isString=function(){
return this instanceof StringMirror;
};
Mirror.prototype.isSymbol=function(){
return this instanceof SymbolMirror;
};
Mirror.prototype.isObject=function(){
return this instanceof ObjectMirror;
};
Mirror.prototype.isFunction=function(){
return this instanceof FunctionMirror;
};
Mirror.prototype.isUnresolvedFunction=function(){
return this instanceof UnresolvedFunctionMirror;
};
Mirror.prototype.isArray=function(){
return this instanceof ArrayMirror;
};
Mirror.prototype.isDate=function(){
return this instanceof DateMirror;
};
Mirror.prototype.isRegExp=function(){
return this instanceof RegExpMirror;
};
Mirror.prototype.isError=function(){
return this instanceof ErrorMirror;
};
Mirror.prototype.isPromise=function(){
return this instanceof PromiseMirror;
};
Mirror.prototype.isGenerator=function(){
return this instanceof GeneratorMirror;
};
Mirror.prototype.isProperty=function(){
return this instanceof PropertyMirror;
};
Mirror.prototype.isInternalProperty=function(){
return this instanceof InternalPropertyMirror;
};
Mirror.prototype.isFrame=function(){
return this instanceof FrameMirror;
};
Mirror.prototype.isScript=function(){
return this instanceof ScriptMirror;
};
Mirror.prototype.isContext=function(){
return this instanceof ContextMirror;
};
Mirror.prototype.isScope=function(){
return this instanceof ScopeMirror;
};
Mirror.prototype.isMap=function(){
return this instanceof MapMirror;
};
Mirror.prototype.isSet=function(){
return this instanceof SetMirror;
};
Mirror.prototype.isIterator=function(){
return this instanceof IteratorMirror;
};
Mirror.prototype.allocateHandle_=function(){
if(q)this.handle_=n++;
};
Mirror.prototype.allocateTransientHandle_=function(){
this.handle_=o--;
};
Mirror.prototype.toText=function(){
return"#<"+this.constructor.name+">";
};
function ValueMirror(E,r,F){
%_CallFunction(this,E,Mirror);
this.value_=r;
if(!F){
this.allocateHandle_();
}else{
this.allocateTransientHandle_();
}
}
inherits(ValueMirror,Mirror);
Mirror.prototype.handle=function(){
return this.handle_;
};
ValueMirror.prototype.isPrimitive=function(){
var E=this.type();
return E==='undefined'||
E==='null'||
E==='boolean'||
E==='number'||
E==='string'||
E==='symbol';
};
ValueMirror.prototype.value=function(){
return this.value_;
};
function UndefinedMirror(){
%_CallFunction(this,m.UNDEFINED_TYPE,(void 0),ValueMirror);
}
inherits(UndefinedMirror,ValueMirror);
UndefinedMirror.prototype.toText=function(){
return'undefined';
};
function NullMirror(){
%_CallFunction(this,m.NULL_TYPE,null,ValueMirror);
}
inherits(NullMirror,ValueMirror);
NullMirror.prototype.toText=function(){
return'null';
};
function BooleanMirror(r){
%_CallFunction(this,m.BOOLEAN_TYPE,r,ValueMirror);
}
inherits(BooleanMirror,ValueMirror);
BooleanMirror.prototype.toText=function(){
return this.value_?'true':'false';
};
function NumberMirror(r){
%_CallFunction(this,m.NUMBER_TYPE,r,ValueMirror);
}
inherits(NumberMirror,ValueMirror);
NumberMirror.prototype.toText=function(){
return %_NumberToString(this.value_);
};
function StringMirror(r){
%_CallFunction(this,m.STRING_TYPE,r,ValueMirror);
}
inherits(StringMirror,ValueMirror);
StringMirror.prototype.length=function(){
return this.value_.length;
};
StringMirror.prototype.getTruncatedValue=function(G){
if(G!=-1&&this.length()>G){
return this.value_.substring(0,G)+
'... (length: '+this.length()+')';
}
return this.value_;
};
StringMirror.prototype.toText=function(){
return this.getTruncatedValue(z);
};
function SymbolMirror(r){
%_CallFunction(this,m.SYMBOL_TYPE,r,ValueMirror);
}
inherits(SymbolMirror,ValueMirror);
SymbolMirror.prototype.description=function(){
return %SymbolDescription(%_ValueOf(this.value_));
}
SymbolMirror.prototype.toText=function(){
return %_CallFunction(this.value_,builtins.$symbolToString);
}
function ObjectMirror(r,E,F){
E=E||m.OBJECT_TYPE;
%_CallFunction(this,E,r,F,ValueMirror);
}
inherits(ObjectMirror,ValueMirror);
ObjectMirror.prototype.className=function(){
return %_ClassOf(this.value_);
};
ObjectMirror.prototype.constructorFunction=function(){
return MakeMirror(%DebugGetProperty(this.value_,'constructor'));
};
ObjectMirror.prototype.prototypeObject=function(){
return MakeMirror(%DebugGetProperty(this.value_,'prototype'));
};
ObjectMirror.prototype.protoObject=function(){
return MakeMirror(%DebugGetPrototype(this.value_));
};
ObjectMirror.prototype.hasNamedInterceptor=function(){
var H=%GetInterceptorInfo(this.value_);
return(H&2)!=0;
};
ObjectMirror.prototype.hasIndexedInterceptor=function(){
var H=%GetInterceptorInfo(this.value_);
return(H&1)!=0;
};
function TryGetPropertyNames(I){
try{
return %GetOwnPropertyNames(I,32);
}catch(e){
return[];
}
}
ObjectMirror.prototype.propertyNames=function(J,K){
J=J||A.Named|A.Indexed;
var L;
var M;
var N=0;
if(J&A.Named){
L=TryGetPropertyNames(this.value_);
N+=L.length;
if(this.hasNamedInterceptor()&&(J&A.Named)){
var O=
%GetNamedInterceptorPropertyNames(this.value_);
if(O){
L=L.concat(O);
N+=O.length;
}
}
}
if(J&A.Indexed){
M=%GetOwnElementNames(this.value_);
N+=M.length;
if(this.hasIndexedInterceptor()&&(J&A.Indexed)){
var P=
%GetIndexedInterceptorElementNames(this.value_);
if(P){
M=M.concat(P);
N+=P.length;
}
}
}
K=g(K||N,N);
var Q=new d(K);
var R=0;
if(J&A.Named){
for(var S=0;R<K&&S<L.length;S++){
Q[R++]=L[S];
}
}
if(J&A.Indexed){
for(var S=0;R<K&&S<M.length;S++){
Q[R++]=M[S];
}
}
return Q;
};
ObjectMirror.prototype.properties=function(J,K){
var Q=this.propertyNames(J,K);
var T=new d(Q.length);
for(var S=0;S<Q.length;S++){
T[S]=this.property(Q[S]);
}
return T;
};
ObjectMirror.prototype.internalProperties=function(){
return ObjectMirror.GetInternalProperties(this.value_);
}
ObjectMirror.prototype.property=function(U){
var V=%DebugGetPropertyDetails(this.value_,builtins.$toName(U));
if(V){
return new PropertyMirror(this,U,V);
}
return GetUndefinedMirror();
};
ObjectMirror.prototype.lookupProperty=function(r){
var T=this.properties();
for(var S=0;S<T.length;S++){
var W=T[S];
if(W.propertyType()!=B.AccessorConstant){
if(%_ObjectEquals(W.value_,r.value_)){
return W;
}
}
}
return GetUndefinedMirror();
};
ObjectMirror.prototype.referencedBy=function(X){
var Y=%DebugReferencedBy(this.value_,
Mirror.prototype,X||0);
for(var S=0;S<Y.length;S++){
Y[S]=MakeMirror(Y[S]);
}
return Y;
};
ObjectMirror.prototype.toText=function(){
var U;
var w=this.constructorFunction();
if(!w.isFunction()){
U=this.className();
}else{
U=w.name();
if(!U){
U=this.className();
}
}
return'#<'+U+'>';
};
ObjectMirror.GetInternalProperties=function(r){
var T=%DebugGetInternalProperties(r);
var Y=[];
for(var S=0;S<T.length;S+=2){
Y.push(new InternalPropertyMirror(T[S],T[S+1]));
}
return Y;
}
function FunctionMirror(r){
%_CallFunction(this,r,m.FUNCTION_TYPE,ObjectMirror);
this.resolved_=true;
}
inherits(FunctionMirror,ObjectMirror);
FunctionMirror.prototype.resolved=function(){
return this.resolved_;
};
FunctionMirror.prototype.name=function(){
return %FunctionGetName(this.value_);
};
FunctionMirror.prototype.inferredName=function(){
return %FunctionGetInferredName(this.value_);
};
FunctionMirror.prototype.source=function(){
if(this.resolved()){
return c(this.value_);
}
};
FunctionMirror.prototype.script=function(){
if(this.resolved()){
if(this.script_){
return this.script_;
}
var Z=%FunctionGetScript(this.value_);
if(Z){
return this.script_=MakeMirror(Z);
}
}
};
FunctionMirror.prototype.sourcePosition_=function(){
if(this.resolved()){
return %FunctionGetScriptSourcePosition(this.value_);
}
};
FunctionMirror.prototype.sourceLocation=function(){
if(this.resolved()){
var Z=this.script();
if(Z){
return Z.locationFromPosition(this.sourcePosition_(),true);
}
}
};
FunctionMirror.prototype.constructedBy=function(aa){
if(this.resolved()){
var Y=%DebugConstructedBy(this.value_,aa||0);
for(var S=0;S<Y.length;S++){
Y[S]=MakeMirror(Y[S]);
}
return Y;
}else{
return[];
}
};
FunctionMirror.prototype.scopeCount=function(){
if(this.resolved()){
if((this.scopeCount_===(void 0))){
this.scopeCount_=%GetFunctionScopeCount(this.value());
}
return this.scopeCount_;
}else{
return 0;
}
};
FunctionMirror.prototype.scope=function(R){
if(this.resolved()){
return new ScopeMirror((void 0),this,R);
}
};
FunctionMirror.prototype.toText=function(){
return this.source();
};
function UnresolvedFunctionMirror(r){
%_CallFunction(this,m.FUNCTION_TYPE,r,ValueMirror);
this.propertyCount_=0;
this.elementCount_=0;
this.resolved_=false;
}
inherits(UnresolvedFunctionMirror,FunctionMirror);
UnresolvedFunctionMirror.prototype.className=function(){
return'Function';
};
UnresolvedFunctionMirror.prototype.constructorFunction=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.prototypeObject=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.protoObject=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.name=function(){
return this.value_;
};
UnresolvedFunctionMirror.prototype.inferredName=function(){
return(void 0);
};
UnresolvedFunctionMirror.prototype.propertyNames=function(J,K){
return[];
};
function ArrayMirror(r){
%_CallFunction(this,r,ObjectMirror);
}
inherits(ArrayMirror,ObjectMirror);
ArrayMirror.prototype.length=function(){
return this.value_.length;
};
ArrayMirror.prototype.indexedPropertiesFromRange=function(opt_from_index,
opt_to_index){
var ab=opt_from_index||0;
var ac=opt_to_index||this.length()-1;
if(ab>ac)return new d();
var ad=new d(ac-ab+1);
for(var S=ab;S<=ac;S++){
var V=%DebugGetPropertyDetails(this.value_,k(S));
var r;
if(V){
r=new PropertyMirror(this,S,V);
}else{
r=GetUndefinedMirror();
}
ad[S-ab]=r;
}
return ad;
};
function DateMirror(r){
%_CallFunction(this,r,ObjectMirror);
}
inherits(DateMirror,ObjectMirror);
DateMirror.prototype.toText=function(){
var ae=f(this.value_);
return ae.substring(1,ae.length-1);
};
function RegExpMirror(r){
%_CallFunction(this,r,m.REGEXP_TYPE,ObjectMirror);
}
inherits(RegExpMirror,ObjectMirror);
RegExpMirror.prototype.source=function(){
return this.value_.source;
};
RegExpMirror.prototype.global=function(){
return this.value_.global;
};
RegExpMirror.prototype.ignoreCase=function(){
return this.value_.ignoreCase;
};
RegExpMirror.prototype.multiline=function(){
return this.value_.multiline;
};
RegExpMirror.prototype.sticky=function(){
return this.value_.sticky;
};
RegExpMirror.prototype.unicode=function(){
return this.value_.unicode;
};
RegExpMirror.prototype.toText=function(){
return"/"+this.source()+"/";
};
function ErrorMirror(r){
%_CallFunction(this,r,m.ERROR_TYPE,ObjectMirror);
}
inherits(ErrorMirror,ObjectMirror);
ErrorMirror.prototype.message=function(){
return this.value_.message;
};
ErrorMirror.prototype.toText=function(){
var af;
try{
af=%_CallFunction(this.value_,builtins.$errorToString);
}catch(e){
af='#<Error>';
}
return af;
};
function PromiseMirror(r){
%_CallFunction(this,r,m.PROMISE_TYPE,ObjectMirror);
}
inherits(PromiseMirror,ObjectMirror);
function PromiseGetStatus_(r){
var ag=%DebugGetProperty(r,h);
if(ag==0)return"pending";
if(ag==1)return"resolved";
return"rejected";
}
function PromiseGetValue_(r){
return %DebugGetProperty(r,i);
}
PromiseMirror.prototype.status=function(){
return PromiseGetStatus_(this.value_);
};
PromiseMirror.prototype.promiseValue=function(){
return MakeMirror(PromiseGetValue_(this.value_));
};
function MapMirror(r){
%_CallFunction(this,r,m.MAP_TYPE,ObjectMirror);
}
inherits(MapMirror,ObjectMirror);
MapMirror.prototype.entries=function(ah){
var Y=[];
if((%_ClassOf(this.value_)==='WeakMap')){
var ai=%GetWeakMapEntries(this.value_,ah||0);
for(var S=0;S<ai.length;S+=2){
Y.push({
key:ai[S],
value:ai[S+1]
});
}
return Y;
}
var aj=%_CallFunction(this.value_,builtins.$mapEntries);
var ak;
while((!ah||Y.length<ah)&&
!(ak=aj.next()).done){
Y.push({
key:ak.value[0],
value:ak.value[1]
});
}
return Y;
};
function SetMirror(r){
%_CallFunction(this,r,m.SET_TYPE,ObjectMirror);
}
inherits(SetMirror,ObjectMirror);
function IteratorGetValues_(aj,al,ah){
var Y=[];
var ak;
while((!ah||Y.length<ah)&&
!(ak=%_CallFunction(aj,al)).done){
Y.push(ak.value);
}
return Y;
}
SetMirror.prototype.values=function(ah){
if((%_ClassOf(this.value_)==='WeakSet')){
return %GetWeakSetValues(this.value_,ah||0);
}
var aj=%_CallFunction(this.value_,builtins.$setValues);
return IteratorGetValues_(aj,builtins.$setIteratorNext,ah);
};
function IteratorMirror(r){
%_CallFunction(this,r,m.ITERATOR_TYPE,ObjectMirror);
}
inherits(IteratorMirror,ObjectMirror);
IteratorMirror.prototype.preview=function(ah){
if((%_ClassOf(this.value_)==='Map Iterator')){
return IteratorGetValues_(%MapIteratorClone(this.value_),
builtins.$mapIteratorNext,
ah);
}else if((%_ClassOf(this.value_)==='Set Iterator')){
return IteratorGetValues_(%SetIteratorClone(this.value_),
builtins.$setIteratorNext,
ah);
}
};
function GeneratorMirror(r){
%_CallFunction(this,r,m.GENERATOR_TYPE,ObjectMirror);
}
inherits(GeneratorMirror,ObjectMirror);
function GeneratorGetStatus_(r){
var am=%GeneratorGetContinuation(r);
if(am<0)return"running";
if(am==0)return"closed";
return"suspended";
}
GeneratorMirror.prototype.status=function(){
return GeneratorGetStatus_(this.value_);
};
GeneratorMirror.prototype.sourcePosition_=function(){
return %GeneratorGetSourcePosition(this.value_);
};
GeneratorMirror.prototype.sourceLocation=function(){
var an=this.sourcePosition_();
if(!(an===(void 0))){
var Z=this.func().script();
if(Z){
return Z.locationFromPosition(an,true);
}
}
};
GeneratorMirror.prototype.func=function(){
if(!this.func_){
this.func_=MakeMirror(%GeneratorGetFunction(this.value_));
}
return this.func_;
};
GeneratorMirror.prototype.context=function(){
if(!this.context_){
this.context_=new ContextMirror(%GeneratorGetContext(this.value_));
}
return this.context_;
};
GeneratorMirror.prototype.receiver=function(){
if(!this.receiver_){
this.receiver_=MakeMirror(%GeneratorGetReceiver(this.value_));
}
return this.receiver_;
};
function PropertyMirror(t,U,V){
%_CallFunction(this,m.PROPERTY_TYPE,Mirror);
this.mirror_=t;
this.name_=U;
this.value_=V[0];
this.details_=V[1];
this.is_interceptor_=V[2];
if(V.length>3){
this.exception_=V[3];
this.getter_=V[4];
this.setter_=V[5];
}
}
inherits(PropertyMirror,Mirror);
PropertyMirror.prototype.isReadOnly=function(){
return(this.attributes()&C.ReadOnly)!=0;
};
PropertyMirror.prototype.isEnum=function(){
return(this.attributes()&C.DontEnum)==0;
};
PropertyMirror.prototype.canDelete=function(){
return(this.attributes()&C.DontDelete)==0;
};
PropertyMirror.prototype.name=function(){
return this.name_;
};
PropertyMirror.prototype.isIndexed=function(){
for(var S=0;S<this.name_.length;S++){
if(this.name_[S]<'0'||'9'<this.name_[S]){
return false;
}
}
return true;
};
PropertyMirror.prototype.value=function(){
return MakeMirror(this.value_,false);
};
PropertyMirror.prototype.isException=function(){
return this.exception_?true:false;
};
PropertyMirror.prototype.attributes=function(){
return %DebugPropertyAttributesFromDetails(this.details_);
};
PropertyMirror.prototype.propertyType=function(){
return %DebugPropertyTypeFromDetails(this.details_);
};
PropertyMirror.prototype.insertionIndex=function(){
return %DebugPropertyIndexFromDetails(this.details_);
};
PropertyMirror.prototype.hasGetter=function(){
return this.getter_?true:false;
};
PropertyMirror.prototype.hasSetter=function(){
return this.setter_?true:false;
};
PropertyMirror.prototype.getter=function(){
if(this.hasGetter()){
return MakeMirror(this.getter_);
}else{
return GetUndefinedMirror();
}
};
PropertyMirror.prototype.setter=function(){
if(this.hasSetter()){
return MakeMirror(this.setter_);
}else{
return GetUndefinedMirror();
}
};
PropertyMirror.prototype.isNative=function(){
return this.is_interceptor_||
((this.propertyType()==B.AccessorConstant)&&
!this.hasGetter()&&!this.hasSetter());
};
function InternalPropertyMirror(U,r){
%_CallFunction(this,m.INTERNAL_PROPERTY_TYPE,Mirror);
this.name_=U;
this.value_=r;
}
inherits(InternalPropertyMirror,Mirror);
InternalPropertyMirror.prototype.name=function(){
return this.name_;
};
InternalPropertyMirror.prototype.value=function(){
return MakeMirror(this.value_,false);
};
var ao=0;
var ap=1;
var aq=2;
var ar=3;
var as=4;
var at=5;
var au=6;
var av=7;
var aw=8;
var ax=9;
var ay=0;
var az=1;
var aA=2;
var aB=1<<0;
var aC=1<<1;
var aD=7<<2;
function FrameDetails(aE,R){
this.break_id_=aE;
this.details_=%GetFrameDetails(aE,R);
}
FrameDetails.prototype.frameId=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ao];
};
FrameDetails.prototype.receiver=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ap];
};
FrameDetails.prototype.func=function(){
%CheckExecutionState(this.break_id_);
return this.details_[aq];
};
FrameDetails.prototype.isConstructCall=function(){
%CheckExecutionState(this.break_id_);
return this.details_[au];
};
FrameDetails.prototype.isAtReturn=function(){
%CheckExecutionState(this.break_id_);
return this.details_[av];
};
FrameDetails.prototype.isDebuggerFrame=function(){
%CheckExecutionState(this.break_id_);
var aF=aB;
return(this.details_[aw]&aF)==aF;
};
FrameDetails.prototype.isOptimizedFrame=function(){
%CheckExecutionState(this.break_id_);
var aF=aC;
return(this.details_[aw]&aF)==aF;
};
FrameDetails.prototype.isInlinedFrame=function(){
return this.inlinedFrameIndex()>0;
};
FrameDetails.prototype.inlinedFrameIndex=function(){
%CheckExecutionState(this.break_id_);
var aF=aD;
return(this.details_[aw]&aF)>>2;
};
FrameDetails.prototype.argumentCount=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ar];
};
FrameDetails.prototype.argumentName=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.argumentCount()){
return this.details_[ax+
R*aA+
ay];
}
};
FrameDetails.prototype.argumentValue=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.argumentCount()){
return this.details_[ax+
R*aA+
az];
}
};
FrameDetails.prototype.localCount=function(){
%CheckExecutionState(this.break_id_);
return this.details_[as];
};
FrameDetails.prototype.sourcePosition=function(){
%CheckExecutionState(this.break_id_);
return this.details_[at];
};
FrameDetails.prototype.localName=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.localCount()){
var aG=ax+
this.argumentCount()*aA;
return this.details_[aG+
R*aA+
ay];
}
};
FrameDetails.prototype.localValue=function(R){
%CheckExecutionState(this.break_id_);
if(R>=0&&R<this.localCount()){
var aG=ax+
this.argumentCount()*aA;
return this.details_[aG+
R*aA+
az];
}
};
FrameDetails.prototype.returnValue=function(){
%CheckExecutionState(this.break_id_);
var aH=
ax+
(this.argumentCount()+this.localCount())*aA;
if(this.details_[av]){
return this.details_[aH];
}
};
FrameDetails.prototype.scopeCount=function(){
if((this.scopeCount_===(void 0))){
this.scopeCount_=%GetScopeCount(this.break_id_,this.frameId());
}
return this.scopeCount_;
};
FrameDetails.prototype.stepInPositionsImpl=function(){
return %GetStepInPositions(this.break_id_,this.frameId());
};
function FrameMirror(aE,R){
%_CallFunction(this,m.FRAME_TYPE,Mirror);
this.break_id_=aE;
this.index_=R;
this.details_=new FrameDetails(aE,R);
}
inherits(FrameMirror,Mirror);
FrameMirror.prototype.details=function(){
return this.details_;
};
FrameMirror.prototype.index=function(){
return this.index_;
};
FrameMirror.prototype.func=function(){
if(this.func_){
return this.func_;
}
var aF=this.details_.func();
if((%_IsFunction(aF))){
return this.func_=MakeMirror(aF);
}else{
return new UnresolvedFunctionMirror(aF);
}
};
FrameMirror.prototype.receiver=function(){
return MakeMirror(this.details_.receiver());
};
FrameMirror.prototype.isConstructCall=function(){
return this.details_.isConstructCall();
};
FrameMirror.prototype.isAtReturn=function(){
return this.details_.isAtReturn();
};
FrameMirror.prototype.isDebuggerFrame=function(){
return this.details_.isDebuggerFrame();
};
FrameMirror.prototype.isOptimizedFrame=function(){
return this.details_.isOptimizedFrame();
};
FrameMirror.prototype.isInlinedFrame=function(){
return this.details_.isInlinedFrame();
};
FrameMirror.prototype.inlinedFrameIndex=function(){
return this.details_.inlinedFrameIndex();
};
FrameMirror.prototype.argumentCount=function(){
return this.details_.argumentCount();
};
FrameMirror.prototype.argumentName=function(R){
return this.details_.argumentName(R);
};
FrameMirror.prototype.argumentValue=function(R){
return MakeMirror(this.details_.argumentValue(R));
};
FrameMirror.prototype.localCount=function(){
return this.details_.localCount();
};
FrameMirror.prototype.localName=function(R){
return this.details_.localName(R);
};
FrameMirror.prototype.localValue=function(R){
return MakeMirror(this.details_.localValue(R));
};
FrameMirror.prototype.returnValue=function(){
return MakeMirror(this.details_.returnValue());
};
FrameMirror.prototype.sourcePosition=function(){
return this.details_.sourcePosition();
};
FrameMirror.prototype.sourceLocation=function(){
var aI=this.func();
if(aI.resolved()){
var Z=aI.script();
if(Z){
return Z.locationFromPosition(this.sourcePosition(),true);
}
}
};
FrameMirror.prototype.sourceLine=function(){
var aJ=this.sourceLocation();
if(aJ){
return aJ.line;
}
};
FrameMirror.prototype.sourceColumn=function(){
var aJ=this.sourceLocation();
if(aJ){
return aJ.column;
}
};
FrameMirror.prototype.sourceLineText=function(){
var aJ=this.sourceLocation();
if(aJ){
return aJ.sourceText();
}
};
FrameMirror.prototype.scopeCount=function(){
return this.details_.scopeCount();
};
FrameMirror.prototype.scope=function(R){
return new ScopeMirror(this,(void 0),R);
};
FrameMirror.prototype.allScopes=function(aK){
var aL=%GetAllScopesDetails(this.break_id_,
this.details_.frameId(),
this.details_.inlinedFrameIndex(),
!!aK);
var Y=[];
for(var S=0;S<aL.length;++S){
Y.push(new ScopeMirror(this,(void 0),S,aL[S]));
}
return Y;
};
FrameMirror.prototype.stepInPositions=function(){
var Z=this.func().script();
var aM=this.func().sourcePosition_();
var aN=this.details_.stepInPositionsImpl();
var Y=[];
if(aN){
for(var S=0;S<aN.length;S++){
var aO={};
var aP=Z.locationFromPosition(aM+aN[S],
true);
serializeLocationFields(aP,aO);
var aQ={
position:aO
};
Y.push(aQ);
}
}
return Y;
};
FrameMirror.prototype.evaluate=function(source,disable_break,
opt_context_object){
return MakeMirror(%DebugEvaluate(this.break_id_,
this.details_.frameId(),
this.details_.inlinedFrameIndex(),
source,
j(disable_break),
opt_context_object));
};
FrameMirror.prototype.invocationText=function(){
var Y='';
var aI=this.func();
var aR=this.receiver();
if(this.isConstructCall()){
Y+='new ';
Y+=aI.name()?aI.name():'[anonymous]';
}else if(this.isDebuggerFrame()){
Y+='[debugger]';
}else{
var aS=
!aR.className||(aR.className()!='global');
if(aS){
Y+=aR.toText();
}
var W=GetUndefinedMirror();
if(aR.isObject()){
for(var aT=aR;
!aT.isNull()&&W.isUndefined();
aT=aT.protoObject()){
W=aT.lookupProperty(aI);
}
}
if(!W.isUndefined()){
if(!W.isIndexed()){
if(aS){
Y+='.';
}
Y+=W.name();
}else{
Y+='[';
Y+=W.name();
Y+=']';
}
if(aI.name()&&aI.name()!=W.name()){
Y+='(aka '+aI.name()+')';
}
}else{
if(aS){
Y+='.';
}
Y+=aI.name()?aI.name():'[anonymous]';
}
}
if(!this.isDebuggerFrame()){
Y+='(';
for(var S=0;S<this.argumentCount();S++){
if(S!=0)Y+=', ';
if(this.argumentName(S)){
Y+=this.argumentName(S);
Y+='=';
}
Y+=this.argumentValue(S).toText();
}
Y+=')';
}
if(this.isAtReturn()){
Y+=' returning ';
Y+=this.returnValue().toText();
}
return Y;
};
FrameMirror.prototype.sourceAndPositionText=function(){
var Y='';
var aI=this.func();
if(aI.resolved()){
var Z=aI.script();
if(Z){
if(Z.name()){
Y+=Z.name();
}else{
Y+='[unnamed]';
}
if(!this.isDebuggerFrame()){
var aJ=this.sourceLocation();
Y+=' line ';
Y+=!(aJ===(void 0))?(aJ.line+1):'?';
Y+=' column ';
Y+=!(aJ===(void 0))?(aJ.column+1):'?';
if(!(this.sourcePosition()===(void 0))){
Y+=' (position '+(this.sourcePosition()+1)+')';
}
}
}else{
Y+='[no source]';
}
}else{
Y+='[unresolved]';
}
return Y;
};
FrameMirror.prototype.localsText=function(){
var Y='';
var aU=this.localCount();
if(aU>0){
for(var S=0;S<aU;++S){
Y+='      var ';
Y+=this.localName(S);
Y+=' = ';
Y+=this.localValue(S).toText();
if(S<aU-1)Y+='\n';
}
}
return Y;
};
FrameMirror.prototype.restart=function(){
var Y=%LiveEditRestartFrame(this.break_id_,this.index_);
if((Y===(void 0))){
Y="Failed to find requested frame";
}
return Y;
};
FrameMirror.prototype.toText=function(aV){
var Y='';
Y+='#'+(this.index()<=9?'0':'')+this.index();
Y+=' ';
Y+=this.invocationText();
Y+=' ';
Y+=this.sourceAndPositionText();
if(aV){
Y+='\n';
Y+=this.localsText();
}
return Y;
};
var aW=0;
var aX=1;
function ScopeDetails(aY,aZ,R,ba){
if(aY){
this.break_id_=aY.break_id_;
this.details_=ba||
%GetScopeDetails(aY.break_id_,
aY.details_.frameId(),
aY.details_.inlinedFrameIndex(),
R);
this.frame_id_=aY.details_.frameId();
this.inlined_frame_id_=aY.details_.inlinedFrameIndex();
}else{
this.details_=ba||%GetFunctionScopeDetails(aZ.value(),R);
this.fun_value_=aZ.value();
this.break_id_=(void 0);
}
this.index_=R;
}
ScopeDetails.prototype.type=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[aW];
};
ScopeDetails.prototype.object=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[aX];
};
ScopeDetails.prototype.setVariableValueImpl=function(U,bb){
var bc;
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
bc=%SetScopeVariableValue(this.break_id_,this.frame_id_,
this.inlined_frame_id_,this.index_,U,bb);
}else{
bc=%SetScopeVariableValue(this.fun_value_,null,null,this.index_,
U,bb);
}
if(!bc)throw MakeError(2,"Failed to set variable value");
};
function ScopeMirror(aY,aZ,R,ba){
%_CallFunction(this,m.SCOPE_TYPE,Mirror);
if(aY){
this.frame_index_=aY.index_;
}else{
this.frame_index_=(void 0);
}
this.scope_index_=R;
this.details_=new ScopeDetails(aY,aZ,R,ba);
}
inherits(ScopeMirror,Mirror);
ScopeMirror.prototype.details=function(){
return this.details_;
};
ScopeMirror.prototype.frameIndex=function(){
return this.frame_index_;
};
ScopeMirror.prototype.scopeIndex=function(){
return this.scope_index_;
};
ScopeMirror.prototype.scopeType=function(){
return this.details_.type();
};
ScopeMirror.prototype.scopeObject=function(){
var F=this.scopeType()==D.Local||
this.scopeType()==D.Closure||
this.scopeType()==D.Script;
return MakeMirror(this.details_.object(),F);
};
ScopeMirror.prototype.setVariableValue=function(U,bb){
this.details_.setVariableValueImpl(U,bb);
};
function ScriptMirror(Z){
%_CallFunction(this,m.SCRIPT_TYPE,Mirror);
this.script_=Z;
this.context_=new ContextMirror(Z.context_data);
this.allocateHandle_();
}
inherits(ScriptMirror,Mirror);
ScriptMirror.prototype.value=function(){
return this.script_;
};
ScriptMirror.prototype.name=function(){
return this.script_.name||this.script_.nameOrSourceURL();
};
ScriptMirror.prototype.id=function(){
return this.script_.id;
};
ScriptMirror.prototype.source=function(){
return this.script_.source;
};
ScriptMirror.prototype.setSource=function(bd){
%DebugSetScriptSource(this.script_,bd);
};
ScriptMirror.prototype.lineOffset=function(){
return this.script_.line_offset;
};
ScriptMirror.prototype.columnOffset=function(){
return this.script_.column_offset;
};
ScriptMirror.prototype.data=function(){
return this.script_.data;
};
ScriptMirror.prototype.scriptType=function(){
return this.script_.type;
};
ScriptMirror.prototype.compilationType=function(){
return this.script_.compilation_type;
};
ScriptMirror.prototype.lineCount=function(){
return this.script_.lineCount();
};
ScriptMirror.prototype.locationFromPosition=function(
position,include_resource_offset){
return this.script_.locationFromPosition(position,include_resource_offset);
};
ScriptMirror.prototype.sourceSlice=function(be,bf){
return this.script_.sourceSlice(be,bf);
};
ScriptMirror.prototype.context=function(){
return this.context_;
};
ScriptMirror.prototype.evalFromScript=function(){
return MakeMirror(this.script_.eval_from_script);
};
ScriptMirror.prototype.evalFromFunctionName=function(){
return MakeMirror(this.script_.eval_from_function_name);
};
ScriptMirror.prototype.evalFromLocation=function(){
var bg=this.evalFromScript();
if(!bg.isUndefined()){
var bh=this.script_.eval_from_script_position;
return bg.locationFromPosition(bh,true);
}
};
ScriptMirror.prototype.toText=function(){
var Y='';
Y+=this.name();
Y+=' (lines: ';
if(this.lineOffset()>0){
Y+=this.lineOffset();
Y+='-';
Y+=this.lineOffset()+this.lineCount()-1;
}else{
Y+=this.lineCount();
}
Y+=')';
return Y;
};
function ContextMirror(bi){
%_CallFunction(this,m.CONTEXT_TYPE,Mirror);
this.data_=bi;
this.allocateHandle_();
}
inherits(ContextMirror,Mirror);
ContextMirror.prototype.data=function(){
return this.data_;
};
function MakeMirrorSerializer(V,bj){
return new JSONProtocolSerializer(V,bj);
}
function JSONProtocolSerializer(V,bj){
this.details_=V;
this.options_=bj;
this.mirrors_=[];
}
JSONProtocolSerializer.prototype.serializeReference=function(t){
return this.serialize_(t,true,true);
};
JSONProtocolSerializer.prototype.serializeValue=function(t){
var bk=this.serialize_(t,false,true);
return bk;
};
JSONProtocolSerializer.prototype.serializeReferencedObjects=function(){
var bl=[];
var bm=this.mirrors_.length;
for(var S=0;S<bm;S++){
bl.push(this.serialize_(this.mirrors_[S],false,false));
}
return bl;
};
JSONProtocolSerializer.prototype.includeSource_=function(){
return this.options_&&this.options_.includeSource;
};
JSONProtocolSerializer.prototype.inlineRefs_=function(){
return this.options_&&this.options_.inlineRefs;
};
JSONProtocolSerializer.prototype.maxStringLength_=function(){
if((this.options_===(void 0))||
(this.options_.maxStringLength===(void 0))){
return z;
}
return this.options_.maxStringLength;
};
JSONProtocolSerializer.prototype.add_=function(t){
for(var S=0;S<this.mirrors_.length;S++){
if(this.mirrors_[S]===t){
return;
}
}
this.mirrors_.push(t);
};
JSONProtocolSerializer.prototype.serializeReferenceWithDisplayData_=
function(t){
var bn={};
bn.ref=t.handle();
bn.type=t.type();
switch(t.type()){
case m.UNDEFINED_TYPE:
case m.NULL_TYPE:
case m.BOOLEAN_TYPE:
case m.NUMBER_TYPE:
bn.value=t.value();
break;
case m.STRING_TYPE:
bn.value=t.getTruncatedValue(this.maxStringLength_());
break;
case m.SYMBOL_TYPE:
bn.description=t.description();
break;
case m.FUNCTION_TYPE:
bn.name=t.name();
bn.inferredName=t.inferredName();
if(t.script()){
bn.scriptId=t.script().id();
}
break;
case m.ERROR_TYPE:
case m.REGEXP_TYPE:
bn.value=t.toText();
break;
case m.OBJECT_TYPE:
bn.className=t.className();
break;
}
return bn;
};
JSONProtocolSerializer.prototype.serialize_=function(t,reference,
V){
if(reference&&
(t.isValue()||t.isScript()||t.isContext())){
if(this.inlineRefs_()&&t.isValue()){
return this.serializeReferenceWithDisplayData_(t);
}else{
this.add_(t);
return{'ref':t.handle()};
}
}
var bl={};
if(t.isValue()||t.isScript()||t.isContext()){
bl.handle=t.handle();
}
bl.type=t.type();
switch(t.type()){
case m.UNDEFINED_TYPE:
case m.NULL_TYPE:
break;
case m.BOOLEAN_TYPE:
bl.value=t.value();
break;
case m.NUMBER_TYPE:
bl.value=NumberToJSON_(t.value());
break;
case m.STRING_TYPE:
if(this.maxStringLength_()!=-1&&
t.length()>this.maxStringLength_()){
var bo=t.getTruncatedValue(this.maxStringLength_());
bl.value=bo;
bl.fromIndex=0;
bl.toIndex=this.maxStringLength_();
}else{
bl.value=t.value();
}
bl.length=t.length();
break;
case m.SYMBOL_TYPE:
bl.description=t.description();
break;
case m.OBJECT_TYPE:
case m.FUNCTION_TYPE:
case m.ERROR_TYPE:
case m.REGEXP_TYPE:
case m.PROMISE_TYPE:
case m.GENERATOR_TYPE:
this.serializeObject_(t,bl,V);
break;
case m.PROPERTY_TYPE:
case m.INTERNAL_PROPERTY_TYPE:
throw MakeError(2,
'PropertyMirror cannot be serialized independently');
break;
case m.FRAME_TYPE:
this.serializeFrame_(t,bl);
break;
case m.SCOPE_TYPE:
this.serializeScope_(t,bl);
break;
case m.SCRIPT_TYPE:
if(t.name()){
bl.name=t.name();
}
bl.id=t.id();
bl.lineOffset=t.lineOffset();
bl.columnOffset=t.columnOffset();
bl.lineCount=t.lineCount();
if(t.data()){
bl.data=t.data();
}
if(this.includeSource_()){
bl.source=t.source();
}else{
var bp=t.source().substring(0,80);
bl.sourceStart=bp;
}
bl.sourceLength=t.source().length;
bl.scriptType=t.scriptType();
bl.compilationType=t.compilationType();
if(t.compilationType()==1&&
t.evalFromScript()){
bl.evalFromScript=
this.serializeReference(t.evalFromScript());
var bq=t.evalFromLocation();
if(bq){
bl.evalFromLocation={line:bq.line,
column:bq.column};
}
if(t.evalFromFunctionName()){
bl.evalFromFunctionName=t.evalFromFunctionName();
}
}
if(t.context()){
bl.context=this.serializeReference(t.context());
}
break;
case m.CONTEXT_TYPE:
bl.data=t.data();
break;
}
bl.text=t.toText();
return bl;
};
JSONProtocolSerializer.prototype.serializeObject_=function(t,bl,
V){
bl.className=t.className();
bl.constructorFunction=
this.serializeReference(t.constructorFunction());
bl.protoObject=this.serializeReference(t.protoObject());
bl.prototypeObject=this.serializeReference(t.prototypeObject());
if(t.hasNamedInterceptor()){
bl.namedInterceptor=true;
}
if(t.hasIndexedInterceptor()){
bl.indexedInterceptor=true;
}
if(t.isFunction()){
bl.name=t.name();
if(!(t.inferredName()===(void 0))){
bl.inferredName=t.inferredName();
}
bl.resolved=t.resolved();
if(t.resolved()){
bl.source=t.source();
}
if(t.script()){
bl.script=this.serializeReference(t.script());
bl.scriptId=t.script().id();
serializeLocationFields(t.sourceLocation(),bl);
}
bl.scopes=[];
for(var S=0;S<t.scopeCount();S++){
var br=t.scope(S);
bl.scopes.push({
type:br.scopeType(),
index:S
});
}
}
if(t.isGenerator()){
bl.status=t.status();
bl.func=this.serializeReference(t.func())
bl.receiver=this.serializeReference(t.receiver())
serializeLocationFields(t.sourceLocation(),bl);
}
if(t.isDate()){
bl.value=t.value();
}
if(t.isPromise()){
bl.status=t.status();
bl.promiseValue=this.serializeReference(t.promiseValue());
}
var L=t.propertyNames(A.Named);
var bs=t.propertyNames(A.Indexed);
var bt=new d(L.length+bs.length);
for(var S=0;S<L.length;S++){
var bu=t.property(L[S]);
bt[S]=this.serializeProperty_(bu);
if(V){
this.add_(bu.value());
}
}
for(var S=0;S<bs.length;S++){
var bu=t.property(bs[S]);
bt[L.length+S]=this.serializeProperty_(bu);
if(V){
this.add_(bu.value());
}
}
bl.properties=bt;
var bv=t.internalProperties();
if(bv.length>0){
var bw=[];
for(var S=0;S<bv.length;S++){
bw.push(this.serializeInternalProperty_(bv[S]));
}
bl.internalProperties=bw;
}
};
function serializeLocationFields(aJ,bl){
if(!aJ){
return;
}
bl.position=aJ.position;
var bx=aJ.line;
if(!(bx===(void 0))){
bl.line=bx;
}
var by=aJ.column;
if(!(by===(void 0))){
bl.column=by;
}
}
JSONProtocolSerializer.prototype.serializeProperty_=function(bu){
var Y={};
Y.name=bu.name();
var bz=bu.value();
if(this.inlineRefs_()&&bz.isValue()){
Y.value=this.serializeReferenceWithDisplayData_(bz);
}else{
if(bu.attributes()!=C.None){
Y.attributes=bu.attributes();
}
Y.propertyType=bu.propertyType();
Y.ref=bz.handle();
}
return Y;
};
JSONProtocolSerializer.prototype.serializeInternalProperty_=
function(bu){
var Y={};
Y.name=bu.name();
var bz=bu.value();
if(this.inlineRefs_()&&bz.isValue()){
Y.value=this.serializeReferenceWithDisplayData_(bz);
}else{
Y.ref=bz.handle();
}
return Y;
};
JSONProtocolSerializer.prototype.serializeFrame_=function(t,bl){
bl.index=t.index();
bl.receiver=this.serializeReference(t.receiver());
var aI=t.func();
bl.func=this.serializeReference(aI);
var Z=aI.script();
if(Z){
bl.script=this.serializeReference(Z);
}
bl.constructCall=t.isConstructCall();
bl.atReturn=t.isAtReturn();
if(t.isAtReturn()){
bl.returnValue=this.serializeReference(t.returnValue());
}
bl.debuggerFrame=t.isDebuggerFrame();
var H=new d(t.argumentCount());
for(var S=0;S<t.argumentCount();S++){
var bA={};
var bB=t.argumentName(S);
if(bB){
bA.name=bB;
}
bA.value=this.serializeReference(t.argumentValue(S));
H[S]=bA;
}
bl.arguments=H;
var H=new d(t.localCount());
for(var S=0;S<t.localCount();S++){
var bC={};
bC.name=t.localName(S);
bC.value=this.serializeReference(t.localValue(S));
H[S]=bC;
}
bl.locals=H;
serializeLocationFields(t.sourceLocation(),bl);
var bD=t.sourceLineText();
if(!(bD===(void 0))){
bl.sourceLineText=bD;
}
bl.scopes=[];
for(var S=0;S<t.scopeCount();S++){
var br=t.scope(S);
bl.scopes.push({
type:br.scopeType(),
index:S
});
}
};
JSONProtocolSerializer.prototype.serializeScope_=function(t,bl){
bl.index=t.scopeIndex();
bl.frameIndex=t.frameIndex();
bl.type=t.scopeType();
bl.object=this.inlineRefs_()?
this.serializeValue(t.scopeObject()):
this.serializeReference(t.scopeObject());
};
function NumberToJSON_(r){
if(e(r)){
return'NaN';
}
if(!(%_IsSmi(%IS_VAR(r))||((r==r)&&(r!=1/0)&&(r!=-1/0)))){
if(r>0){
return'Infinity';
}else{
return'-Infinity';
}
}
return r;
}
b.InstallFunctions(a,2,[
"MakeMirror",MakeMirror,
"MakeMirrorSerializer",MakeMirrorSerializer,
"LookupMirror",LookupMirror,
"ToggleMirrorCache",ToggleMirrorCache,
"MirrorCacheIsEmpty",MirrorCacheIsEmpty,
]);
b.InstallConstants(a,[
"ScopeType",D,
"PropertyKind",A,
"PropertyType",B,
"PropertyAttribute",C,
"Mirror",Mirror,
"ValueMirror",ValueMirror,
"UndefinedMirror",UndefinedMirror,
"NullMirror",NullMirror,
"BooleanMirror",BooleanMirror,
"NumberMirror",NumberMirror,
"StringMirror",StringMirror,
"SymbolMirror",SymbolMirror,
"ObjectMirror",ObjectMirror,
"FunctionMirror",FunctionMirror,
"UnresolvedFunctionMirror",UnresolvedFunctionMirror,
"ArrayMirror",ArrayMirror,
"DateMirror",DateMirror,
"RegExpMirror",RegExpMirror,
"ErrorMirror",ErrorMirror,
"PromiseMirror",PromiseMirror,
"MapMirror",MapMirror,
"SetMirror",SetMirror,
"IteratorMirror",IteratorMirror,
"GeneratorMirror",GeneratorMirror,
"PropertyMirror",PropertyMirror,
"InternalPropertyMirror",InternalPropertyMirror,
"FrameMirror",FrameMirror,
"ScriptMirror",ScriptMirror,
"ScopeMirror",ScopeMirror,
"FrameDetails",FrameDetails,
]);
b.InstallFunctions(b,2,[
"ClearMirrorCache",ClearMirrorCache
]);
b.Export(function(bE){
bE.MirrorType=m;
});
})

debugJˆ
(function(a,b){
"use strict";
var c=a.FrameMirror;
var d=a.Array;
var e=a.RegExp;
var f=a.isNaN;
var g=a.JSON.parse;
var h=a.JSON.stringify;
var i=a.LookupMirror;
var j=a.MakeMirror;
var k=a.MakeMirrorSerializer;
var l=a.Math.min;
var m=a.Mirror;
var n;
var o=a.parseInt;
var p;
var q;
var r;
var s=a.ValueMirror;
b.Import(function(t){
n=t.MirrorType;
p=t.ToBoolean;
q=t.ToNumber;
r=t.ToString;
});
var u=10;
var v={};
var w=/^(?:\s*(?:\/\*.*?\*\/)*)*/;
v.DebugEvent={Break:1,
Exception:2,
NewFunction:3,
BeforeCompile:4,
AfterCompile:5,
CompileError:6,
PromiseEvent:7,
AsyncTaskEvent:8};
v.ExceptionBreak={Caught:0,
Uncaught:1};
v.StepAction={StepOut:0,
StepNext:1,
StepIn:2,
StepMin:3,
StepInMin:4,
StepFrame:5};
v.ScriptType={Native:0,
Extension:1,
Normal:2};
v.ScriptCompilationType={Host:0,
Eval:1,
JSON:2};
v.ScriptBreakPointType={ScriptId:0,
ScriptName:1,
ScriptRegExp:2};
v.BreakPositionAlignment={
Statement:0,
BreakPosition:1
};
function ScriptTypeFlag(x){
return(1<<x);
}
var y=0;
var z=1;
var A=[];
var B=[];
var C={
breakPointsActive:{
value:true,
getValue:function(){return this.value;},
setValue:function(D){
this.value=!!D;
%SetDisableBreak(!this.value);
}
},
breakOnCaughtException:{
getValue:function(){return v.isBreakOnException();},
setValue:function(D){
if(D){
v.setBreakOnException();
}else{
v.clearBreakOnException();
}
}
},
breakOnUncaughtException:{
getValue:function(){return v.isBreakOnUncaughtException();},
setValue:function(D){
if(D){
v.setBreakOnUncaughtException();
}else{
v.clearBreakOnUncaughtException();
}
}
},
};
function MakeBreakPoint(E,F){
var G=new BreakPoint(E,F);
A.push(G);
return G;
}
function BreakPoint(E,F){
this.source_position_=E;
if(F){
this.script_break_point_=F;
}else{
this.number_=z++;
}
this.hit_count_=0;
this.active_=true;
this.condition_=null;
this.ignoreCount_=0;
}
BreakPoint.prototype.number=function(){
return this.number_;
};
BreakPoint.prototype.func=function(){
return this.func_;
};
BreakPoint.prototype.source_position=function(){
return this.source_position_;
};
BreakPoint.prototype.hit_count=function(){
return this.hit_count_;
};
BreakPoint.prototype.active=function(){
if(this.script_break_point()){
return this.script_break_point().active();
}
return this.active_;
};
BreakPoint.prototype.condition=function(){
if(this.script_break_point()&&this.script_break_point().condition()){
return this.script_break_point().condition();
}
return this.condition_;
};
BreakPoint.prototype.ignoreCount=function(){
return this.ignoreCount_;
};
BreakPoint.prototype.script_break_point=function(){
return this.script_break_point_;
};
BreakPoint.prototype.enable=function(){
this.active_=true;
};
BreakPoint.prototype.disable=function(){
this.active_=false;
};
BreakPoint.prototype.setCondition=function(H){
this.condition_=H;
};
BreakPoint.prototype.setIgnoreCount=function(I){
this.ignoreCount_=I;
};
BreakPoint.prototype.isTriggered=function(J){
if(!this.active())return false;
if(this.condition()){
try{
var K=J.frame(0).evaluate(this.condition());
if(!(K instanceof s)||!p(K.value_)){
return false;
}
}catch(e){
return false;
}
}
this.hit_count_++;
if(this.script_break_point_){
this.script_break_point_.hit_count_++;
}
if(this.ignoreCount_>0){
this.ignoreCount_--;
return false;
}
return true;
};
function IsBreakPointTriggered(L,G){
return G.isTriggered(MakeExecutionState(L));
}
function ScriptBreakPoint(x,script_id_or_name,opt_line,opt_column,
opt_groupId,opt_position_alignment){
this.type_=x;
if(x==v.ScriptBreakPointType.ScriptId){
this.script_id_=script_id_or_name;
}else if(x==v.ScriptBreakPointType.ScriptName){
this.script_name_=script_id_or_name;
}else if(x==v.ScriptBreakPointType.ScriptRegExp){
this.script_regexp_object_=new e(script_id_or_name);
}else{
throw MakeError(2,"Unexpected breakpoint type "+x);
}
this.line_=opt_line||0;
this.column_=opt_column;
this.groupId_=opt_groupId;
this.position_alignment_=(opt_position_alignment===(void 0))
?v.BreakPositionAlignment.Statement:opt_position_alignment;
this.hit_count_=0;
this.active_=true;
this.condition_=null;
this.ignoreCount_=0;
this.break_points_=[];
}
ScriptBreakPoint.prototype.cloneForOtherScript=function(M){
var N=new ScriptBreakPoint(v.ScriptBreakPointType.ScriptId,
M.id,this.line_,this.column_,this.groupId_,
this.position_alignment_);
N.number_=z++;
B.push(N);
N.hit_count_=this.hit_count_;
N.active_=this.active_;
N.condition_=this.condition_;
N.ignoreCount_=this.ignoreCount_;
return N;
};
ScriptBreakPoint.prototype.number=function(){
return this.number_;
};
ScriptBreakPoint.prototype.groupId=function(){
return this.groupId_;
};
ScriptBreakPoint.prototype.type=function(){
return this.type_;
};
ScriptBreakPoint.prototype.script_id=function(){
return this.script_id_;
};
ScriptBreakPoint.prototype.script_name=function(){
return this.script_name_;
};
ScriptBreakPoint.prototype.script_regexp_object=function(){
return this.script_regexp_object_;
};
ScriptBreakPoint.prototype.line=function(){
return this.line_;
};
ScriptBreakPoint.prototype.column=function(){
return this.column_;
};
ScriptBreakPoint.prototype.actual_locations=function(){
var O=[];
for(var P=0;P<this.break_points_.length;P++){
O.push(this.break_points_[P].actual_location);
}
return O;
};
ScriptBreakPoint.prototype.update_positions=function(Q,R){
this.line_=Q;
this.column_=R;
};
ScriptBreakPoint.prototype.hit_count=function(){
return this.hit_count_;
};
ScriptBreakPoint.prototype.active=function(){
return this.active_;
};
ScriptBreakPoint.prototype.condition=function(){
return this.condition_;
};
ScriptBreakPoint.prototype.ignoreCount=function(){
return this.ignoreCount_;
};
ScriptBreakPoint.prototype.enable=function(){
this.active_=true;
};
ScriptBreakPoint.prototype.disable=function(){
this.active_=false;
};
ScriptBreakPoint.prototype.setCondition=function(H){
this.condition_=H;
};
ScriptBreakPoint.prototype.setIgnoreCount=function(I){
this.ignoreCount_=I;
for(var P=0;P<this.break_points_.length;P++){
this.break_points_[P].setIgnoreCount(I);
}
};
ScriptBreakPoint.prototype.matchesScript=function(S){
if(this.type_==v.ScriptBreakPointType.ScriptId){
return this.script_id_==S.id;
}else{
if(!(S.line_offset<=this.line_&&
this.line_<S.line_offset+S.lineCount())){
return false;
}
if(this.type_==v.ScriptBreakPointType.ScriptName){
return this.script_name_==S.nameOrSourceURL();
}else if(this.type_==v.ScriptBreakPointType.ScriptRegExp){
return this.script_regexp_object_.test(S.nameOrSourceURL());
}else{
throw MakeError(2,"Unexpected breakpoint type "+this.type_);
}
}
};
ScriptBreakPoint.prototype.set=function(S){
var R=this.column();
var Q=this.line();
if((R===(void 0))){
var T=S.sourceLine(this.line());
if(!S.sourceColumnStart_){
S.sourceColumnStart_=new d(S.lineCount());
}
if((S.sourceColumnStart_[Q]===(void 0))){
S.sourceColumnStart_[Q]=
T.match(w)[0].length;
}
R=S.sourceColumnStart_[Q];
}
var U=v.findScriptSourcePosition(S,this.line(),R);
if((U===null))return;
var G=MakeBreakPoint(U,this);
G.setIgnoreCount(this.ignoreCount());
var V=%SetScriptBreakPoint(S,U,
this.position_alignment_,
G);
if((V===(void 0))){
V=U;
}
var W=S.locationFromPosition(V,true);
G.actual_location={line:W.line,
column:W.column,
script_id:S.id};
this.break_points_.push(G);
return G;
};
ScriptBreakPoint.prototype.clear=function(){
var X=[];
for(var P=0;P<A.length;P++){
if(A[P].script_break_point()&&
A[P].script_break_point()===this){
%ClearBreakPoint(A[P]);
}else{
X.push(A[P]);
}
}
A=X;
this.break_points_=[];
};
function UpdateScriptBreakPoints(S){
for(var P=0;P<B.length;P++){
var G=B[P];
if((G.type()==v.ScriptBreakPointType.ScriptName||
G.type()==v.ScriptBreakPointType.ScriptRegExp)&&
G.matchesScript(S)){
G.set(S);
}
}
}
function GetScriptBreakPoints(S){
var Y=[];
for(var P=0;P<B.length;P++){
if(B[P].matchesScript(S)){
Y.push(B[P]);
}
}
return Y;
}
v.setListener=function(Z,aa){
if(!(%_IsFunction(Z))&&!(Z===(void 0))&&!(Z===null)){
throw MakeTypeError(26);
}
%SetDebugEventListener(Z,aa);
};
v.breakLocations=function(ab,ac){
if(!(%_IsFunction(ab)))throw MakeTypeError(26);
var ad=(ac===(void 0))
?v.BreakPositionAlignment.Statement:ac;
return %GetBreakLocations(ab,ad);
};
v.findScript=function(ae){
if((%_IsFunction(ae))){
return %FunctionGetScript(ae);
}else if((%_IsRegExp(ae))){
var af=v.scripts();
var ag=null;
var ah=0;
for(var P in af){
var S=af[P];
if(ae.test(S.name)){
ag=S;
ah++;
}
}
if(ah==1){
return ag;
}else{
return(void 0);
}
}else{
return %GetScript(ae);
}
};
v.scriptSource=function(ae){
return this.findScript(ae).source;
};
v.source=function(ab){
if(!(%_IsFunction(ab)))throw MakeTypeError(26);
return %FunctionGetSourceCode(ab);
};
v.sourcePosition=function(ab){
if(!(%_IsFunction(ab)))throw MakeTypeError(26);
return %FunctionGetScriptSourcePosition(ab);
};
v.findFunctionSourceLocation=function(ai,aj,ak){
var S=%FunctionGetScript(ai);
var al=%FunctionGetScriptSourcePosition(ai);
return S.locationFromLine(aj,ak,al);
};
v.findScriptSourcePosition=function(S,aj,ak){
var am=S.locationFromLine(aj,ak);
return am?am.position:null;
};
v.findBreakPoint=function(an,ao){
var G;
for(var P=0;P<A.length;P++){
if(A[P].number()==an){
G=A[P];
if(ao){
A.splice(P,1);
}
break;
}
}
if(G){
return G;
}else{
return this.findScriptBreakPoint(an,ao);
}
};
v.findBreakPointActualLocations=function(an){
for(var P=0;P<B.length;P++){
if(B[P].number()==an){
return B[P].actual_locations();
}
}
for(var P=0;P<A.length;P++){
if(A[P].number()==an){
return[A[P].actual_location];
}
}
return[];
};
v.setBreakPoint=function(ai,aj,ak,ap){
if(!(%_IsFunction(ai)))throw MakeTypeError(26);
if(%FunctionIsAPIFunction(ai)){
throw MakeError(2,'Cannot set break point in native code.');
}
var aq=
this.findFunctionSourceLocation(ai,aj,ak).position;
var E=aq-this.sourcePosition(ai);
var S=%FunctionGetScript(ai);
if(S.type==v.ScriptType.Native){
throw MakeError(2,'Cannot set break point in native code.');
}
if(S&&S.id){
E+=%FunctionGetScriptSourcePosition(ai);
var am=S.locationFromPosition(E,false);
return this.setScriptBreakPointById(S.id,
am.line,am.column,
ap);
}else{
var G=MakeBreakPoint(E);
var V=
%SetFunctionBreakPoint(ai,E,G);
V+=this.sourcePosition(ai);
var W=S.locationFromPosition(V,true);
G.actual_location={line:W.line,
column:W.column,
script_id:S.id};
G.setCondition(ap);
return G.number();
}
};
v.setBreakPointByScriptIdAndPosition=function(script_id,U,
H,enabled,
opt_position_alignment)
{
var G=MakeBreakPoint(U);
G.setCondition(H);
if(!enabled){
G.disable();
}
var af=this.scripts();
var ar=(opt_position_alignment===(void 0))
?v.BreakPositionAlignment.Statement:opt_position_alignment;
for(var P=0;P<af.length;P++){
if(script_id==af[P].id){
G.actual_position=%SetScriptBreakPoint(af[P],U,
ar,G);
break;
}
}
return G;
};
v.enableBreakPoint=function(an){
var G=this.findBreakPoint(an,false);
if(G){
G.enable();
}
};
v.disableBreakPoint=function(an){
var G=this.findBreakPoint(an,false);
if(G){
G.disable();
}
};
v.changeBreakPointCondition=function(an,H){
var G=this.findBreakPoint(an,false);
G.setCondition(H);
};
v.changeBreakPointIgnoreCount=function(an,I){
if(I<0)throw MakeError(2,'Invalid argument');
var G=this.findBreakPoint(an,false);
G.setIgnoreCount(I);
};
v.clearBreakPoint=function(an){
var G=this.findBreakPoint(an,true);
if(G){
return %ClearBreakPoint(G);
}else{
G=this.findScriptBreakPoint(an,true);
if(!G)throw MakeError(2,'Invalid breakpoint');
}
};
v.clearAllBreakPoints=function(){
for(var P=0;P<A.length;P++){
var G=A[P];
%ClearBreakPoint(G);
}
A=[];
};
v.disableAllBreakPoints=function(){
for(var P=1;P<z;P++){
v.disableBreakPoint(P);
}
%ChangeBreakOnException(v.ExceptionBreak.Caught,false);
%ChangeBreakOnException(v.ExceptionBreak.Uncaught,false);
};
v.findScriptBreakPoint=function(an,ao){
var as;
for(var P=0;P<B.length;P++){
if(B[P].number()==an){
as=B[P];
if(ao){
as.clear();
B.splice(P,1);
}
break;
}
}
return as;
};
v.setScriptBreakPoint=function(x,script_id_or_name,
aj,ak,ap,
opt_groupId,opt_position_alignment){
var as=
new ScriptBreakPoint(x,script_id_or_name,aj,ak,
opt_groupId,opt_position_alignment);
as.number_=z++;
as.setCondition(ap);
B.push(as);
var af=this.scripts();
for(var P=0;P<af.length;P++){
if(as.matchesScript(af[P])){
as.set(af[P]);
}
}
return as.number();
};
v.setScriptBreakPointById=function(script_id,
aj,ak,
ap,opt_groupId,
opt_position_alignment){
return this.setScriptBreakPoint(v.ScriptBreakPointType.ScriptId,
script_id,aj,ak,
ap,opt_groupId,
opt_position_alignment);
};
v.setScriptBreakPointByName=function(script_name,
aj,ak,
ap,opt_groupId){
return this.setScriptBreakPoint(v.ScriptBreakPointType.ScriptName,
script_name,aj,ak,
ap,opt_groupId);
};
v.setScriptBreakPointByRegExp=function(script_regexp,
aj,ak,
ap,opt_groupId){
return this.setScriptBreakPoint(v.ScriptBreakPointType.ScriptRegExp,
script_regexp,aj,ak,
ap,opt_groupId);
};
v.enableScriptBreakPoint=function(an){
var as=this.findScriptBreakPoint(an,false);
as.enable();
};
v.disableScriptBreakPoint=function(an){
var as=this.findScriptBreakPoint(an,false);
as.disable();
};
v.changeScriptBreakPointCondition=function(
an,H){
var as=this.findScriptBreakPoint(an,false);
as.setCondition(H);
};
v.changeScriptBreakPointIgnoreCount=function(
an,I){
if(I<0)throw MakeError(2,'Invalid argument');
var as=this.findScriptBreakPoint(an,false);
as.setIgnoreCount(I);
};
v.scriptBreakPoints=function(){
return B;
};
v.clearStepping=function(){
%ClearStepping();
};
v.setBreakOnException=function(){
return %ChangeBreakOnException(v.ExceptionBreak.Caught,true);
};
v.clearBreakOnException=function(){
return %ChangeBreakOnException(v.ExceptionBreak.Caught,false);
};
v.isBreakOnException=function(){
return!!%IsBreakOnException(v.ExceptionBreak.Caught);
};
v.setBreakOnUncaughtException=function(){
return %ChangeBreakOnException(v.ExceptionBreak.Uncaught,true);
};
v.clearBreakOnUncaughtException=function(){
return %ChangeBreakOnException(v.ExceptionBreak.Uncaught,false);
};
v.isBreakOnUncaughtException=function(){
return!!%IsBreakOnException(v.ExceptionBreak.Uncaught);
};
v.showBreakPoints=function(ab,at,au){
if(!(%_IsFunction(ab)))throw MakeError(26);
var av=at?this.scriptSource(ab):this.source(ab);
var aw=at?this.sourcePosition(ab):0;
var O=this.breakLocations(ab,au);
if(!O)return av;
O.sort(function(ax,ay){return ax-ay;});
var Y="";
var az=0;
var aA;
for(var P=0;P<O.length;P++){
aA=O[P]-aw;
Y+=av.slice(az,aA);
Y+="[B"+P+"]";
az=aA;
}
aA=av.length;
Y+=av.substring(az,aA);
return Y;
};
v.scripts=function(){
return %DebugGetLoadedScripts();
};
v.debuggerFlags=function(){
return C;
};
v.MakeMirror=j;
function MakeExecutionState(L){
return new ExecutionState(L);
}
function ExecutionState(L){
this.break_id=L;
this.selected_frame=0;
}
ExecutionState.prototype.prepareStep=function(opt_action,opt_count,
opt_callframe){
var aB=v.StepAction.StepIn;
if(!(opt_action===(void 0)))aB=q(opt_action);
var aC=opt_count?q(opt_count):1;
var aD=0;
if(!(opt_callframe===(void 0))){
aD=opt_callframe.details_.frameId();
}
return %PrepareStep(this.break_id,aB,aC,aD);
};
ExecutionState.prototype.evaluateGlobal=function(av,disable_break,
opt_additional_context){
return j(%DebugEvaluateGlobal(this.break_id,av,
p(disable_break),
opt_additional_context));
};
ExecutionState.prototype.frameCount=function(){
return %GetFrameCount(this.break_id);
};
ExecutionState.prototype.threadCount=function(){
return %GetThreadCount(this.break_id);
};
ExecutionState.prototype.frame=function(aE){
if(aE==null)aE=this.selected_frame;
if(aE<0||aE>=this.frameCount()){
throw MakeTypeError(25);
}
return new c(this.break_id,aE);
};
ExecutionState.prototype.setSelectedFrame=function(aF){
var P=q(aF);
if(P<0||P>=this.frameCount()){
throw MakeTypeError(25);
}
this.selected_frame=P;
};
ExecutionState.prototype.selectedFrame=function(){
return this.selected_frame;
};
ExecutionState.prototype.debugCommandProcessor=function(aG){
return new DebugCommandProcessor(this,aG);
};
function MakeBreakEvent(L,aH){
return new BreakEvent(L,aH);
}
function BreakEvent(L,aH){
this.frame_=new c(L,0);
this.break_points_hit_=aH;
}
BreakEvent.prototype.eventType=function(){
return v.DebugEvent.Break;
};
BreakEvent.prototype.func=function(){
return this.frame_.func();
};
BreakEvent.prototype.sourceLine=function(){
return this.frame_.sourceLine();
};
BreakEvent.prototype.sourceColumn=function(){
return this.frame_.sourceColumn();
};
BreakEvent.prototype.sourceLineText=function(){
return this.frame_.sourceLineText();
};
BreakEvent.prototype.breakPointsHit=function(){
return this.break_points_hit_;
};
BreakEvent.prototype.toJSONProtocol=function(){
var aI={seq:y++,
type:"event",
event:"break",
body:{invocationText:this.frame_.invocationText()}
};
var S=this.func().script();
if(S){
aI.body.sourceLine=this.sourceLine(),
aI.body.sourceColumn=this.sourceColumn(),
aI.body.sourceLineText=this.sourceLineText(),
aI.body.script=MakeScriptObject_(S,false);
}
if(this.breakPointsHit()){
aI.body.breakpoints=[];
for(var P=0;P<this.breakPointsHit().length;P++){
var aJ=this.breakPointsHit()[P];
var as=aJ.script_break_point();
var aK;
if(as){
aK=as.number();
}else{
aK=aJ.number();
}
aI.body.breakpoints.push(aK);
}
}
return h(ObjectToProtocolObject_(aI));
};
function MakeExceptionEvent(L,aL,aM,aN){
return new ExceptionEvent(L,aL,aM,aN);
}
function ExceptionEvent(L,aL,aM,aN){
this.exec_state_=new ExecutionState(L);
this.exception_=aL;
this.uncaught_=aM;
this.promise_=aN;
}
ExceptionEvent.prototype.eventType=function(){
return v.DebugEvent.Exception;
};
ExceptionEvent.prototype.exception=function(){
return this.exception_;
};
ExceptionEvent.prototype.uncaught=function(){
return this.uncaught_;
};
ExceptionEvent.prototype.promise=function(){
return this.promise_;
};
ExceptionEvent.prototype.func=function(){
return this.exec_state_.frame(0).func();
};
ExceptionEvent.prototype.sourceLine=function(){
return this.exec_state_.frame(0).sourceLine();
};
ExceptionEvent.prototype.sourceColumn=function(){
return this.exec_state_.frame(0).sourceColumn();
};
ExceptionEvent.prototype.sourceLineText=function(){
return this.exec_state_.frame(0).sourceLineText();
};
ExceptionEvent.prototype.toJSONProtocol=function(){
var aI=new ProtocolMessage();
aI.event="exception";
aI.body={uncaught:this.uncaught_,
exception:j(this.exception_)
};
if(this.exec_state_.frameCount()>0){
aI.body.sourceLine=this.sourceLine();
aI.body.sourceColumn=this.sourceColumn();
aI.body.sourceLineText=this.sourceLineText();
var S=this.func().script();
if(S){
aI.body.script=MakeScriptObject_(S,false);
}
}else{
aI.body.sourceLine=-1;
}
return aI.toJSONProtocol();
};
function MakeCompileEvent(S,x){
return new CompileEvent(S,x);
}
function CompileEvent(S,x){
this.script_=j(S);
this.type_=x;
}
CompileEvent.prototype.eventType=function(){
return this.type_;
};
CompileEvent.prototype.script=function(){
return this.script_;
};
CompileEvent.prototype.toJSONProtocol=function(){
var aI=new ProtocolMessage();
aI.running=true;
switch(this.type_){
case v.DebugEvent.BeforeCompile:
aI.event="beforeCompile";
break;
case v.DebugEvent.AfterCompile:
aI.event="afterCompile";
break;
case v.DebugEvent.CompileError:
aI.event="compileError";
break;
}
aI.body={};
aI.body.script=this.script_;
return aI.toJSONProtocol();
};
function MakeScriptObject_(S,aO){
var aI={id:S.id(),
name:S.name(),
lineOffset:S.lineOffset(),
columnOffset:S.columnOffset(),
lineCount:S.lineCount(),
};
if(!(S.data()===(void 0))){
aI.data=S.data();
}
if(aO){
aI.source=S.source();
}
return aI;
}
function MakePromiseEvent(aP){
return new PromiseEvent(aP);
}
function PromiseEvent(aP){
this.promise_=aP.promise;
this.parentPromise_=aP.parentPromise;
this.status_=aP.status;
this.value_=aP.value;
}
PromiseEvent.prototype.promise=function(){
return j(this.promise_);
}
PromiseEvent.prototype.parentPromise=function(){
return j(this.parentPromise_);
}
PromiseEvent.prototype.status=function(){
return this.status_;
}
PromiseEvent.prototype.value=function(){
return j(this.value_);
}
function MakeAsyncTaskEvent(aP){
return new AsyncTaskEvent(aP);
}
function AsyncTaskEvent(aP){
this.type_=aP.type;
this.name_=aP.name;
this.id_=aP.id;
}
AsyncTaskEvent.prototype.type=function(){
return this.type_;
}
AsyncTaskEvent.prototype.name=function(){
return this.name_;
}
AsyncTaskEvent.prototype.id=function(){
return this.id_;
}
function DebugCommandProcessor(J,aG){
this.exec_state_=J;
this.running_=aG||false;
}
DebugCommandProcessor.prototype.processDebugRequest=function(aQ){
return this.processDebugJSONRequest(aQ);
};
function ProtocolMessage(aQ){
this.seq=y++;
if(aQ){
this.type='response';
this.request_seq=aQ.seq;
this.command=aQ.command;
}else{
this.type='event';
}
this.success=true;
this.running=(void 0);
}
ProtocolMessage.prototype.setOption=function(aR,D){
if(!this.options_){
this.options_={};
}
this.options_[aR]=D;
};
ProtocolMessage.prototype.failed=function(aS,aT){
this.success=false;
this.message=aS;
if((%_IsObject(aT))){
this.error_details=aT;
}
};
ProtocolMessage.prototype.toJSONProtocol=function(){
var aU={};
aU.seq=this.seq;
if(this.request_seq){
aU.request_seq=this.request_seq;
}
aU.type=this.type;
if(this.event){
aU.event=this.event;
}
if(this.command){
aU.command=this.command;
}
if(this.success){
aU.success=this.success;
}else{
aU.success=false;
}
if(this.body){
var aV;
var aW=k(true,this.options_);
if(this.body instanceof m){
aV=aW.serializeValue(this.body);
}else if(this.body instanceof d){
aV=[];
for(var P=0;P<this.body.length;P++){
if(this.body[P]instanceof m){
aV.push(aW.serializeValue(this.body[P]));
}else{
aV.push(ObjectToProtocolObject_(this.body[P],aW));
}
}
}else{
aV=ObjectToProtocolObject_(this.body,aW);
}
aU.body=aV;
aU.refs=aW.serializeReferencedObjects();
}
if(this.message){
aU.message=this.message;
}
if(this.error_details){
aU.error_details=this.error_details;
}
aU.running=this.running;
return h(aU);
};
DebugCommandProcessor.prototype.createResponse=function(aQ){
return new ProtocolMessage(aQ);
};
DebugCommandProcessor.prototype.processDebugJSONRequest=function(
json_request){
var aQ;
var aX;
try{
try{
aQ=g(json_request);
aX=this.createResponse(aQ);
if(!aQ.type){
throw MakeError(2,'Type not specified');
}
if(aQ.type!='request'){
throw MakeError(2,
"Illegal type '"+aQ.type+"' in request");
}
if(!aQ.command){
throw MakeError(2,'Command not specified');
}
if(aQ.arguments){
var aY=aQ.arguments;
if(aY.inlineRefs||aY.compactFormat){
aX.setOption('inlineRefs',true);
}
if(!(aY.maxStringLength===(void 0))){
aX.setOption('maxStringLength',aY.maxStringLength);
}
}
var aZ=aQ.command.toLowerCase();
var ba=DebugCommandProcessor.prototype.dispatch_[aZ];
if((%_IsFunction(ba))){
%_CallFunction(this,aQ,aX,ba);
}else{
throw MakeError(2,
'Unknown command "'+aQ.command+'" in request');
}
}catch(e){
if(!aX){
aX=this.createResponse();
}
aX.success=false;
aX.message=r(e);
}
try{
if(!(aX.running===(void 0))){
this.running_=aX.running;
}
aX.running=this.running_;
return aX.toJSONProtocol();
}catch(e){
return'{"seq":'+aX.seq+','+
'"request_seq":'+aQ.seq+','+
'"type":"response",'+
'"success":false,'+
'"message":"Internal error: '+r(e)+'"}';
}
}catch(e){
return'{"seq":0,"type":"response","success":false,"message":"Internal error"}';
}
};
DebugCommandProcessor.prototype.continueRequest_=function(aQ,aX){
if(aQ.arguments){
var aC=1;
var aB=v.StepAction.StepIn;
var bb=aQ.arguments.stepaction;
var bc=aQ.arguments.stepcount;
if(bc){
aC=q(bc);
if(aC<0){
throw MakeError(2,
'Invalid stepcount argument "'+bc+'".');
}
}
if(bb){
if(bb=='in'){
aB=v.StepAction.StepIn;
}else if(bb=='min'){
aB=v.StepAction.StepMin;
}else if(bb=='next'){
aB=v.StepAction.StepNext;
}else if(bb=='out'){
aB=v.StepAction.StepOut;
}else{
throw MakeError(2,
'Invalid stepaction argument "'+bb+'".');
}
}
this.exec_state_.prepareStep(aB,aC);
}
aX.running=true;
};
DebugCommandProcessor.prototype.breakRequest_=function(aQ,aX){
};
DebugCommandProcessor.prototype.setBreakPointRequest_=
function(aQ,aX){
if(!aQ.arguments){
aX.failed('Missing arguments');
return;
}
var x=aQ.arguments.type;
var bd=aQ.arguments.target;
var Q=aQ.arguments.line;
var R=aQ.arguments.column;
var be=(aQ.arguments.enabled===(void 0))?
true:aQ.arguments.enabled;
var H=aQ.arguments.condition;
var I=aQ.arguments.ignoreCount;
var bf=aQ.arguments.groupId;
if(!x||(bd===(void 0))){
aX.failed('Missing argument "type" or "target"');
return;
}
var an;
if(x=='function'){
if(!(typeof(bd)==='string')){
aX.failed('Argument "target" is not a string value');
return;
}
var ab;
try{
ab=this.exec_state_.evaluateGlobal(bd).value();
}catch(e){
aX.failed('Error: "'+r(e)+
'" evaluating "'+bd+'"');
return;
}
if(!(%_IsFunction(ab))){
aX.failed('"'+bd+'" does not evaluate to a function');
return;
}
an=v.setBreakPoint(ab,Q,R,H);
}else if(x=='handle'){
var bg=o(bd,10);
var K=i(bg);
if(!K){
return aX.failed('Object #'+bg+'# not found');
}
if(!K.isFunction()){
return aX.failed('Object #'+bg+'# is not a function');
}
an=v.setBreakPoint(K.value(),
Q,R,H);
}else if(x=='script'){
an=
v.setScriptBreakPointByName(bd,Q,R,H,
bf);
}else if(x=='scriptId'){
an=
v.setScriptBreakPointById(bd,Q,R,H,bf);
}else if(x=='scriptRegExp'){
an=
v.setScriptBreakPointByRegExp(bd,Q,R,H,
bf);
}else{
aX.failed('Illegal type "'+x+'"');
return;
}
var G=v.findBreakPoint(an);
if(I){
v.changeBreakPointIgnoreCount(an,I);
}
if(!be){
v.disableBreakPoint(an);
}
aX.body={type:x,
breakpoint:an};
if(G instanceof ScriptBreakPoint){
if(G.type()==v.ScriptBreakPointType.ScriptId){
aX.body.type='scriptId';
aX.body.script_id=G.script_id();
}else if(G.type()==v.ScriptBreakPointType.ScriptName){
aX.body.type='scriptName';
aX.body.script_name=G.script_name();
}else if(G.type()==v.ScriptBreakPointType.ScriptRegExp){
aX.body.type='scriptRegExp';
aX.body.script_regexp=G.script_regexp_object().source;
}else{
throw MakeError(2,
"Unexpected breakpoint type: "+G.type());
}
aX.body.line=G.line();
aX.body.column=G.column();
aX.body.actual_locations=G.actual_locations();
}else{
aX.body.type='function';
aX.body.actual_locations=[G.actual_location];
}
};
DebugCommandProcessor.prototype.changeBreakPointRequest_=function(
aQ,aX){
if(!aQ.arguments){
aX.failed('Missing arguments');
return;
}
var G=q(aQ.arguments.breakpoint);
var be=aQ.arguments.enabled;
var H=aQ.arguments.condition;
var I=aQ.arguments.ignoreCount;
if(!G){
aX.failed('Missing argument "breakpoint"');
return;
}
if(!(be===(void 0))){
if(be){
v.enableBreakPoint(G);
}else{
v.disableBreakPoint(G);
}
}
if(!(H===(void 0))){
v.changeBreakPointCondition(G,H);
}
if(!(I===(void 0))){
v.changeBreakPointIgnoreCount(G,I);
}
};
DebugCommandProcessor.prototype.clearBreakPointGroupRequest_=function(
aQ,aX){
if(!aQ.arguments){
aX.failed('Missing arguments');
return;
}
var bh=aQ.arguments.groupId;
if(!bh){
aX.failed('Missing argument "groupId"');
return;
}
var bi=[];
var bj=[];
for(var P=0;P<B.length;P++){
var bk=B[P];
if(bk.groupId()==bh){
bi.push(bk.number());
bk.clear();
}else{
bj.push(bk);
}
}
B=bj;
aX.body={breakpoints:bi};
};
DebugCommandProcessor.prototype.clearBreakPointRequest_=function(
aQ,aX){
if(!aQ.arguments){
aX.failed('Missing arguments');
return;
}
var G=q(aQ.arguments.breakpoint);
if(!G){
aX.failed('Missing argument "breakpoint"');
return;
}
v.clearBreakPoint(G);
aX.body={breakpoint:G};
};
DebugCommandProcessor.prototype.listBreakpointsRequest_=function(
aQ,aX){
var bl=[];
for(var P=0;P<B.length;P++){
var G=B[P];
var bm={
number:G.number(),
line:G.line(),
column:G.column(),
groupId:G.groupId(),
hit_count:G.hit_count(),
active:G.active(),
condition:G.condition(),
ignoreCount:G.ignoreCount(),
actual_locations:G.actual_locations()
};
if(G.type()==v.ScriptBreakPointType.ScriptId){
bm.type='scriptId';
bm.script_id=G.script_id();
}else if(G.type()==v.ScriptBreakPointType.ScriptName){
bm.type='scriptName';
bm.script_name=G.script_name();
}else if(G.type()==v.ScriptBreakPointType.ScriptRegExp){
bm.type='scriptRegExp';
bm.script_regexp=G.script_regexp_object().source;
}else{
throw MakeError(2,
"Unexpected breakpoint type: "+G.type());
}
bl.push(bm);
}
aX.body={
breakpoints:bl,
breakOnExceptions:v.isBreakOnException(),
breakOnUncaughtExceptions:v.isBreakOnUncaughtException()
};
};
DebugCommandProcessor.prototype.disconnectRequest_=
function(aQ,aX){
v.disableAllBreakPoints();
this.continueRequest_(aQ,aX);
};
DebugCommandProcessor.prototype.setExceptionBreakRequest_=
function(aQ,aX){
if(!aQ.arguments){
aX.failed('Missing arguments');
return;
}
var x=aQ.arguments.type;
if(!x){
aX.failed('Missing argument "type"');
return;
}
var be;
if(x=='all'){
be=!v.isBreakOnException();
}else if(x=='uncaught'){
be=!v.isBreakOnUncaughtException();
}
if(!(aQ.arguments.enabled===(void 0))){
be=aQ.arguments.enabled;
if((be!=true)&&(be!=false)){
aX.failed('Illegal value for "enabled":"'+be+'"');
}
}
if(x=='all'){
%ChangeBreakOnException(v.ExceptionBreak.Caught,be);
}else if(x=='uncaught'){
%ChangeBreakOnException(v.ExceptionBreak.Uncaught,be);
}else{
aX.failed('Unknown "type":"'+x+'"');
}
aX.body={'type':x,'enabled':be};
};
DebugCommandProcessor.prototype.backtraceRequest_=function(
aQ,aX){
var bn=this.exec_state_.frameCount();
if(bn==0){
aX.body={
totalFrames:bn
};
return;
}
var bo=0;
var bp=u;
if(aQ.arguments){
if(aQ.arguments.fromFrame){
bo=aQ.arguments.fromFrame;
}
if(aQ.arguments.toFrame){
bp=aQ.arguments.toFrame;
}
if(aQ.arguments.bottom){
var bq=bn-bo;
bo=bn-bp;
bp=bq;
}
if(bo<0||bp<0){
return aX.failed('Invalid frame number');
}
}
bp=l(bn,bp);
if(bp<=bo){
var br='Invalid frame range';
return aX.failed(br);
}
var bs=[];
for(var P=bo;P<bp;P++){
bs.push(this.exec_state_.frame(P));
}
aX.body={
fromFrame:bo,
toFrame:bp,
totalFrames:bn,
frames:bs
};
};
DebugCommandProcessor.prototype.frameRequest_=function(aQ,aX){
if(this.exec_state_.frameCount()==0){
return aX.failed('No frames');
}
if(aQ.arguments){
var aF=aQ.arguments.number;
if(aF<0||this.exec_state_.frameCount()<=aF){
return aX.failed('Invalid frame number');
}
this.exec_state_.setSelectedFrame(aQ.arguments.number);
}
aX.body=this.exec_state_.frame();
};
DebugCommandProcessor.prototype.resolveFrameFromScopeDescription_=
function(bt){
if(bt&&!(bt.frameNumber===(void 0))){
var bu=bt.frameNumber;
if(bu<0||this.exec_state_.frameCount()<=bu){
throw MakeTypeError(25);
}
return this.exec_state_.frame(bu);
}else{
return this.exec_state_.frame();
}
};
DebugCommandProcessor.prototype.resolveScopeHolder_=
function(bt){
if(bt&&"functionHandle"in bt){
if(!(typeof(bt.functionHandle)==='number')){
throw MakeError(2,'Function handle must be a number');
}
var bv=i(bt.functionHandle);
if(!bv){
throw MakeError(2,'Failed to find function object by handle');
}
if(!bv.isFunction()){
throw MakeError(2,
'Value of non-function type is found by handle');
}
return bv;
}else{
if(this.exec_state_.frameCount()==0){
throw MakeError(2,'No scopes');
}
var bw=this.resolveFrameFromScopeDescription_(bt);
return bw;
}
}
DebugCommandProcessor.prototype.scopesRequest_=function(aQ,aX){
var bx=this.resolveScopeHolder_(aQ.arguments);
var by=bx.scopeCount();
var bz=[];
for(var P=0;P<by;P++){
bz.push(bx.scope(P));
}
aX.body={
fromScope:0,
toScope:by,
totalScopes:by,
scopes:bz
};
};
DebugCommandProcessor.prototype.scopeRequest_=function(aQ,aX){
var bx=this.resolveScopeHolder_(aQ.arguments);
var bA=0;
if(aQ.arguments&&!(aQ.arguments.number===(void 0))){
bA=q(aQ.arguments.number);
if(bA<0||bx.scopeCount()<=bA){
return aX.failed('Invalid scope number');
}
}
aX.body=bx.scope(bA);
};
DebugCommandProcessor.resolveValue_=function(bB){
if("handle"in bB){
var bC=i(bB.handle);
if(!bC){
throw MakeError(2,"Failed to resolve value by handle, ' #"+
bB.handle+"# not found");
}
return bC.value();
}else if("stringDescription"in bB){
if(bB.type==n.BOOLEAN_TYPE){
return p(bB.stringDescription);
}else if(bB.type==n.NUMBER_TYPE){
return q(bB.stringDescription);
}if(bB.type==n.STRING_TYPE){
return r(bB.stringDescription);
}else{
throw MakeError(2,"Unknown type");
}
}else if("value"in bB){
return bB.value;
}else if(bB.type==n.UNDEFINED_TYPE){
return(void 0);
}else if(bB.type==n.NULL_TYPE){
return null;
}else{
throw MakeError(2,"Failed to parse value description");
}
};
DebugCommandProcessor.prototype.setVariableValueRequest_=
function(aQ,aX){
if(!aQ.arguments){
aX.failed('Missing arguments');
return;
}
if((aQ.arguments.name===(void 0))){
aX.failed('Missing variable name');
}
var bD=aQ.arguments.name;
var bt=aQ.arguments.scope;
var bx=this.resolveScopeHolder_(bt);
if((bt.number===(void 0))){
aX.failed('Missing scope number');
}
var bA=q(bt.number);
var bE=bx.scope(bA);
var bF=
DebugCommandProcessor.resolveValue_(aQ.arguments.newValue);
bE.setVariableValue(bD,bF);
var bG=j(bF);
aX.body={
newValue:bG
};
};
DebugCommandProcessor.prototype.evaluateRequest_=function(aQ,aX){
if(!aQ.arguments){
return aX.failed('Missing arguments');
}
var bH=aQ.arguments.expression;
var bw=aQ.arguments.frame;
var a=aQ.arguments.global;
var bI=aQ.arguments.disable_break;
var bJ=aQ.arguments.additional_context;
try{
bH=r(bH);
}catch(e){
return aX.failed('Failed to convert expression argument to string');
}
if(!(bw===(void 0))&&a){
return aX.failed('Arguments "frame" and "global" are exclusive');
}
var bK;
if(bJ){
bK={};
for(var P=0;P<bJ.length;P++){
var bL=bJ[P];
if(!(typeof(bL.name)==='string')){
return aX.failed("Context element #"+P+
" doesn't contain name:string property");
}
var bM=DebugCommandProcessor.resolveValue_(bL);
bK[bL.name]=bM;
}
}
if(a){
aX.body=this.exec_state_.evaluateGlobal(
bH,p(bI),bK);
return;
}
if((bI===(void 0))){
bI=true;
}
if(this.exec_state_.frameCount()==0){
return aX.failed('No frames');
}
if(!(bw===(void 0))){
var bN=q(bw);
if(bN<0||bN>=this.exec_state_.frameCount()){
return aX.failed('Invalid frame "'+bw+'"');
}
aX.body=this.exec_state_.frame(bN).evaluate(
bH,p(bI),bK);
return;
}else{
aX.body=this.exec_state_.frame().evaluate(
bH,p(bI),bK);
return;
}
};
DebugCommandProcessor.prototype.lookupRequest_=function(aQ,aX){
if(!aQ.arguments){
return aX.failed('Missing arguments');
}
var bO=aQ.arguments.handles;
if((bO===(void 0))){
return aX.failed('Argument "handles" missing');
}
if(!(aQ.arguments.includeSource===(void 0))){
var bP=p(aQ.arguments.includeSource);
aX.setOption('includeSource',bP);
}
var bQ={};
for(var P=0;P<bO.length;P++){
var bg=bO[P];
var K=i(bg);
if(!K){
return aX.failed('Object #'+bg+'# not found');
}
bQ[bg]=K;
}
aX.body=bQ;
};
DebugCommandProcessor.prototype.referencesRequest_=
function(aQ,aX){
if(!aQ.arguments){
return aX.failed('Missing arguments');
}
var x=aQ.arguments.type;
var bg=aQ.arguments.handle;
if((x===(void 0))){
return aX.failed('Argument "type" missing');
}
if((bg===(void 0))){
return aX.failed('Argument "handle" missing');
}
if(x!='referencedBy'&&x!='constructedBy'){
return aX.failed('Invalid type "'+x+'"');
}
var K=i(bg);
if(K){
if(x=='referencedBy'){
aX.body=K.referencedBy();
}else{
aX.body=K.constructedBy();
}
}else{
return aX.failed('Object #'+bg+'# not found');
}
};
DebugCommandProcessor.prototype.sourceRequest_=function(aQ,aX){
if(this.exec_state_.frameCount()==0){
return aX.failed('No source');
}
var bR;
var bS;
var bw=this.exec_state_.frame();
if(aQ.arguments){
bR=aQ.arguments.fromLine;
bS=aQ.arguments.toLine;
if(!(aQ.arguments.frame===(void 0))){
var bN=q(aQ.arguments.frame);
if(bN<0||bN>=this.exec_state_.frameCount()){
return aX.failed('Invalid frame "'+bw+'"');
}
bw=this.exec_state_.frame(bN);
}
}
var S=bw.func().script();
if(!S){
return aX.failed('No source');
}
var bT=S.sourceSlice(bR,bS);
if(!bT){
return aX.failed('Invalid line interval');
}
aX.body={};
aX.body.source=bT.sourceText();
aX.body.fromLine=bT.from_line;
aX.body.toLine=bT.to_line;
aX.body.fromPosition=bT.from_position;
aX.body.toPosition=bT.to_position;
aX.body.totalLines=S.lineCount();
};
DebugCommandProcessor.prototype.scriptsRequest_=function(aQ,aX){
var bU=ScriptTypeFlag(v.ScriptType.Normal);
var bP=false;
var bV=null;
if(aQ.arguments){
if(!(aQ.arguments.types===(void 0))){
bU=q(aQ.arguments.types);
if(f(bU)||bU<0){
return aX.failed('Invalid types "'+
aQ.arguments.types+'"');
}
}
if(!(aQ.arguments.includeSource===(void 0))){
bP=p(aQ.arguments.includeSource);
aX.setOption('includeSource',bP);
}
if((%_IsArray(aQ.arguments.ids))){
bV={};
var bW=aQ.arguments.ids;
for(var P=0;P<bW.length;P++){
bV[bW[P]]=true;
}
}
var bX=null;
var bY=null;
if(!(aQ.arguments.filter===(void 0))){
var bZ=q(aQ.arguments.filter);
if(!f(bZ)){
bY=bZ;
}
bX=aQ.arguments.filter;
}
}
var af=%DebugGetLoadedScripts();
aX.body=[];
for(var P=0;P<af.length;P++){
if(bV&&!bV[af[P].id]){
continue;
}
if(bX||bY){
var S=af[P];
var ca=false;
if(bY&&!ca){
if(S.id&&S.id===bY){
ca=true;
}
}
if(bX&&!ca){
if(S.name&&S.name.indexOf(bX)>=0){
ca=true;
}
}
if(!ca)continue;
}
if(bU&ScriptTypeFlag(af[P].type)){
aX.body.push(j(af[P]));
}
}
};
DebugCommandProcessor.prototype.threadsRequest_=function(aQ,aX){
var cb=this.exec_state_.threadCount();
var cc=[];
for(var P=0;P<cb;P++){
var cd=%GetThreadDetails(this.exec_state_.break_id,P);
var ce={current:cd[0],
id:cd[1]
};
cc.push(ce);
}
aX.body={
totalThreads:cb,
threads:cc
};
};
DebugCommandProcessor.prototype.suspendRequest_=function(aQ,aX){
aX.running=false;
};
DebugCommandProcessor.prototype.versionRequest_=function(aQ,aX){
aX.body={
V8Version:%GetV8Version()
};
};
DebugCommandProcessor.prototype.changeLiveRequest_=function(
aQ,aX){
if(!aQ.arguments){
return aX.failed('Missing arguments');
}
var cf=aQ.arguments.script_id;
var cg=!!aQ.arguments.preview_only;
var af=%DebugGetLoadedScripts();
var ch=null;
for(var P=0;P<af.length;P++){
if(af[P].id==cf){
ch=af[P];
}
}
if(!ch){
aX.failed('Script not found');
return;
}
var ci=new d();
if(!(typeof(aQ.arguments.new_source)==='string')){
throw"new_source argument expected";
}
var cj=aQ.arguments.new_source;
var ck;
try{
ck=v.LiveEdit.SetScriptSource(ch,
cj,cg,ci);
}catch(e){
if(e instanceof v.LiveEdit.Failure&&"details"in e){
aX.failed(e.message,e.details);
return;
}
throw e;
}
aX.body={change_log:ci,result:ck};
if(!cg&&!this.running_&&ck.stack_modified){
aX.body.stepin_recommended=true;
}
};
DebugCommandProcessor.prototype.restartFrameRequest_=function(
aQ,aX){
if(!aQ.arguments){
return aX.failed('Missing arguments');
}
var bw=aQ.arguments.frame;
if(this.exec_state_.frameCount()==0){
return aX.failed('No frames');
}
var cl;
if(!(bw===(void 0))){
var bN=q(bw);
if(bN<0||bN>=this.exec_state_.frameCount()){
return aX.failed('Invalid frame "'+bw+'"');
}
cl=this.exec_state_.frame(bN);
}else{
cl=this.exec_state_.frame();
}
var ck=v.LiveEdit.RestartFrame(cl);
aX.body={result:ck};
};
DebugCommandProcessor.prototype.debuggerFlagsRequest_=function(aQ,
aX){
if(!aQ.arguments){
aX.failed('Missing arguments');
return;
}
var cm=aQ.arguments.flags;
aX.body={flags:[]};
if(!(cm===(void 0))){
for(var P=0;P<cm.length;P++){
var aR=cm[P].name;
var cn=C[aR];
if(!cn){
continue;
}
if('value'in cm[P]){
cn.setValue(cm[P].value);
}
aX.body.flags.push({name:aR,value:cn.getValue()});
}
}else{
for(var aR in C){
var D=C[aR].getValue();
aX.body.flags.push({name:aR,value:D});
}
}
};
DebugCommandProcessor.prototype.v8FlagsRequest_=function(aQ,aX){
var cm=aQ.arguments.flags;
if(!cm)cm='';
%SetFlags(cm);
};
DebugCommandProcessor.prototype.gcRequest_=function(aQ,aX){
var x=aQ.arguments.type;
if(!x)x='all';
var co=%GetHeapUsage();
%CollectGarbage(x);
var cp=%GetHeapUsage();
aX.body={"before":co,"after":cp};
};
DebugCommandProcessor.prototype.dispatch_=(function(){
var cq=DebugCommandProcessor.prototype;
return{
"continue":cq.continueRequest_,
"break":cq.breakRequest_,
"setbreakpoint":cq.setBreakPointRequest_,
"changebreakpoint":cq.changeBreakPointRequest_,
"clearbreakpoint":cq.clearBreakPointRequest_,
"clearbreakpointgroup":cq.clearBreakPointGroupRequest_,
"disconnect":cq.disconnectRequest_,
"setexceptionbreak":cq.setExceptionBreakRequest_,
"listbreakpoints":cq.listBreakpointsRequest_,
"backtrace":cq.backtraceRequest_,
"frame":cq.frameRequest_,
"scopes":cq.scopesRequest_,
"scope":cq.scopeRequest_,
"setvariablevalue":cq.setVariableValueRequest_,
"evaluate":cq.evaluateRequest_,
"lookup":cq.lookupRequest_,
"references":cq.referencesRequest_,
"source":cq.sourceRequest_,
"scripts":cq.scriptsRequest_,
"threads":cq.threadsRequest_,
"suspend":cq.suspendRequest_,
"version":cq.versionRequest_,
"changelive":cq.changeLiveRequest_,
"restartframe":cq.restartFrameRequest_,
"flags":cq.debuggerFlagsRequest_,
"v8flag":cq.v8FlagsRequest_,
"gc":cq.gcRequest_,
};
})();
DebugCommandProcessor.prototype.isRunning=function(){
return this.running_;
};
DebugCommandProcessor.prototype.systemBreak=function(cr,aY){
return %SystemBreak();
};
function ObjectToProtocolObject_(cs,ct){
var cu={};
for(var aZ in cs){
if(typeof aZ=='string'){
var cv=ValueToProtocolValue_(cs[aZ],
ct);
if(!(cv===(void 0))){
cu[aZ]=cv;
}
}
}
return cu;
}
function ArrayToProtocolArray_(bl,ct){
var aU=[];
for(var P=0;P<bl.length;P++){
aU.push(ValueToProtocolValue_(bl[P],ct));
}
return aU;
}
function ValueToProtocolValue_(D,ct){
var aU;
switch(typeof D){
case'object':
if(D instanceof m){
aU=ct.serializeValue(D);
}else if((%_IsArray(D))){
aU=ArrayToProtocolArray_(D,ct);
}else{
aU=ObjectToProtocolObject_(D,ct);
}
break;
case'boolean':
case'string':
case'number':
aU=D;
break;
default:
aU=null;
}
return aU;
}
b.InstallConstants(a,[
"Debug",v,
"DebugCommandProcessor",DebugCommandProcessor,
]);
b.InstallFunctions(b,2,[
"MakeExecutionState",MakeExecutionState,
"MakeExceptionEvent",MakeExceptionEvent,
"MakeBreakEvent",MakeBreakEvent,
"MakeCompileEvent",MakeCompileEvent,
"MakePromiseEvent",MakePromiseEvent,
"MakeAsyncTaskEvent",MakeAsyncTaskEvent,
"IsBreakPointTriggered",IsBreakPointTriggered,
"UpdateScriptBreakPoints",UpdateScriptBreakPoints,
]);
b.Export(function(cw){
cw.GetScriptBreakPoints=GetScriptBreakPoints;
});
})

 liveedit©õ
(function(a,b){
"use strict";
var c=a.Debug.findScriptSourcePosition;
var d;
var e=a.Array;
var f=a.Math.floor;
var g=a.SyntaxError;
b.Import(function(h){
d=h.GetScriptBreakPoints;
});
var i;
function ApplyPatchMultiChunk(script,diff_array,new_source,preview_only,
change_log){
var j=script.source;
var k=GatherCompileInfo(j,script);
var l=BuildCodeInfoTree(k);
var m=new PosTranslator(diff_array);
MarkChangedFunctions(l,m.GetChunks());
FindLiveSharedInfos(l,script);
var n;
try{
n=GatherCompileInfo(new_source,script);
}catch(e){
var o=
new Failure("Failed to compile new version of script: "+e);
if(e instanceof g){
var p={
type:"liveedit_compile_error",
syntaxErrorMessage:e.message
};
CopyErrorPositionToDetails(e,p);
o.details=p;
}
throw o;
}
var q=BuildCodeInfoTree(n);
FindCorrespondingFunctions(l,q);
var r=new e();
var s=new e();
var t=new e();
var u=new e();
function HarvestTodo(v){
function CollectDamaged(w){
s.push(w);
for(var x=0;x<w.children.length;x++){
CollectDamaged(w.children[x]);
}
}
function CollectNew(y){
for(var x=0;x<y.length;x++){
t.push(y[x]);
CollectNew(y[x].children);
}
}
if(v.status==i.DAMAGED){
CollectDamaged(v);
return;
}
if(v.status==i.UNCHANGED){
u.push(v);
}else if(v.status==i.SOURCE_CHANGED){
u.push(v);
}else if(v.status==i.CHANGED){
r.push(v);
CollectNew(v.unmatched_new_nodes);
}
for(var x=0;x<v.children.length;x++){
HarvestTodo(v.children[x]);
}
}
var z={
change_tree:DescribeChangeTree(l),
textual_diff:{
old_len:j.length,
new_len:new_source.length,
chunks:diff_array
},
updated:false
};
if(preview_only){
return z;
}
HarvestTodo(l);
var A=new e();
for(var x=0;x<r.length;x++){
var B=
r[x].live_shared_function_infos;
if(B){
for(var C=0;C<B.length;C++){
A.push(B[C]);
}
}
}
var D=
CheckStackActivations(A,change_log);
z.stack_modified=D!=0;
var E=TemporaryRemoveBreakPoints(script,change_log);
var F;
if(s.length==0){
%LiveEditReplaceScript(script,new_source,null);
F=(void 0);
}else{
var G=CreateNameForOldScript(script);
F=%LiveEditReplaceScript(script,new_source,
G);
var H=new e();
change_log.push({linked_to_old_script:H});
for(var x=0;x<s.length;x++){
LinkToOldScript(s[x],F,
H);
}
z.created_script_name=G;
}
for(var x=0;x<t.length;x++){
%LiveEditFunctionSetScript(
t[x].info.shared_function_info,script);
}
for(var x=0;x<r.length;x++){
PatchFunctionCode(r[x],change_log);
}
var I=new e();
change_log.push({position_patched:I});
for(var x=0;x<u.length;x++){
PatchPositions(u[x],diff_array,
I);
if(u[x].live_shared_function_infos){
u[x].live_shared_function_infos.
forEach(function(J){
%LiveEditFunctionSourceUpdated(J.raw_array);
});
}
}
E(m,F);
z.updated=true;
return z;
}
function GatherCompileInfo(K,L){
var M=%LiveEditGatherCompileInfo(L,K);
var N=new e();
var O=new e();
for(var x=0;x<M.length;x++){
var J=new FunctionCompileInfo(M[x]);
%LiveEditFunctionSetScript(J.shared_function_info,(void 0));
N.push(J);
O.push(x);
}
for(var x=0;x<N.length;x++){
var P=x;
for(var C=x+1;C<N.length;C++){
if(N[P].start_position>N[C].start_position){
P=C;
}
}
if(P!=x){
var Q=N[P];
var R=O[P];
N[P]=N[x];
O[P]=O[x];
N[x]=Q;
O[x]=R;
}
}
var S=0;
function ResetIndexes(T,U){
var V=-1;
while(S<N.length&&
N[S].outer_index==U){
var W=S;
N[W].outer_index=T;
if(V!=-1){
N[V].next_sibling_index=W;
}
V=W;
S++;
ResetIndexes(W,O[W]);
}
if(V!=-1){
N[V].next_sibling_index=-1;
}
}
ResetIndexes(-1,-1);
Assert(S==N.length);
return N;
}
function PatchFunctionCode(v,X){
var Y=v.corresponding_node.info;
if(v.live_shared_function_infos){
v.live_shared_function_infos.forEach(function(Z){
%LiveEditReplaceFunctionCode(Y.raw_array,
Z.raw_array);
for(var x=0;x<v.children.length;x++){
if(v.children[x].corresponding_node){
var aa=
v.children[x].corresponding_node.info.
shared_function_info;
if(v.children[x].live_shared_function_infos){
v.children[x].live_shared_function_infos.
forEach(function(ab){
%LiveEditReplaceRefToNestedFunction(
Z.info,
aa,
ab.info);
});
}
}
}
});
X.push({function_patched:Y.function_name});
}else{
X.push({function_patched:Y.function_name,
function_info_not_found:true});
}
}
function LinkToOldScript(ac,F,ad){
if(ac.live_shared_function_infos){
ac.live_shared_function_infos.
forEach(function(J){
%LiveEditFunctionSetScript(J.info,F);
});
ad.push({name:ac.info.function_name});
}else{
ad.push(
{name:ac.info.function_name,not_found:true});
}
}
function TemporaryRemoveBreakPoints(ae,X){
var af=d(ae);
var ag=[];
X.push({break_points_update:ag});
var ah=[];
for(var x=0;x<af.length;x++){
var ai=af[x];
ai.clear();
var aj=c(ae,
ai.line(),ai.column());
var ak={
position:aj,
line:ai.line(),
column:ai.column()
};
ah.push(ak);
}
return function(m,al){
for(var x=0;x<af.length;x++){
var ai=af[x];
if(al){
var am=ai.cloneForOtherScript(al);
am.set(al);
ag.push({
type:"copied_to_old",
id:ai.number(),
new_id:am.number(),
positions:ah[x]
});
}
var an=m.Translate(
ah[x].position,
PosTranslator.ShiftWithTopInsideChunkHandler);
var ao=
ae.locationFromPosition(an,false);
ai.update_positions(ao.line,ao.column);
var ap={
position:an,
line:ao.line,
column:ao.column
};
ai.set(ae);
ag.push({type:"position_changed",
id:ai.number(),
old_positions:ah[x],
new_positions:ap
});
}
};
}
function Assert(aq,ar){
if(!aq){
if(ar){
throw"Assert "+ar;
}else{
throw"Assert";
}
}
}
function DiffChunk(as,at,au,av){
this.pos1=as;
this.pos2=at;
this.len1=au;
this.len2=av;
}
function PosTranslator(aw){
var ax=new e();
var ay=0;
for(var x=0;x<aw.length;x+=3){
var az=aw[x];
var aA=az+ay;
var aB=aw[x+1];
var aC=aw[x+2];
ax.push(new DiffChunk(az,aA,aB-az,
aC-aA));
ay=aC-aB;
}
this.chunks=ax;
}
PosTranslator.prototype.GetChunks=function(){
return this.chunks;
};
PosTranslator.prototype.Translate=function(aD,aE){
var aF=this.chunks;
if(aF.length==0||aD<aF[0].pos1){
return aD;
}
var aG=0;
var aH=aF.length-1;
while(aG<aH){
var aI=f((aG+aH)/2);
if(aD<aF[aI+1].pos1){
aH=aI;
}else{
aG=aI+1;
}
}
var aJ=aF[aG];
if(aD>=aJ.pos1+aJ.len1){
return aD+aJ.pos2+aJ.len2-aJ.pos1-aJ.len1;
}
if(!aE){
aE=PosTranslator.DefaultInsideChunkHandler;
}
return aE(aD,aJ);
};
PosTranslator.DefaultInsideChunkHandler=function(aD,aK){
Assert(false,"Cannot translate position in changed area");
};
PosTranslator.ShiftWithTopInsideChunkHandler=
function(aD,aK){
return aD-aK.pos1+aK.pos2;
};
var i={
UNCHANGED:"unchanged",
SOURCE_CHANGED:"source changed",
CHANGED:"changed",
DAMAGED:"damaged"
};
function CodeInfoTreeNode(aL,aM,aN){
this.info=aL;
this.children=aM;
this.array_index=aN;
this.parent=(void 0);
this.status=i.UNCHANGED;
this.status_explanation=(void 0);
this.new_start_pos=(void 0);
this.new_end_pos=(void 0);
this.corresponding_node=(void 0);
this.unmatched_new_nodes=(void 0);
this.textual_corresponding_node=(void 0);
this.textually_unmatched_new_nodes=(void 0);
this.live_shared_function_infos=(void 0);
}
function BuildCodeInfoTree(aO){
var aP=0;
function BuildNode(){
var aQ=aP;
aP++;
var aR=new e();
while(aP<aO.length&&
aO[aP].outer_index==aQ){
aR.push(BuildNode());
}
var w=new CodeInfoTreeNode(aO[aQ],aR,
aQ);
for(var x=0;x<aR.length;x++){
aR[x].parent=w;
}
return w;
}
var aS=BuildNode();
Assert(aP==aO.length);
return aS;
}
function MarkChangedFunctions(aT,ax){
var aU=new function(){
var aV=0;
var aW=0;
this.current=function(){return ax[aV];};
this.next=function(){
var aJ=ax[aV];
aW=aJ.pos2+aJ.len2-(aJ.pos1+aJ.len1);
aV++;
};
this.done=function(){return aV>=ax.length;};
this.TranslatePos=function(aD){return aD+aW;};
};
function ProcessInternals(aX){
aX.new_start_pos=aU.TranslatePos(
aX.info.start_position);
var aY=0;
var aZ=false;
var ba=false;
while(!aU.done()&&
aU.current().pos1<aX.info.end_position){
if(aY<aX.children.length){
var bb=aX.children[aY];
if(bb.info.end_position<=aU.current().pos1){
ProcessUnchangedChild(bb);
aY++;
continue;
}else if(bb.info.start_position>=
aU.current().pos1+aU.current().len1){
aZ=true;
aU.next();
continue;
}else if(bb.info.start_position<=aU.current().pos1&&
bb.info.end_position>=aU.current().pos1+
aU.current().len1){
ProcessInternals(bb);
ba=ba||
(bb.status!=i.UNCHANGED);
aZ=aZ||
(bb.status==i.DAMAGED);
aY++;
continue;
}else{
aZ=true;
bb.status=i.DAMAGED;
bb.status_explanation=
"Text diff overlaps with function boundary";
aY++;
continue;
}
}else{
if(aU.current().pos1+aU.current().len1<=
aX.info.end_position){
aX.status=i.CHANGED;
aU.next();
continue;
}else{
aX.status=i.DAMAGED;
aX.status_explanation=
"Text diff overlaps with function boundary";
return;
}
}
Assert("Unreachable",false);
}
while(aY<aX.children.length){
var bb=aX.children[aY];
ProcessUnchangedChild(bb);
aY++;
}
if(aZ){
aX.status=i.CHANGED;
}else if(ba){
aX.status=i.SOURCE_CHANGED;
}
aX.new_end_pos=
aU.TranslatePos(aX.info.end_position);
}
function ProcessUnchangedChild(w){
w.new_start_pos=aU.TranslatePos(w.info.start_position);
w.new_end_pos=aU.TranslatePos(w.info.end_position);
}
ProcessInternals(aT);
}
function FindCorrespondingFunctions(bc,bd){
function ProcessNode(v,be){
var bf=
IsFunctionContextLocalsChanged(v.info,be.info);
if(bf){
v.status=i.CHANGED;
}
var bg=v.children;
var bh=be.children;
var bi=[];
var bj=[];
var bk=0;
var bl=0;
while(bk<bg.length){
if(bg[bk].status==i.DAMAGED){
bk++;
}else if(bl<bh.length){
if(bh[bl].info.start_position<
bg[bk].new_start_pos){
bi.push(bh[bl]);
bj.push(bh[bl]);
bl++;
}else if(bh[bl].info.start_position==
bg[bk].new_start_pos){
if(bh[bl].info.end_position==
bg[bk].new_end_pos){
bg[bk].corresponding_node=
bh[bl];
bg[bk].textual_corresponding_node=
bh[bl];
if(bf){
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"Enclosing function is now incompatible. "+
bf;
bg[bk].corresponding_node=(void 0);
}else if(bg[bk].status!=
i.UNCHANGED){
ProcessNode(bg[bk],
bh[bl]);
if(bg[bk].status==i.DAMAGED){
bi.push(
bg[bk].corresponding_node);
bg[bk].corresponding_node=(void 0);
v.status=i.CHANGED;
}
}
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bi.push(bh[bl]);
bj.push(bh[bl]);
}
bl++;
bk++;
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bk++;
}
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bk++;
}
}
while(bl<bh.length){
bi.push(bh[bl]);
bj.push(bh[bl]);
bl++;
}
if(v.status==i.CHANGED){
if(v.info.param_num!=be.info.param_num){
v.status=i.DAMAGED;
v.status_explanation="Changed parameter number: "+
v.info.param_num+" and "+be.info.param_num;
}
}
v.unmatched_new_nodes=bi;
v.textually_unmatched_new_nodes=
bj;
}
ProcessNode(bc,bd);
bc.corresponding_node=bd;
bc.textual_corresponding_node=bd;
Assert(bc.status!=i.DAMAGED,
"Script became damaged");
}
function FindLiveSharedInfos(bc,L){
var bm=%LiveEditFindSharedFunctionInfosForScript(L);
var bn=new e();
for(var x=0;x<bm.length;x++){
bn.push(new SharedInfoWrapper(bm[x]));
}
function FindFunctionInfos(N){
var bo=[];
for(var x=0;x<bn.length;x++){
var bp=bn[x];
if(bp.start_position==N.start_position&&
bp.end_position==N.end_position){
bo.push(bp);
}
}
if(bo.length>0){
return bo;
}
}
function TraverseTree(w){
w.live_shared_function_infos=FindFunctionInfos(w.info);
for(var x=0;x<w.children.length;x++){
TraverseTree(w.children[x]);
}
}
TraverseTree(bc);
}
function FunctionCompileInfo(bq){
this.function_name=bq[0];
this.start_position=bq[1];
this.end_position=bq[2];
this.param_num=bq[3];
this.code=bq[4];
this.code_scope_info=bq[5];
this.scope_info=bq[6];
this.outer_index=bq[7];
this.shared_function_info=bq[8];
this.next_sibling_index=null;
this.raw_array=bq;
}
function SharedInfoWrapper(bq){
this.function_name=bq[0];
this.start_position=bq[1];
this.end_position=bq[2];
this.info=bq[3];
this.raw_array=bq;
}
function PatchPositions(ac,aw,ad){
if(ac.live_shared_function_infos){
ac.live_shared_function_infos.forEach(function(J){
%LiveEditPatchFunctionPositions(J.raw_array,
aw);
});
ad.push({name:ac.info.function_name});
}else{
ad.push(
{name:ac.info.function_name,info_not_found:true});
}
}
function CreateNameForOldScript(L){
return L.name+" (old)";
}
function IsFunctionContextLocalsChanged(br,bs){
var bt=br.scope_info;
var bu=bs.scope_info;
var bv;
var bw;
if(bt){
bv=bt.toString();
}else{
bv="";
}
if(bu){
bw=bu.toString();
}else{
bw="";
}
if(bv!=bw){
return"Variable map changed: ["+bv+
"] => ["+bw+"]";
}
return;
}
var bx;
function CheckStackActivations(by,X){
var bz=new e();
for(var x=0;x<by.length;x++){
bz[x]=by[x].info;
}
var bA=%LiveEditCheckAndDropActivations(bz,true);
if(bA[bz.length]){
throw new Failure(bA[bz.length]);
}
var bB=new e();
var bC=new e();
for(var x=0;x<bz.length;x++){
var bD=by[x];
if(bA[x]==bx.REPLACED_ON_ACTIVE_STACK){
bC.push({name:bD.function_name});
}else if(bA[x]!=bx.AVAILABLE_FOR_PATCH){
var bE={
name:bD.function_name,
start_pos:bD.start_position,
end_pos:bD.end_position,
replace_problem:
bx.SymbolName(bA[x])
};
bB.push(bE);
}
}
if(bC.length>0){
X.push({dropped_from_stack:bC});
}
if(bB.length>0){
X.push({functions_on_stack:bB});
throw new Failure("Blocked by functions on stack");
}
return bC.length;
}
var bx={
AVAILABLE_FOR_PATCH:1,
BLOCKED_ON_ACTIVE_STACK:2,
BLOCKED_ON_OTHER_STACK:3,
BLOCKED_UNDER_NATIVE_CODE:4,
REPLACED_ON_ACTIVE_STACK:5,
BLOCKED_UNDER_GENERATOR:6,
BLOCKED_ACTIVE_GENERATOR:7
};
bx.SymbolName=function(bF){
var bG=bx;
for(var bH in bG){
if(bG[bH]==bF){
return bH;
}
}
};
function Failure(ar){
this.message=ar;
}
Failure.prototype.toString=function(){
return"LiveEdit Failure: "+this.message;
};
function CopyErrorPositionToDetails(bI,p){
function createPositionStruct(L,bJ){
if(bJ==-1)return;
var bK=L.locationFromPosition(bJ,true);
if(bK==null)return;
return{
line:bK.line+1,
column:bK.column+1,
position:bJ
};
}
if(!("scriptObject"in bI)||!("startPosition"in bI)){
return;
}
var L=bI.scriptObject;
var bL={
start:createPositionStruct(L,bI.startPosition),
end:createPositionStruct(L,bI.endPosition)
};
p.position=bL;
}
function GetPcFromSourcePos(bM,bN){
return %GetFunctionCodePositionFromSource(bM,bN);
}
function SetScriptSource(L,bO,bP,X){
var j=L.source;
var bQ=CompareStrings(j,bO);
return ApplyPatchMultiChunk(L,bQ,bO,bP,
X);
}
function CompareStrings(bR,bS){
return %LiveEditCompareStrings(bR,bS);
}
function ApplySingleChunkPatch(L,change_pos,change_len,new_str,
X){
var j=L.source;
var bO=j.substring(0,change_pos)+
new_str+j.substring(change_pos+change_len);
return ApplyPatchMultiChunk(L,
[change_pos,change_pos+change_len,change_pos+new_str.length],
bO,false,X);
}
function DescribeChangeTree(bc){
function ProcessOldNode(w){
var bT=[];
for(var x=0;x<w.children.length;x++){
var bb=w.children[x];
if(bb.status!=i.UNCHANGED){
bT.push(ProcessOldNode(bb));
}
}
var bU=[];
if(w.textually_unmatched_new_nodes){
for(var x=0;x<w.textually_unmatched_new_nodes.length;x++){
var bb=w.textually_unmatched_new_nodes[x];
bU.push(ProcessNewNode(bb));
}
}
var bV={
name:w.info.function_name,
positions:DescribePositions(w),
status:w.status,
children:bT,
new_children:bU
};
if(w.status_explanation){
bV.status_explanation=w.status_explanation;
}
if(w.textual_corresponding_node){
bV.new_positions=DescribePositions(w.textual_corresponding_node);
}
return bV;
}
function ProcessNewNode(w){
var bT=[];
if(false){
for(var x=0;x<w.children.length;x++){
bT.push(ProcessNewNode(w.children[x]));
}
}
var bV={
name:w.info.function_name,
positions:DescribePositions(w),
children:bT,
};
return bV;
}
function DescribePositions(w){
return{
start_position:w.info.start_position,
end_position:w.info.end_position
};
}
return ProcessOldNode(bc);
}
var bW={};
bW.SetScriptSource=SetScriptSource;
bW.ApplyPatchMultiChunk=ApplyPatchMultiChunk;
bW.Failure=Failure;
bW.GetPcFromSourcePos=GetPcFromSourcePos;
bW.TestApi={
PosTranslator:PosTranslator,
CompareStrings:CompareStrings,
ApplySingleChunkPatch:ApplySingleChunkPatch
};
a.Debug.LiveEdit=bW;
})

p prologueÉ>
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=(void 0);
var d=(void 0);
var e=(void 0);
var f={};
function Export(g){
g(f);
}
function ExportToRuntime(g){
g.next=e;
e=g;
}
function Import(g){
g.next=c;
c=g;
}
function ImportNow(g){
g(f);
}
function ImportFromExperimental(g){
g.next=d;
d=g;
}
function SetFunctionName(g,h,i){
if((typeof(h)==='symbol')){
h="["+%SymbolDescription(h)+"]";
}
if((i===(void 0))){
%FunctionSetName(g,h);
}else{
%FunctionSetName(g,i+" "+h);
}
}
function InstallConstants(j,k){
%CheckIsBootstrapping();
%OptimizeObjectForAddingMultipleProperties(j,k.length>>1);
var l=2|4|1;
for(var m=0;m<k.length;m+=2){
var h=k[m];
var n=k[m+1];
%AddNamedProperty(j,h,n,l);
}
%ToFastProperties(j);
}
function InstallFunctions(j,l,o){
%CheckIsBootstrapping();
%OptimizeObjectForAddingMultipleProperties(j,o.length>>1);
for(var m=0;m<o.length;m+=2){
var p=o[m];
var g=o[m+1];
SetFunctionName(g,p);
%FunctionRemovePrototype(g);
%AddNamedProperty(j,p,g,l);
%SetNativeFlag(g);
}
%ToFastProperties(j);
}
function InstallGetter(j,h,q,l){
%CheckIsBootstrapping();
if(typeof l=="undefined"){
l=2;
}
SetFunctionName(q,h,"get");
%FunctionRemovePrototype(q);
%DefineAccessorPropertyUnchecked(j,h,q,null,l);
%SetNativeFlag(q);
}
function InstallGetterSetter(j,h,q,r){
%CheckIsBootstrapping();
SetFunctionName(q,h,"get");
SetFunctionName(r,h,"set");
%FunctionRemovePrototype(q);
%FunctionRemovePrototype(r);
%DefineAccessorPropertyUnchecked(j,h,q,r,2);
%SetNativeFlag(q);
%SetNativeFlag(r);
}
function SetUpLockedPrototype(
constructor,fields,methods){
%CheckIsBootstrapping();
var s=constructor.prototype;
var t=(methods.length>>1)+(fields?fields.length:0);
if(t>=4){
%OptimizeObjectForAddingMultipleProperties(s,t);
}
if(fields){
for(var m=0;m<fields.length;m++){
%AddNamedProperty(s,fields[m],
(void 0),2|4);
}
}
for(var m=0;m<methods.length;m+=2){
var p=methods[m];
var g=methods[m+1];
%AddNamedProperty(s,p,g,2|4|1);
%SetNativeFlag(g);
}
%InternalSetPrototype(s,null);
%ToFastProperties(s);
}
var u=%ExportPrivateSymbols({});
function GetPrivateSymbol(h){
return u[h];
}
function PostNatives(b){
%CheckIsBootstrapping();
for(;!(c===(void 0));c=c.next){
c(f);
}
var v={};
for(;!(e===(void 0));
e=e.next){
e(v);
}
%ImportToRuntime(v);
var w=[
"ArrayToString",
"FunctionSourceString",
"GetIterator",
"GetMethod",
"InnerArrayEvery",
"InnerArrayFilter",
"InnerArrayForEach",
"InnerArrayIndexOf",
"InnerArrayJoin",
"InnerArrayLastIndexOf",
"InnerArrayMap",
"InnerArrayReduce",
"InnerArrayReduceRight",
"InnerArrayReverse",
"InnerArraySome",
"InnerArraySort",
"InnerArrayToLocaleString",
"IsNaN",
"MathMax",
"MathMin",
"ObjectIsFrozen",
"ObjectDefineProperty",
"OwnPropertyKeys",
"ToNameArray",
"ToBoolean",
"ToNumber",
"ToString",
];
var x={};
%OptimizeObjectForAddingMultipleProperties(
x,w.length);
for(var p of w){
x[p]=f[p];
}
%ToFastProperties(x);
f=x;
b.PostNatives=(void 0);
b.ImportFromExperimental=(void 0);
}
function PostExperimentals(b){
%CheckIsBootstrapping();
for(;!(c===(void 0));c=c.next){
c(f);
}
for(;!(d===(void 0));
d=d.next){
d(f);
}
var v={};
for(;!(e===(void 0));
e=e.next){
e(v);
}
%ImportExperimentalToRuntime(v);
f=(void 0);
u=(void 0);
b.PostExperimentals=(void 0);
b.PostDebug=(void 0);
b.Import=(void 0);
b.Export=(void 0);
}
function PostDebug(b){
for(;!(c===(void 0));c=c.next){
c(f);
}
f=(void 0);
u=(void 0);
b.PostDebug=(void 0);
b.PostExperimentals=(void 0);
b.Import=(void 0);
b.Export=(void 0);
}
%OptimizeObjectForAddingMultipleProperties(b,15);
b.Import=Import;
b.ImportNow=ImportNow;
b.Export=Export;
b.ExportToRuntime=ExportToRuntime;
b.ImportFromExperimental=ImportFromExperimental;
b.GetPrivateSymbol=GetPrivateSymbol;
b.SetFunctionName=SetFunctionName;
b.InstallConstants=InstallConstants;
b.InstallFunctions=InstallFunctions;
b.InstallGetter=InstallGetter;
b.InstallGetterSetter=InstallGetterSetter;
b.SetUpLockedPrototype=SetUpLockedPrototype;
b.PostNatives=PostNatives;
b.PostExperimentals=PostExperimentals;
b.PostDebug=PostDebug;
%ToFastProperties(b);
})

runtimeåæ
var $defaultNumber;
var $defaultString;
var $NaN;
var $nonNumberToNumber;
var $nonStringToString;
var $sameValue;
var $sameValueZero;
var $toInteger;
var $toLength;
var $toName;
var $toNumber;
var $toPositiveInteger;
var $toPrimitive;
var $toString;
(function(a,b){
%CheckIsBootstrapping();
var c=a.Array;
var d=a.Boolean;
var e=a.String;
var f=a.Number;
function EQUALS(g){
if((typeof(this)==='string')&&(typeof(g)==='string'))return %StringEquals(this,g);
var h=this;
while(true){
if((typeof(h)==='number')){
while(true){
if((typeof(g)==='number'))return %NumberEquals(h,g);
if((g==null))return 1;
if(!(%_IsSpecObject(g))){
if((typeof(g)==='symbol')||(%_IsSimdValue(g)))return 1;
return %NumberEquals(h,%$toNumber(g));
}
g=%$toPrimitive(g,0);
}
}else if((typeof(h)==='string')){
while(true){
if((typeof(g)==='string'))return %StringEquals(h,g);
if((typeof(g)==='number'))return %NumberEquals(%$toNumber(h),g);
if((typeof(g)==='boolean'))return %NumberEquals(%$toNumber(h),%$toNumber(g));
if((g==null))return 1;
if((typeof(g)==='symbol')||(%_IsSimdValue(g)))return 1;
g=%$toPrimitive(g,0);
}
}else if((typeof(h)==='symbol')){
if((typeof(g)==='symbol'))return %_ObjectEquals(h,g)?0:1;
return 1;
}else if((typeof(h)==='boolean')){
if((typeof(g)==='boolean'))return %_ObjectEquals(h,g)?0:1;
if((g==null))return 1;
if((typeof(g)==='number'))return %NumberEquals(%$toNumber(h),g);
if((typeof(g)==='string'))return %NumberEquals(%$toNumber(h),%$toNumber(g));
if((typeof(g)==='symbol')||(%_IsSimdValue(g)))return 1;
h=%$toNumber(h);
g=%$toPrimitive(g,0);
}else if((h==null)){
return(g==null)?0:1;
}else if((%_IsSimdValue(h))){
if(!(%_IsSimdValue(g)))return 1;
return %SimdEquals(h,g);
}else{
if((%_IsSpecObject(g)))return %_ObjectEquals(h,g)?0:1;
if((g==null))return 1;
if((typeof(g)==='boolean')){
g=%$toNumber(g);
}else if((typeof(g)==='symbol')||(%_IsSimdValue(g))){
return 1;
}
h=%$toPrimitive(h,0);
}
}
}
function COMPARE(h,i){
var j;
var k;
if((typeof(this)==='string')){
if((typeof(h)==='string'))return %_StringCompare(this,h);
if((h===(void 0)))return i;
j=this;
}else if((typeof(this)==='number')){
if((typeof(h)==='number'))return %NumberCompare(this,h,i);
if((h===(void 0)))return i;
j=this;
}else if((this===(void 0))){
if(!(h===(void 0))){
%$toPrimitive(h,1);
}
return i;
}else if((h===(void 0))){
%$toPrimitive(this,1);
return i;
}else{
j=%$toPrimitive(this,1);
}
k=%$toPrimitive(h,1);
if((typeof(j)==='string')&&(typeof(k)==='string')){
return %_StringCompare(j,k);
}else{
var l=%$toNumber(j);
var m=%$toNumber(k);
if((!%_IsSmi(%IS_VAR(l))&&!(l==l))||(!%_IsSmi(%IS_VAR(m))&&!(m==m)))return i;
return %NumberCompare(l,m,i);
}
}
function COMPARE_STRONG(h,i){
if((typeof(this)==='string')&&(typeof(h)==='string'))return %_StringCompare(this,h);
if((typeof(this)==='number')&&(typeof(h)==='number'))return %NumberCompare(this,h,i);
throw %MakeTypeError(110);
}
function ADD(h){
if((typeof(this)==='number')&&(typeof(h)==='number'))return %NumberAdd(this,h);
if((typeof(this)==='string')&&(typeof(h)==='string'))return %_StringAdd(this,h);
var n=%$toPrimitive(this,0);
var o=%$toPrimitive(h,0);
if((typeof(n)==='string')){
return %_StringAdd(n,%$toString(o));
}else if((typeof(o)==='string')){
return %_StringAdd(%$nonStringToString(n),o);
}else{
return %NumberAdd(%$toNumber(n),%$toNumber(o));
}
}
function ADD_STRONG(h){
if((typeof(this)==='number')&&(typeof(h)==='number'))return %NumberAdd(this,h);
if((typeof(this)==='string')&&(typeof(h)==='string'))return %_StringAdd(this,h);
throw %MakeTypeError(110);
}
function STRING_ADD_LEFT(g){
if(!(typeof(g)==='string')){
if((%_ClassOf(g)==='String')&&%_IsStringWrapperSafeForDefaultValueOf(g)){
g=%_ValueOf(g);
}else{
g=(typeof(g)==='number')
?%_NumberToString(g)
:%$toString(%$toPrimitive(g,0));
}
}
return %_StringAdd(this,g);
}
function STRING_ADD_RIGHT(g){
var h=this;
if(!(typeof(h)==='string')){
if((%_ClassOf(h)==='String')&&%_IsStringWrapperSafeForDefaultValueOf(h)){
h=%_ValueOf(h);
}else{
h=(typeof(h)==='number')
?%_NumberToString(h)
:%$toString(%$toPrimitive(h,0));
}
}
return %_StringAdd(h,g);
}
function SUB(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberSub(h,g);
}
function SUB_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberSub(this,g);
}
throw %MakeTypeError(110);
}
function MUL(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberMul(h,g);
}
function MUL_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberMul(this,g);
}
throw %MakeTypeError(110);
}
function DIV(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberDiv(h,g);
}
function DIV_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberDiv(this,g);
}
throw %MakeTypeError(110);
}
function MOD(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberMod(h,g);
}
function MOD_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberMod(this,g);
}
throw %MakeTypeError(110);
}
function BIT_OR(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberOr(h,g);
}
function BIT_OR_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberOr(this,g);
}
throw %MakeTypeError(110);
}
function BIT_AND(g){
var h;
if((typeof(this)==='number')){
h=this;
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
}else{
h=%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
if((!%_IsSmi(%IS_VAR(h))&&!(h==h)))return 0;
}
return %NumberAnd(h,g);
}
function BIT_AND_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberAnd(this,g);
}
throw %MakeTypeError(110);
}
function BIT_XOR(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberXor(h,g);
}
function BIT_XOR_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberXor(this,g);
}
throw %MakeTypeError(110);
}
function SHL(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberShl(h,g);
}
function SHL_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberShl(this,g);
}
throw %MakeTypeError(110);
}
function SAR(g){
var h;
if((typeof(this)==='number')){
h=this;
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
}else{
h=%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
if((!%_IsSmi(%IS_VAR(h))&&!(h==h)))return 0;
}
return %NumberSar(h,g);
}
function SAR_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberSar(this,g);
}
throw %MakeTypeError(110);
}
function SHR(g){
var h=(typeof(this)==='number')?this:%$nonNumberToNumber(this);
if(!(typeof(g)==='number'))g=%$nonNumberToNumber(g);
return %NumberShr(h,g);
}
function SHR_STRONG(g){
if((typeof(this)==='number')&&(typeof(g)==='number')){
return %NumberShr(this,g);
}
throw %MakeTypeError(110);
}
function IN(h){
if(!(%_IsSpecObject(h))){
throw %MakeTypeError(40,this,h);
}
if(%_IsNonNegativeSmi(this)){
if((%_IsArray(h))&&%_HasFastPackedElements(h)){
return this<h.length;
}
return %HasElement(h,this);
}
return %HasProperty(h,%$toName(this));
}
function CALL_NON_FUNCTION(){
var p=%GetFunctionDelegate(this);
if(!(%_IsFunction(p))){
var q=%RenderCallSite();
if(q=="")q=typeof this;
throw %MakeTypeError(13,q);
}
return %Apply(p,this,arguments,0,%_ArgumentsLength());
}
function CALL_NON_FUNCTION_AS_CONSTRUCTOR(){
var p=%GetConstructorDelegate(this);
if(!(%_IsFunction(p))){
var q=%RenderCallSite();
if(q=="")q=typeof this;
throw %MakeTypeError(13,q);
}
return %Apply(p,this,arguments,0,%_ArgumentsLength());
}
function CALL_FUNCTION_PROXY(){
var r=%_ArgumentsLength()-1;
var s=%_Arguments(r);
var t=%GetCallTrap(s);
return %Apply(t,this,arguments,0,r);
}
function CALL_FUNCTION_PROXY_AS_CONSTRUCTOR(){
var s=this;
var t=%GetConstructTrap(s);
return %Apply(t,this,arguments,0,%_ArgumentsLength());
}
function APPLY_PREPARE(u){
var v;
if((%_IsArray(u))){
v=u.length;
if(%_IsSmi(v)&&v>=0&&v<0x800000&&
(%_ClassOf(this)==='Function')){
return v;
}
}
v=(u==null)?0:(u.length>>>0);
if(v>0x800000)throw %MakeRangeError(149);
if(!(%_ClassOf(this)==='Function')){
throw %MakeTypeError(9,%$toString(this),typeof this);
}
if(u!=null&&!(%_IsSpecObject(u))){
throw %MakeTypeError(121,"Function.prototype.apply");
}
return v;
}
function REFLECT_APPLY_PREPARE(u){
var v;
if((%_IsArray(u))){
v=u.length;
if(%_IsSmi(v)&&v>=0&&v<0x800000&&
(%_ClassOf(this)==='Function')){
return v;
}
}
if(!(%_ClassOf(this)==='Function')){
throw %MakeTypeError(13,%$toString(this));
}
if(!(%_IsSpecObject(u))){
throw %MakeTypeError(121,"Reflect.apply");
}
v=%$toLength(u.length);
if(v>0x800000)throw %MakeRangeError(149);
return v;
}
function REFLECT_CONSTRUCT_PREPARE(
u,newTarget){
var v;
var w=(%_ClassOf(this)==='Function')&&%IsConstructor(this);
var x=(%_ClassOf(newTarget)==='Function')&&%IsConstructor(newTarget);
if((%_IsArray(u))){
v=u.length;
if(%_IsSmi(v)&&v>=0&&v<0x800000&&
w&&x){
return v;
}
}
if(!w){
if(!(%_ClassOf(this)==='Function')){
throw %MakeTypeError(13,%$toString(this));
}else{
throw %MakeTypeError(55,%$toString(this));
}
}
if(!x){
if(!(%_ClassOf(newTarget)==='Function')){
throw %MakeTypeError(13,%$toString(newTarget));
}else{
throw %MakeTypeError(55,%$toString(newTarget));
}
}
if(!(%_IsSpecObject(u))){
throw %MakeTypeError(121,"Reflect.construct");
}
v=%$toLength(u.length);
if(v>0x800000)throw %MakeRangeError(149);
return v;
}
function CONCAT_ITERABLE_TO_ARRAY(y){
return %$concatIterableToArray(this,y);
};
function STACK_OVERFLOW(v){
throw %MakeRangeError(149);
}
function TO_NUMBER(){
return %$toNumber(this);
}
function TO_STRING(){
return %$toString(this);
}
function TO_NAME(){
return %$toName(this);
}
function ToPrimitive(h,z){
if(!(%_IsSpecObject(h)))return h;
if(z==0)z=((%_IsDate(h)))?2:1;
return(z==1)?DefaultNumber(h):DefaultString(h);
}
function ToBoolean(h){
if((typeof(h)==='boolean'))return h;
if((typeof(h)==='string'))return h.length!=0;
if(h==null)return false;
if((typeof(h)==='number'))return!((h==0)||(!%_IsSmi(%IS_VAR(h))&&!(h==h)));
return true;
}
function ToNumber(h){
if((typeof(h)==='number'))return h;
if((typeof(h)==='string')){
return %_HasCachedArrayIndex(h)?%_GetCachedArrayIndex(h)
:%StringToNumber(h);
}
if((typeof(h)==='boolean'))return h?1:0;
if((h===(void 0)))return $NaN;
return((h===null))?0:ToNumber(DefaultNumber(h));
}
function NonNumberToNumber(h){
if((typeof(h)==='string')){
return %_HasCachedArrayIndex(h)?%_GetCachedArrayIndex(h)
:%StringToNumber(h);
}
if((typeof(h)==='boolean'))return h?1:0;
if((h===(void 0)))return $NaN;
return((h===null))?0:ToNumber(DefaultNumber(h));
}
function ToString(h){
if((typeof(h)==='string'))return h;
if((typeof(h)==='number'))return %_NumberToString(h);
if((typeof(h)==='boolean'))return h?'true':'false';
if((h===(void 0)))return'undefined';
return((h===null))?'null':ToString(DefaultString(h));
}
function NonStringToString(h){
if((typeof(h)==='number'))return %_NumberToString(h);
if((typeof(h)==='boolean'))return h?'true':'false';
if((h===(void 0)))return'undefined';
return((h===null))?'null':ToString(DefaultString(h));
}
function ToName(h){
return(typeof(h)==='symbol')?h:ToString(h);
}
function ToInteger(h){
if(%_IsSmi(h))return h;
return %NumberToInteger(ToNumber(h));
}
function ToLength(A){
A=ToInteger(A);
if(A<0)return 0;
return A<f.MAX_SAFE_INTEGER?A
:f.MAX_SAFE_INTEGER;
}
function SameValue(h,g){
if(typeof h!=typeof g)return false;
if((typeof(h)==='number')){
if((!%_IsSmi(%IS_VAR(h))&&!(h==h))&&(!%_IsSmi(%IS_VAR(g))&&!(g==g)))return true;
if(h===0&&g===0&&%_IsMinusZero(h)!=%_IsMinusZero(g)){
return false;
}
}
if((%_IsSimdValue(h)))return %SimdSameValue(h,g);
return h===g;
}
function SameValueZero(h,g){
if(typeof h!=typeof g)return false;
if((typeof(h)==='number')){
if((!%_IsSmi(%IS_VAR(h))&&!(h==h))&&(!%_IsSmi(%IS_VAR(g))&&!(g==g)))return true;
}
if((%_IsSimdValue(h)))return %SimdSameValueZero(h,g);
return h===g;
}
function ConcatIterableToArray(B,y){
var C=B.length;
for(var D of y){
%AddElement(B,C++,D);
}
return B;
}
function IsPrimitive(h){
return!(%_IsSpecObject(h));
}
function IsConcatSpreadable(E){
if(!(%_IsSpecObject(E)))return false;
var F=E[symbolIsConcatSpreadable];
if((F===(void 0)))return(%_IsArray(E));
return ToBoolean(F);
}
function DefaultNumber(h){
var G=h.valueOf;
if((%_ClassOf(G)==='Function')){
var H=%_CallFunction(h,G);
if((typeof(H)==='symbol'))throw MakeTypeError(114);
if((%_IsSimdValue(h)))throw MakeTypeError(116);
if(IsPrimitive(H))return H;
}
var I=h.toString;
if((%_ClassOf(I)==='Function')){
var J=%_CallFunction(h,I);
if(IsPrimitive(J))return J;
}
throw MakeTypeError(16);
}
function DefaultString(h){
if(!(%_ClassOf(h)==='Symbol')){
if((typeof(h)==='symbol'))throw MakeTypeError(115);
var I=h.toString;
if((%_ClassOf(I)==='Function')){
var J=%_CallFunction(h,I);
if(IsPrimitive(J))return J;
}
var G=h.valueOf;
if((%_ClassOf(G)==='Function')){
var H=%_CallFunction(h,G);
if(IsPrimitive(H))return H;
}
}
throw MakeTypeError(16);
}
function ToPositiveInteger(h,K){
var L=(%_IsSmi(%IS_VAR(h))?h:%NumberToIntegerMapMinusZero(ToNumber(h)));
if(L<0)throw MakeRangeError(K);
return L;
}
%FunctionSetPrototype(c,new c(0));
$concatIterableToArray=ConcatIterableToArray;
$defaultNumber=DefaultNumber;
$defaultString=DefaultString;
$NaN=%GetRootNaN();
$nonNumberToNumber=NonNumberToNumber;
$nonStringToString=NonStringToString;
$sameValue=SameValue;
$sameValueZero=SameValueZero;
$toInteger=ToInteger;
$toLength=ToLength;
$toName=ToName;
$toNumber=ToNumber;
$toPositiveInteger=ToPositiveInteger;
$toPrimitive=ToPrimitive;
$toString=ToString;
%InstallJSBuiltins({
EQUALS,
COMPARE,
COMPARE_STRONG,
ADD,
ADD_STRONG,
STRING_ADD_LEFT,
STRING_ADD_RIGHT,
SUB,
SUB_STRONG,
MUL,
MUL_STRONG,
DIV,
DIV_STRONG,
MOD,
MOD_STRONG,
BIT_OR,
BIT_OR_STRONG,
BIT_AND,
BIT_AND_STRONG,
BIT_XOR,
BIT_XOR_STRONG,
SHL,
SHL_STRONG,
SAR,
SAR_STRONG,
SHR,
SHR_STRONG,
IN,
CALL_NON_FUNCTION,
CALL_NON_FUNCTION_AS_CONSTRUCTOR,
CALL_FUNCTION_PROXY,
CALL_FUNCTION_PROXY_AS_CONSTRUCTOR,
CONCAT_ITERABLE_TO_ARRAY,
APPLY_PREPARE,
REFLECT_APPLY_PREPARE,
REFLECT_CONSTRUCT_PREPARE,
STACK_OVERFLOW,
TO_NUMBER,
TO_STRING,
TO_NAME,
});
b.ExportToRuntime(function(M){
M["to_integer_fun"]=ToInteger;
M["to_length_fun"]=ToLength;
M["to_number_fun"]=ToNumber;
M["to_string_fun"]=ToString;
});
b.Export(function(M){
M.ToBoolean=ToBoolean;
M.ToNumber=ToNumber;
M.ToString=ToString;
})
})

$v8nativesJÈ
(function(a,b){
%CheckIsBootstrapping();
var c=a.Array;
var d=a.Boolean;
var e=a.Function;
var f=a.Number;
var g=a.Object;
var h=b.InternalArray;
var i;
var j;
var k;
var l;
var m;
var n;
var o;
var p;
b.Import(function(q){
i=q.MathAbs;
m=q.StringIndexOf;
p=q.ToString;
});
b.ImportNow(function(q){
n=q.ToBoolean;
o=q.ToNumber;
});
b.ImportFromExperimental(function(q){
j=q.ProxyDelegateCallAndConstruct;
k=q.ProxyDerivedHasOwnTrap;
l=q.ProxyDerivedKeysTrap;
});
function GlobalIsNaN(r){
r=((typeof(%IS_VAR(r))==='number')?r:$nonNumberToNumber(r));
return(!%_IsSmi(%IS_VAR(r))&&!(r==r));
}
function GlobalIsFinite(r){
r=((typeof(%IS_VAR(r))==='number')?r:$nonNumberToNumber(r));
return(%_IsSmi(%IS_VAR(r))||((r==r)&&(r!=1/0)&&(r!=-1/0)));
}
function GlobalParseInt(s,t){
if((t===(void 0))||t===10||t===0){
if(%_IsSmi(s))return s;
if((typeof(s)==='number')&&
((0.01<s&&s<1e9)||
(-1e9<s&&s<-0.01))){
return s|0;
}
s=((typeof(%IS_VAR(s))==='string')?s:$nonStringToString(s));
t=t|0;
}else{
s=((typeof(%IS_VAR(s))==='string')?s:$nonStringToString(s));
t=(t|0);
if(!(t==0||(2<=t&&t<=36))){
return $NaN;
}
}
if(%_HasCachedArrayIndex(s)&&
(t==0||t==10)){
return %_GetCachedArrayIndex(s);
}
return %StringParseInt(s,t);
}
function GlobalParseFloat(s){
s=((typeof(%IS_VAR(s))==='string')?s:$nonStringToString(s));
if(%_HasCachedArrayIndex(s))return %_GetCachedArrayIndex(s);
return %StringParseFloat(s);
}
function GlobalEval(u){
if(!(typeof(u)==='string'))return u;
var v=%GlobalProxy(GlobalEval);
var w=%CompileString(u,false);
if(!(%_IsFunction(w)))return w;
return %_CallFunction(v,w);
}
var x=2|4|1;
b.InstallConstants(a,[
"NaN",$NaN,
"Infinity",(1/0),
"undefined",(void 0),
]);
b.InstallFunctions(a,2,[
"isNaN",GlobalIsNaN,
"isFinite",GlobalIsFinite,
"parseInt",GlobalParseInt,
"parseFloat",GlobalParseFloat,
"eval",GlobalEval
]);
function ObjectToString(){
if((this===(void 0)))return"[object Undefined]";
if((this===null))return"[object Null]";
var y=(%_ToObject(this));
var z=%_ClassOf(y);
var A;
if(harmony_tostring){
A=y[symbolToStringTag];
if(!(typeof(A)==='string')){
A=z;
}
}else{
A=z;
}
return`[object ${A}]`;
}
function ObjectToLocaleString(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Object.prototype.toLocaleString");
return this.toString();
}
function ObjectValueOf(){
return(%_ToObject(this));
}
function ObjectHasOwnProperty(B){
var C=$toName(B);
var D=(%_ToObject(this));
if(%_IsJSProxy(D)){
if((typeof(B)==='symbol'))return false;
var E=%GetHandler(D);
return CallTrap1(E,"hasOwn",k,C);
}
return %HasOwnProperty(D,C);
}
function ObjectIsPrototypeOf(F){
if(!(%_IsSpecObject(F)))return false;
var y=(%_ToObject(this));
return %_HasInPrototypeChain(F,y);
}
function ObjectPropertyIsEnumerable(F){
var G=$toName(F);
if(%_IsJSProxy(this)){
if((typeof(F)==='symbol'))return false;
var H=GetOwnPropertyJS(this,G);
return(H===(void 0))?false:H.isEnumerable();
}
return %IsPropertyEnumerable((%_ToObject(this)),G);
}
function ObjectDefineGetter(C,I){
var J=this;
if((J===null)||(J===(void 0))){
J=%GlobalProxy(ObjectDefineGetter);
}
if(!(%_ClassOf(I)==='Function')){
throw MakeTypeError(64);
}
var H=new PropertyDescriptor();
H.setGet(I);
H.setEnumerable(true);
H.setConfigurable(true);
DefineOwnProperty((%_ToObject(J)),$toName(C),H,false);
}
function ObjectLookupGetter(C){
var J=this;
if((J===null)||(J===(void 0))){
J=%GlobalProxy(ObjectLookupGetter);
}
return %LookupAccessor((%_ToObject(J)),$toName(C),0);
}
function ObjectDefineSetter(C,I){
var J=this;
if((J===null)||(J===(void 0))){
J=%GlobalProxy(ObjectDefineSetter);
}
if(!(%_ClassOf(I)==='Function')){
throw MakeTypeError(67);
}
var H=new PropertyDescriptor();
H.setSet(I);
H.setEnumerable(true);
H.setConfigurable(true);
DefineOwnProperty((%_ToObject(J)),$toName(C),H,false);
}
function ObjectLookupSetter(C){
var J=this;
if((J===null)||(J===(void 0))){
J=%GlobalProxy(ObjectLookupSetter);
}
return %LookupAccessor((%_ToObject(J)),$toName(C),1);
}
function ObjectKeys(K){
K=(%_ToObject(K));
if(%_IsJSProxy(K)){
var E=%GetHandler(K);
var L=CallTrap0(E,"keys",l);
return ToNameArray(L,"keys",false);
}
return %OwnKeys(K);
}
function IsAccessorDescriptor(H){
if((H===(void 0)))return false;
return H.hasGetter()||H.hasSetter();
}
function IsDataDescriptor(H){
if((H===(void 0)))return false;
return H.hasValue()||H.hasWritable();
}
function IsGenericDescriptor(H){
if((H===(void 0)))return false;
return!(IsAccessorDescriptor(H)||IsDataDescriptor(H));
}
function IsInconsistentDescriptor(H){
return IsAccessorDescriptor(H)&&IsDataDescriptor(H);
}
function FromPropertyDescriptor(H){
if((H===(void 0)))return H;
if(IsDataDescriptor(H)){
return{value:H.getValue(),
writable:H.isWritable(),
enumerable:H.isEnumerable(),
configurable:H.isConfigurable()};
}
return{get:H.getGet(),
set:H.getSet(),
enumerable:H.isEnumerable(),
configurable:H.isConfigurable()};
}
function FromGenericPropertyDescriptor(H){
if((H===(void 0)))return H;
var K=new g();
if(H.hasValue()){
%AddNamedProperty(K,"value",H.getValue(),0);
}
if(H.hasWritable()){
%AddNamedProperty(K,"writable",H.isWritable(),0);
}
if(H.hasGetter()){
%AddNamedProperty(K,"get",H.getGet(),0);
}
if(H.hasSetter()){
%AddNamedProperty(K,"set",H.getSet(),0);
}
if(H.hasEnumerable()){
%AddNamedProperty(K,"enumerable",H.isEnumerable(),0);
}
if(H.hasConfigurable()){
%AddNamedProperty(K,"configurable",H.isConfigurable(),0);
}
return K;
}
function ToPropertyDescriptor(K){
if(!(%_IsSpecObject(K)))throw MakeTypeError(80,K);
var H=new PropertyDescriptor();
if("enumerable"in K){
H.setEnumerable(n(K.enumerable));
}
if("configurable"in K){
H.setConfigurable(n(K.configurable));
}
if("value"in K){
H.setValue(K.value);
}
if("writable"in K){
H.setWritable(n(K.writable));
}
if("get"in K){
var M=K.get;
if(!(M===(void 0))&&!(%_ClassOf(M)==='Function')){
throw MakeTypeError(65,M);
}
H.setGet(M);
}
if("set"in K){
var N=K.set;
if(!(N===(void 0))&&!(%_ClassOf(N)==='Function')){
throw MakeTypeError(68,N);
}
H.setSet(N);
}
if(IsInconsistentDescriptor(H)){
throw MakeTypeError(118,K);
}
return H;
}
function ToCompletePropertyDescriptor(K){
var H=ToPropertyDescriptor(K);
if(IsGenericDescriptor(H)||IsDataDescriptor(H)){
if(!H.hasValue())H.setValue((void 0));
if(!H.hasWritable())H.setWritable(false);
}else{
if(!H.hasGetter())H.setGet((void 0));
if(!H.hasSetter())H.setSet((void 0));
}
if(!H.hasEnumerable())H.setEnumerable(false);
if(!H.hasConfigurable())H.setConfigurable(false);
return H;
}
function PropertyDescriptor(){
this.value_=(void 0);
this.hasValue_=false;
this.writable_=false;
this.hasWritable_=false;
this.enumerable_=false;
this.hasEnumerable_=false;
this.configurable_=false;
this.hasConfigurable_=false;
this.get_=(void 0);
this.hasGetter_=false;
this.set_=(void 0);
this.hasSetter_=false;
}
b.SetUpLockedPrototype(PropertyDescriptor,[
"value_",
"hasValue_",
"writable_",
"hasWritable_",
"enumerable_",
"hasEnumerable_",
"configurable_",
"hasConfigurable_",
"get_",
"hasGetter_",
"set_",
"hasSetter_"
],[
"toString",function PropertyDescriptor_ToString(){
return"[object PropertyDescriptor]";
},
"setValue",function PropertyDescriptor_SetValue(B){
this.value_=B;
this.hasValue_=true;
},
"getValue",function PropertyDescriptor_GetValue(){
return this.value_;
},
"hasValue",function PropertyDescriptor_HasValue(){
return this.hasValue_;
},
"setEnumerable",function PropertyDescriptor_SetEnumerable(O){
this.enumerable_=O;
this.hasEnumerable_=true;
},
"isEnumerable",function PropertyDescriptor_IsEnumerable(){
return this.enumerable_;
},
"hasEnumerable",function PropertyDescriptor_HasEnumerable(){
return this.hasEnumerable_;
},
"setWritable",function PropertyDescriptor_SetWritable(P){
this.writable_=P;
this.hasWritable_=true;
},
"isWritable",function PropertyDescriptor_IsWritable(){
return this.writable_;
},
"hasWritable",function PropertyDescriptor_HasWritable(){
return this.hasWritable_;
},
"setConfigurable",
function PropertyDescriptor_SetConfigurable(Q){
this.configurable_=Q;
this.hasConfigurable_=true;
},
"hasConfigurable",function PropertyDescriptor_HasConfigurable(){
return this.hasConfigurable_;
},
"isConfigurable",function PropertyDescriptor_IsConfigurable(){
return this.configurable_;
},
"setGet",function PropertyDescriptor_SetGetter(M){
this.get_=M;
this.hasGetter_=true;
},
"getGet",function PropertyDescriptor_GetGetter(){
return this.get_;
},
"hasGetter",function PropertyDescriptor_HasGetter(){
return this.hasGetter_;
},
"setSet",function PropertyDescriptor_SetSetter(N){
this.set_=N;
this.hasSetter_=true;
},
"getSet",function PropertyDescriptor_GetSetter(){
return this.set_;
},
"hasSetter",function PropertyDescriptor_HasSetter(){
return this.hasSetter_;
}
]);
function ConvertDescriptorArrayToDescriptor(R){
if((R===(void 0))){
return(void 0);
}
var H=new PropertyDescriptor();
if(R[0]){
H.setGet(R[2]);
H.setSet(R[3]);
}else{
H.setValue(R[1]);
H.setWritable(R[4]);
}
H.setEnumerable(R[5]);
H.setConfigurable(R[6]);
return H;
}
function GetTrap(E,C,S){
var T=E[C];
if((T===(void 0))){
if((S===(void 0))){
throw MakeTypeError(87,E,C);
}
T=S;
}else if(!(%_ClassOf(T)==='Function')){
throw MakeTypeError(88,E,C);
}
return T;
}
function CallTrap0(E,C,S){
return %_CallFunction(E,GetTrap(E,C,S));
}
function CallTrap1(E,C,S,u){
return %_CallFunction(E,u,GetTrap(E,C,S));
}
function CallTrap2(E,C,S,u,U){
return %_CallFunction(E,u,U,GetTrap(E,C,S));
}
function GetOwnPropertyJS(K,V){
var W=$toName(V);
if(%_IsJSProxy(K)){
if((typeof(V)==='symbol'))return(void 0);
var E=%GetHandler(K);
var X=CallTrap1(
E,"getOwnPropertyDescriptor",(void 0),W);
if((X===(void 0)))return X;
var H=ToCompletePropertyDescriptor(X);
if(!H.isConfigurable()){
throw MakeTypeError(91,
E,W,"getOwnPropertyDescriptor");
}
return H;
}
var Y=%GetOwnProperty((%_ToObject(K)),W);
return ConvertDescriptorArrayToDescriptor(Y);
}
function Delete(K,W,Z){
var H=GetOwnPropertyJS(K,W);
if((H===(void 0)))return true;
if(H.isConfigurable()){
%DeleteProperty_Sloppy(K,W);
return true;
}else if(Z){
throw MakeTypeError(27,W);
}else{
return;
}
}
function GetMethod(K,W){
var aa=K[W];
if((aa==null))return(void 0);
if((%_ClassOf(aa)==='Function'))return aa;
throw MakeTypeError(13,typeof aa);
}
function DefineProxyProperty(K,W,x,Z){
if((typeof(W)==='symbol'))return false;
var E=%GetHandler(K);
var ab=CallTrap2(E,"defineProperty",(void 0),W,x);
if(!n(ab)){
if(Z){
throw MakeTypeError(86,
E,"false","defineProperty");
}else{
return false;
}
}
return true;
}
function DefineObjectProperty(K,W,H,Z){
var ac=%GetOwnProperty(K,$toName(W));
var ad=ConvertDescriptorArrayToDescriptor(ac);
var ae=%IsExtensible(K);
if((ad===(void 0))&&!ae){
if(Z){
throw MakeTypeError(27,W);
}else{
return false;
}
}
if(!(ad===(void 0))){
if((IsGenericDescriptor(H)||
IsDataDescriptor(H)==IsDataDescriptor(ad))&&
(!H.hasEnumerable()||
$sameValue(H.isEnumerable(),ad.isEnumerable()))&&
(!H.hasConfigurable()||
$sameValue(H.isConfigurable(),ad.isConfigurable()))&&
(!H.hasWritable()||
$sameValue(H.isWritable(),ad.isWritable()))&&
(!H.hasValue()||
$sameValue(H.getValue(),ad.getValue()))&&
(!H.hasGetter()||
$sameValue(H.getGet(),ad.getGet()))&&
(!H.hasSetter()||
$sameValue(H.getSet(),ad.getSet()))){
return true;
}
if(!ad.isConfigurable()){
if(H.isConfigurable()||
(H.hasEnumerable()&&
H.isEnumerable()!=ad.isEnumerable())){
if(Z){
throw MakeTypeError(94,W);
}else{
return false;
}
}
if(!IsGenericDescriptor(H)){
if(IsDataDescriptor(ad)!=IsDataDescriptor(H)){
if(Z){
throw MakeTypeError(94,W);
}else{
return false;
}
}
if(IsDataDescriptor(ad)&&IsDataDescriptor(H)){
var af=ad.isWritable();
if(af!=H.isWritable()){
if(!af||(%IsStrong(K))){
if(Z){
throw af
?MakeTypeError(111,K,W)
:MakeTypeError(94,W);
}else{
return false;
}
}
}
if(!af&&H.hasValue()&&
!$sameValue(H.getValue(),ad.getValue())){
if(Z){
throw MakeTypeError(94,W);
}else{
return false;
}
}
}
if(IsAccessorDescriptor(H)&&IsAccessorDescriptor(ad)){
if(H.hasSetter()&&
!$sameValue(H.getSet(),ad.getSet())){
if(Z){
throw MakeTypeError(94,W);
}else{
return false;
}
}
if(H.hasGetter()&&!$sameValue(H.getGet(),ad.getGet())){
if(Z){
throw MakeTypeError(94,W);
}else{
return false;
}
}
}
}
}
}
var ag=0;
if(H.hasEnumerable()){
ag|=H.isEnumerable()?0:2;
}else if(!(ad===(void 0))){
ag|=ad.isEnumerable()?0:2;
}else{
ag|=2;
}
if(H.hasConfigurable()){
ag|=H.isConfigurable()?0:4;
}else if(!(ad===(void 0))){
ag|=ad.isConfigurable()?0:4;
}else
ag|=4;
if(IsDataDescriptor(H)||
(IsGenericDescriptor(H)&&
((ad===(void 0))||IsDataDescriptor(ad)))){
if(H.hasWritable()){
ag|=H.isWritable()?0:1;
}else if(!(ad===(void 0))){
ag|=ad.isWritable()?0:1;
}else{
ag|=1;
}
var B=(void 0);
if(H.hasValue()){
B=H.getValue();
}else if(!(ad===(void 0))&&IsDataDescriptor(ad)){
B=ad.getValue();
}
%DefineDataPropertyUnchecked(K,W,B,ag);
}else{
var ah=null;
if(H.hasGetter()){
ah=H.getGet();
}else if(IsAccessorDescriptor(ad)&&ad.hasGetter()){
ah=ad.getGet();
}
var ai=null;
if(H.hasSetter()){
ai=H.getSet();
}else if(IsAccessorDescriptor(ad)&&ad.hasSetter()){
ai=ad.getSet();
}
%DefineAccessorPropertyUnchecked(K,W,ah,ai,ag);
}
return true;
}
function DefineArrayProperty(K,W,H,Z){
if(!(typeof(W)==='symbol')){
var aj=(W>>>0);
var ak=false;
if(p(aj)==W&&aj!=4294967295){
var al=K.length;
if(aj>=al&&%IsObserved(K)){
ak=true;
$observeBeginPerformSplice(K);
}
var am=GetOwnPropertyJS(K,"length");
if((aj>=al&&!am.isWritable())||
!DefineObjectProperty(K,W,H,true)){
if(ak)
$observeEndPerformSplice(K);
if(Z){
throw MakeTypeError(27,W);
}else{
return false;
}
}
if(aj>=al){
K.length=aj+1;
}
if(ak){
$observeEndPerformSplice(K);
$observeEnqueueSpliceRecord(K,al,[],aj+1-al);
}
return true;
}
}
return DefineObjectProperty(K,W,H,Z);
}
function DefineOwnProperty(K,W,H,Z){
if(%_IsJSProxy(K)){
if((typeof(W)==='symbol'))return false;
var x=FromGenericPropertyDescriptor(H);
return DefineProxyProperty(K,W,x,Z);
}else if((%_IsArray(K))){
return DefineArrayProperty(K,W,H,Z);
}else{
return DefineObjectProperty(K,W,H,Z);
}
}
function DefineOwnPropertyFromAPI(K,W,B,H){
return DefineOwnProperty(K,W,ToPropertyDescriptor({
value:B,
writable:H[0],
enumerable:H[1],
configurable:H[2]
}),
false);
}
function ObjectGetPrototypeOf(K){
return %_GetPrototype((%_ToObject(K)));
}
function ObjectSetPrototypeOf(K,an){
if((%IS_VAR(K)===null)||(K===(void 0)))throw MakeTypeError(15,"Object.setPrototypeOf");
if(an!==null&&!(%_IsSpecObject(an))){
throw MakeTypeError(82,an);
}
if((%_IsSpecObject(K))){
%SetPrototype(K,an);
}
return K;
}
function ObjectGetOwnPropertyDescriptor(K,W){
var H=GetOwnPropertyJS((%_ToObject(K)),W);
return FromPropertyDescriptor(H);
}
function ToNameArray(K,T,ao){
if(!(%_IsSpecObject(K))){
throw MakeTypeError(89,T,K);
}
var ap=(K.length>>>0);
var aq=new c(ap);
var ar=0;
var L={__proto__:null};
for(var aj=0;aj<ap;aj++){
var as=$toName(K[aj]);
if((typeof(as)==='symbol')&&!ao)continue;
if(%HasOwnProperty(L,as)){
throw MakeTypeError(92,T,as);
}
aq[ar]=as;
++ar;
L[as]=0;
}
aq.length=ar;
return aq;
}
function ObjectGetOwnPropertyKeys(K,at){
var au=new h();
at|=32;
var av=%GetInterceptorInfo(K);
if((at&8)===0){
var aw=%GetOwnElementNames(K);
for(var ax=0;ax<aw.length;++ax){
aw[ax]=%_NumberToString(aw[ax]);
}
au.push(aw);
if((av&1)!=0){
var ay=%GetIndexedInterceptorElementNames(K);
if(!(ay===(void 0))){
au.push(ay);
}
}
}
au.push(%GetOwnPropertyNames(K,at));
if((av&2)!=0){
var az=
%GetNamedInterceptorPropertyNames(K);
if(!(az===(void 0))){
au.push(az);
}
}
var aA=
%Apply(h.prototype.concat,
au[0],au,1,au.length-1);
if(av!=0){
var aB={__proto__:null};
var aC=0;
for(var ax=0;ax<aA.length;++ax){
var C=aA[ax];
if((typeof(C)==='symbol')){
if((at&16)||(%SymbolIsPrivate(C))){
continue;
}
}else{
if(at&8)continue;
C=p(C);
}
if(aB[C])continue;
aB[C]=true;
aA[aC++]=C;
}
aA.length=aC;
}
return aA;
}
function OwnPropertyKeys(K){
if(%_IsJSProxy(K)){
var E=%GetHandler(K);
var L=CallTrap0(E,"ownKeys",(void 0));
return ToNameArray(L,"getOwnPropertyNames",false);
}
return ObjectGetOwnPropertyKeys(K,32);
}
function ObjectGetOwnPropertyNames(K){
K=(%_ToObject(K));
if(%_IsJSProxy(K)){
var E=%GetHandler(K);
var L=CallTrap0(E,"getOwnPropertyNames",(void 0));
return ToNameArray(L,"getOwnPropertyNames",false);
}
return ObjectGetOwnPropertyKeys(K,16);
}
function ObjectCreate(an,aD){
if(!(%_IsSpecObject(an))&&an!==null){
throw MakeTypeError(82,an);
}
var K={};
%InternalSetPrototype(K,an);
if(!(aD===(void 0)))ObjectDefineProperties(K,aD);
return K;
}
function ObjectDefineProperty(K,W,x){
if(!(%_IsSpecObject(K))){
throw MakeTypeError(14,"Object.defineProperty");
}
var C=$toName(W);
if(%_IsJSProxy(K)){
var aE={__proto__:null};
for(var aF in x){
aE[aF]=x[aF];
}
DefineProxyProperty(K,C,aE,true);
}else{
var H=ToPropertyDescriptor(x);
DefineOwnProperty(K,C,H,true);
}
return K;
}
function GetOwnEnumerablePropertyNames(D){
var L=new h();
for(var aG in D){
if(%HasOwnProperty(D,aG)){
L.push(aG);
}
}
var at=8|32;
var aH=%GetOwnPropertyNames(D,at);
for(var ax=0;ax<aH.length;++ax){
var aI=aH[ax];
if((typeof(aI)==='symbol')){
var H=ObjectGetOwnPropertyDescriptor(D,aI);
if(H.enumerable)L.push(aI);
}
}
return L;
}
function ObjectDefineProperties(K,aD){
if(!(%_IsSpecObject(K))){
throw MakeTypeError(14,"Object.defineProperties");
}
var Y=(%_ToObject(aD));
var L=GetOwnEnumerablePropertyNames(Y);
var aJ=new h();
for(var ax=0;ax<L.length;ax++){
aJ.push(ToPropertyDescriptor(Y[L[ax]]));
}
for(var ax=0;ax<L.length;ax++){
DefineOwnProperty(K,L[ax],aJ[ax],true);
}
return K;
}
function ProxyFix(K){
var E=%GetHandler(K);
var Y=CallTrap0(E,"fix",(void 0));
if((Y===(void 0))){
throw MakeTypeError(86,E,"undefined","fix");
}
if(%IsJSFunctionProxy(K)){
var aK=%GetCallTrap(K);
var aL=%GetConstructTrap(K);
var aM=j(aK,aL);
%Fix(K);
%SetCode(K,aM);
var aN=new g();
ObjectDefineProperty(aN,"constructor",
{value:K,writable:true,enumerable:false,configurable:true});
%FunctionSetPrototype(K,aN);
K.length=0;
}else{
%Fix(K);
}
ObjectDefineProperties(K,Y);
}
function ObjectSealJS(K){
if(!(%_IsSpecObject(K)))return K;
var aO=%_IsJSProxy(K);
if(aO||%HasSloppyArgumentsElements(K)||%IsObserved(K)){
if(aO){
ProxyFix(K);
}
var L=ObjectGetOwnPropertyNames(K);
for(var ax=0;ax<L.length;ax++){
var C=L[ax];
var H=GetOwnPropertyJS(K,C);
if(H.isConfigurable()){
H.setConfigurable(false);
DefineOwnProperty(K,C,H,true);
}
}
%PreventExtensions(K);
}else{
%ObjectSeal(K);
}
return K;
}
function ObjectFreezeJS(K){
if(!(%_IsSpecObject(K)))return K;
var aO=%_IsJSProxy(K);
if(aO||%HasSloppyArgumentsElements(K)||%IsObserved(K)||
(%IsStrong(K))){
if(aO){
ProxyFix(K);
}
var L=ObjectGetOwnPropertyNames(K);
for(var ax=0;ax<L.length;ax++){
var C=L[ax];
var H=GetOwnPropertyJS(K,C);
if(H.isWritable()||H.isConfigurable()){
if(IsDataDescriptor(H))H.setWritable(false);
H.setConfigurable(false);
DefineOwnProperty(K,C,H,true);
}
}
%PreventExtensions(K);
}else{
%ObjectFreeze(K);
}
return K;
}
function ObjectPreventExtension(K){
if(!(%_IsSpecObject(K)))return K;
if(%_IsJSProxy(K)){
ProxyFix(K);
}
%PreventExtensions(K);
return K;
}
function ObjectIsSealed(K){
if(!(%_IsSpecObject(K)))return true;
if(%_IsJSProxy(K)){
return false;
}
if(%IsExtensible(K)){
return false;
}
var L=ObjectGetOwnPropertyNames(K);
for(var ax=0;ax<L.length;ax++){
var C=L[ax];
var H=GetOwnPropertyJS(K,C);
if(H.isConfigurable()){
return false;
}
}
return true;
}
function ObjectIsFrozen(K){
if(!(%_IsSpecObject(K)))return true;
if(%_IsJSProxy(K)){
return false;
}
if(%IsExtensible(K)){
return false;
}
var L=ObjectGetOwnPropertyNames(K);
for(var ax=0;ax<L.length;ax++){
var C=L[ax];
var H=GetOwnPropertyJS(K,C);
if(IsDataDescriptor(H)&&H.isWritable())return false;
if(H.isConfigurable())return false;
}
return true;
}
function ObjectIsExtensible(K){
if(!(%_IsSpecObject(K)))return false;
if(%_IsJSProxy(K)){
return true;
}
return %IsExtensible(K);
}
function ObjectIs(aP,aQ){
return $sameValue(aP,aQ);
}
function ObjectGetProto(){
return %_GetPrototype((%_ToObject(this)));
}
function ObjectSetProto(an){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Object.prototype.__proto__");
if(((%_IsSpecObject(an))||(an===null))&&(%_IsSpecObject(this))){
%SetPrototype(this,an);
}
}
function ObjectConstructor(u){
if(%_IsConstructCall()){
if(u==null)return this;
return(%_ToObject(u));
}else{
if(u==null)return{};
return(%_ToObject(u));
}
}
%SetNativeFlag(g);
%SetCode(g,ObjectConstructor);
%AddNamedProperty(g.prototype,"constructor",g,
2);
b.InstallFunctions(g.prototype,2,[
"toString",ObjectToString,
"toLocaleString",ObjectToLocaleString,
"valueOf",ObjectValueOf,
"hasOwnProperty",ObjectHasOwnProperty,
"isPrototypeOf",ObjectIsPrototypeOf,
"propertyIsEnumerable",ObjectPropertyIsEnumerable,
"__defineGetter__",ObjectDefineGetter,
"__lookupGetter__",ObjectLookupGetter,
"__defineSetter__",ObjectDefineSetter,
"__lookupSetter__",ObjectLookupSetter
]);
b.InstallGetterSetter(g.prototype,"__proto__",ObjectGetProto,
ObjectSetProto);
b.InstallFunctions(g,2,[
"keys",ObjectKeys,
"create",ObjectCreate,
"defineProperty",ObjectDefineProperty,
"defineProperties",ObjectDefineProperties,
"freeze",ObjectFreezeJS,
"getPrototypeOf",ObjectGetPrototypeOf,
"setPrototypeOf",ObjectSetPrototypeOf,
"getOwnPropertyDescriptor",ObjectGetOwnPropertyDescriptor,
"getOwnPropertyNames",ObjectGetOwnPropertyNames,
"is",ObjectIs,
"isExtensible",ObjectIsExtensible,
"isFrozen",ObjectIsFrozen,
"isSealed",ObjectIsSealed,
"preventExtensions",ObjectPreventExtension,
"seal",ObjectSealJS
]);
function BooleanConstructor(u){
if(%_IsConstructCall()){
%_SetValueOf(this,n(u));
}else{
return n(u);
}
}
function BooleanToString(){
var aR=this;
if(!(typeof(aR)==='boolean')){
if(!(%_ClassOf(aR)==='Boolean')){
throw MakeTypeError(58,'Boolean.prototype.toString');
}
aR=%_ValueOf(aR);
}
return aR?'true':'false';
}
function BooleanValueOf(){
if(!(typeof(this)==='boolean')&&!(%_ClassOf(this)==='Boolean')){
throw MakeTypeError(58,'Boolean.prototype.valueOf');
}
return %_ValueOf(this);
}
%SetCode(d,BooleanConstructor);
%FunctionSetPrototype(d,new d(false));
%AddNamedProperty(d.prototype,"constructor",d,
2);
b.InstallFunctions(d.prototype,2,[
"toString",BooleanToString,
"valueOf",BooleanValueOf
]);
function NumberConstructor(u){
var B=%_ArgumentsLength()==0?0:o(u);
if(%_IsConstructCall()){
%_SetValueOf(this,B);
}else{
return B;
}
}
function NumberToStringJS(t){
var r=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(58,'Number.prototype.toString');
}
r=%_ValueOf(this);
}
if((t===(void 0))||t===10){
return %_NumberToString(r);
}
t=(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(o(t)));
if(t<2||t>36)throw MakeRangeError(151);
return %NumberToRadixString(r,t);
}
function NumberToLocaleString(){
return %_CallFunction(this,NumberToStringJS);
}
function NumberValueOf(){
if(!(typeof(this)==='number')&&!(%_ClassOf(this)==='Number')){
throw MakeTypeError(58,'Number.prototype.valueOf');
}
return %_ValueOf(this);
}
function NumberToFixedJS(aS){
var u=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(36,
"Number.prototype.toFixed",this);
}
u=%_ValueOf(this);
}
var w=(%_IsSmi(%IS_VAR(aS))?aS:%NumberToInteger(o(aS)));
if(w<0||w>20){
throw MakeRangeError(147,"toFixed() digits");
}
if((!%_IsSmi(%IS_VAR(u))&&!(u==u)))return"NaN";
if(u==(1/0))return"Infinity";
if(u==-(1/0))return"-Infinity";
return %NumberToFixed(u,w);
}
function NumberToExponentialJS(aS){
var u=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(36,
"Number.prototype.toExponential",this);
}
u=%_ValueOf(this);
}
var w=(aS===(void 0))?(void 0):(%_IsSmi(%IS_VAR(aS))?aS:%NumberToInteger(o(aS)));
if((!%_IsSmi(%IS_VAR(u))&&!(u==u)))return"NaN";
if(u==(1/0))return"Infinity";
if(u==-(1/0))return"-Infinity";
if((w===(void 0))){
w=-1;
}else if(w<0||w>20){
throw MakeRangeError(147,"toExponential()");
}
return %NumberToExponential(u,w);
}
function NumberToPrecisionJS(aT){
var u=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw MakeTypeError(36,
"Number.prototype.toPrecision",this);
}
u=%_ValueOf(this);
}
if((aT===(void 0)))return p(%_ValueOf(this));
var W=(%_IsSmi(%IS_VAR(aT))?aT:%NumberToInteger(o(aT)));
if((!%_IsSmi(%IS_VAR(u))&&!(u==u)))return"NaN";
if(u==(1/0))return"Infinity";
if(u==-(1/0))return"-Infinity";
if(W<1||W>21){
throw MakeRangeError(150);
}
return %NumberToPrecision(u,W);
}
function NumberIsFinite(r){
return(typeof(r)==='number')&&(%_IsSmi(%IS_VAR(r))||((r==r)&&(r!=1/0)&&(r!=-1/0)));
}
function NumberIsInteger(r){
return NumberIsFinite(r)&&(%_IsSmi(%IS_VAR(r))?r:%NumberToInteger(o(r)))==r;
}
function NumberIsNaN(r){
return(typeof(r)==='number')&&(!%_IsSmi(%IS_VAR(r))&&!(r==r));
}
function NumberIsSafeInteger(r){
if(NumberIsFinite(r)){
var aU=(%_IsSmi(%IS_VAR(r))?r:%NumberToInteger(o(r)));
if(aU==r){
return i(aU)<=f.MAX_SAFE_INTEGER;
}
}
return false;
}
%SetCode(f,NumberConstructor);
%FunctionSetPrototype(f,new f(0));
%OptimizeObjectForAddingMultipleProperties(f.prototype,8);
%AddNamedProperty(f.prototype,"constructor",f,
2);
b.InstallConstants(f,[
"MAX_VALUE",1.7976931348623157e+308,
"MIN_VALUE",5e-324,
"NaN",$NaN,
"NEGATIVE_INFINITY",-(1/0),
"POSITIVE_INFINITY",(1/0),
"MAX_SAFE_INTEGER",%_MathPow(2,53)-1,
"MIN_SAFE_INTEGER",-%_MathPow(2,53)+1,
"EPSILON",%_MathPow(2,-52)
]);
b.InstallFunctions(f.prototype,2,[
"toString",NumberToStringJS,
"toLocaleString",NumberToLocaleString,
"valueOf",NumberValueOf,
"toFixed",NumberToFixedJS,
"toExponential",NumberToExponentialJS,
"toPrecision",NumberToPrecisionJS
]);
b.InstallFunctions(f,2,[
"isFinite",NumberIsFinite,
"isInteger",NumberIsInteger,
"isNaN",NumberIsNaN,
"isSafeInteger",NumberIsSafeInteger,
"parseInt",GlobalParseInt,
"parseFloat",GlobalParseFloat
]);
%SetForceInlineFlag(NumberIsNaN);
function NativeCodeFunctionSourceString(aa){
var C=%FunctionGetName(aa);
if(C){
return'function '+C+'() { [native code] }';
}
return'function () { [native code] }';
}
function FunctionSourceString(aa){
while(%IsJSFunctionProxy(aa)){
aa=%GetCallTrap(aa);
}
if(!(%_IsFunction(aa))){
throw MakeTypeError(58,'Function.prototype.toString');
}
if(%FunctionHidesSource(aa)){
return NativeCodeFunctionSourceString(aa);
}
var aV=%ClassGetSourceCode(aa);
if((typeof(aV)==='string')){
return aV;
}
var aW=%FunctionGetSourceCode(aa);
if(!(typeof(aW)==='string')){
return NativeCodeFunctionSourceString(aa);
}
if(%FunctionIsArrow(aa)){
return aW;
}
var C=%FunctionNameShouldPrintAsAnonymous(aa)
?'anonymous'
:%FunctionGetName(aa);
var aX=%FunctionIsGenerator(aa);
var aY=%FunctionIsConciseMethod(aa)
?(aX?'*':'')
:(aX?'function* ':'function ');
return aY+C+aW;
}
function FunctionToString(){
return FunctionSourceString(this);
}
function FunctionBind(aZ){
if(!(%_ClassOf(this)==='Function'))throw MakeTypeError(33);
var ba=function(){
"use strict";
if(%_IsConstructCall()){
return %NewObjectFromBound(ba);
}
var bb=%BoundFunctionGetBindings(ba);
var bc=%_ArgumentsLength();
if(bc==0){
return %Apply(bb[0],bb[1],bb,2,bb.length-2);
}
if(bb.length===2){
return %Apply(bb[0],bb[1],arguments,0,bc);
}
var bd=bb.length-2;
var be=new h(bd+bc);
for(var ax=0;ax<bd;ax++){
be[ax]=bb[ax+2];
}
for(var aC=0;aC<bc;aC++){
be[ax++]=%_Arguments(aC);
}
return %Apply(bb[0],bb[1],be,0,bd+bc);
};
var bf=0;
var bg=this.length;
if((typeof bg==="number")&&
((bg>>>0)===bg)){
var bc=%_ArgumentsLength();
if(bc>0)bc--;
bf=bg-bc;
if(bf<0)bf=0;
}
var ab=%FunctionBindArguments(ba,this,
aZ,bf);
var C=this.name;
var bh=(typeof(C)==='string')?C:"";
%DefineDataPropertyUnchecked(ab,"name","bound "+bh,
2|1);
return ab;
}
function NewFunctionString(bi,bj){
var ap=bi.length;
var W='';
if(ap>1){
W=p(bi[0]);
for(var ax=1;ax<ap-1;ax++){
W+=','+p(bi[ax]);
}
if(%_CallFunction(W,')',m)!=-1){
throw MakeSyntaxError(189);
}
W+='\n/'+'**/';
}
var bk=(ap>0)?p(bi[ap-1]):'';
return'('+bj+'('+W+') {\n'+bk+'\n})';
}
function FunctionConstructor(bl){
var aW=NewFunctionString(arguments,'function');
var v=%GlobalProxy(FunctionConstructor);
var w=%_CallFunction(v,%CompileString(aW,true));
%FunctionMarkNameShouldPrintAsAnonymous(w);
return w;
}
%SetCode(e,FunctionConstructor);
%AddNamedProperty(e.prototype,"constructor",e,
2);
b.InstallFunctions(e.prototype,2,[
"bind",FunctionBind,
"toString",FunctionToString
]);
function GetIterator(K,bm){
if((bm===(void 0))){
bm=K[symbolIterator];
}
if(!(%_ClassOf(bm)==='Function')){
throw MakeTypeError(59,K);
}
var bn=%_CallFunction(K,bm);
if(!(%_IsSpecObject(bn))){
throw MakeTypeError(53,bn);
}
return bn;
}
b.Export(function(bo){
bo.Delete=Delete;
bo.FunctionSourceString=FunctionSourceString;
bo.GetIterator=GetIterator;
bo.GetMethod=GetMethod;
bo.IsFinite=GlobalIsFinite;
bo.IsNaN=GlobalIsNaN;
bo.NewFunctionString=NewFunctionString;
bo.NumberIsNaN=NumberIsNaN;
bo.ObjectDefineProperties=ObjectDefineProperties;
bo.ObjectDefineProperty=ObjectDefineProperty;
bo.ObjectFreeze=ObjectFreezeJS;
bo.ObjectGetOwnPropertyKeys=ObjectGetOwnPropertyKeys;
bo.ObjectHasOwnProperty=ObjectHasOwnProperty;
bo.ObjectIsFrozen=ObjectIsFrozen;
bo.ObjectIsSealed=ObjectIsSealed;
bo.ObjectToString=ObjectToString;
bo.OwnPropertyKeys=OwnPropertyKeys;
bo.ToNameArray=ToNameArray;
});
b.ExportToRuntime(function(bo){
bo["global_eval_fun"]=GlobalEval;
bo["object_define_own_property"]=DefineOwnPropertyFromAPI;
bo["object_get_own_property_descriptor"]=ObjectGetOwnPropertyDescriptor;
bo["to_complete_property_descriptor"]=ToCompletePropertyDescriptor;
});
})

symbole
var $symbolToString;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.Symbol;
var e;
var f;
b.Import(function(g){
e=g.ObjectGetOwnPropertyKeys;
f=g.ToString;
});
function SymbolConstructor(h){
if(%_IsConstructCall())throw MakeTypeError(55,"Symbol");
return %CreateSymbol((h===(void 0))?h:f(h));
}
function SymbolToString(){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw MakeTypeError(36,
"Symbol.prototype.toString",this);
}
var i=%SymbolDescription(%_ValueOf(this));
return"Symbol("+((i===(void 0))?"":i)+")";
}
function SymbolValueOf(){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw MakeTypeError(36,
"Symbol.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function SymbolFor(j){
j=((typeof(%IS_VAR(j))==='string')?j:$nonStringToString(j));
var k=%SymbolRegistry();
if((k.for[j]===(void 0))){
var l=%CreateSymbol(j);
k.for[j]=l;
k.keyFor[l]=j;
}
return k.for[j];
}
function SymbolKeyFor(l){
if(!(typeof(l)==='symbol'))throw MakeTypeError(113,l);
return %SymbolRegistry().keyFor[l];
}
function ObjectGetOwnPropertySymbols(m){
m=(%_ToObject(m));
return e(m,8);
}
%SetCode(d,SymbolConstructor);
%FunctionSetPrototype(d,new c());
b.InstallConstants(d,[
"iterator",symbolIterator,
"unscopables",symbolUnscopables
]);
b.InstallFunctions(d,2,[
"for",SymbolFor,
"keyFor",SymbolKeyFor
]);
%AddNamedProperty(
d.prototype,"constructor",d,2);
%AddNamedProperty(
d.prototype,symbolToStringTag,"Symbol",2|1);
b.InstallFunctions(d.prototype,2,[
"toString",SymbolToString,
"valueOf",SymbolValueOf
]);
b.InstallFunctions(c,2,[
"getOwnPropertySymbols",ObjectGetOwnPropertySymbols
]);
$symbolToString=SymbolToString;
})

array’
var $arrayConcat;
var $arrayPush;
var $arrayPop;
var $arrayShift;
var $arraySlice;
var $arraySplice;
var $arrayUnshift;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d=a.Array;
var e=b.InternalArray;
var f=b.InternalPackedArray;
var g;
var h;
var i;
var j;
var k;
var l;
var m;
b.Import(function(n){
c=n.Delete;
g=n.MathMin;
h=n.ObjectHasOwnProperty;
i=n.ObjectIsFrozen;
j=n.ObjectIsSealed;
k=n.ObjectToString;
l=n.ToNumber;
m=n.ToString;
});
var o=new e();
function GetSortedArrayKeys(p,q){
var r=new e();
if((typeof(q)==='number')){
var s=q;
for(var t=0;t<s;++t){
var u=p[t];
if(!(u===(void 0))||t in p){
r.push(t);
}
}
}else{
var v=q.length;
for(var w=0;w<v;++w){
var x=q[w];
if(!(x===(void 0))){
var u=p[x];
if(!(u===(void 0))||x in p){
r.push(x);
}
}
}
%_CallFunction(r,function(y,z){return y-z;},ArraySort);
}
return r;
}
function SparseJoinWithSeparatorJS(p,A,B,C){
var r=GetSortedArrayKeys(p,%GetArrayKeys(p,A));
var D=0;
var E=new e(r.length*2);
var F=-1;
for(var t=0;t<r.length;t++){
var x=r[t];
if(x!=F){
var u=p[x];
if(!(typeof(u)==='string'))u=B(u);
E[t*2]=x;
E[t*2+1]=u;
F=x;
}
}
return %SparseJoinWithSeparator(E,A,C);
}
function SparseJoin(p,A,B){
var r=GetSortedArrayKeys(p,%GetArrayKeys(p,A));
var G=-1;
var H=r.length;
var E=new e(H);
var I=0;
for(var t=0;t<H;t++){
var x=r[t];
if(x!=G){
var u=p[x];
if(!(typeof(u)==='string'))u=B(u);
E[I++]=u;
G=x;
}
}
return %StringBuilderConcat(E,I,'');
}
function UseSparseVariant(p,v,J,K){
if(!J||v<1000||%IsObserved(p)||
%HasComplexElements(p)){
return false;
}
if(!%_IsSmi(v)){
return true;
}
var L=v>>2;
var M=%EstimateNumberOfElements(p);
return(M<L)&&
(K>M*4);
}
function Join(p,v,C,B){
if(v==0)return'';
var J=(%_IsArray(p));
if(J){
if(!%PushIfAbsent(o,p))return'';
}
try{
if(UseSparseVariant(p,v,J,v)){
%NormalizeElements(p);
if(C.length==0){
return SparseJoin(p,v,B);
}else{
return SparseJoinWithSeparatorJS(p,v,B,C);
}
}
if(v==1){
var u=p[0];
if((typeof(u)==='string'))return u;
return B(u);
}
var E=new e(v);
if(C.length==0){
var I=0;
for(var t=0;t<v;t++){
var u=p[t];
if(!(typeof(u)==='string'))u=B(u);
E[I++]=u;
}
E.length=I;
var N=%_FastOneByteArrayJoin(E,'');
if(!(N===(void 0)))return N;
return %StringBuilderConcat(E,I,'');
}
if(!(typeof(p[0])==='number')){
for(var t=0;t<v;t++){
var u=p[t];
if(!(typeof(u)==='string'))u=B(u);
E[t]=u;
}
}else{
for(var t=0;t<v;t++){
var u=p[t];
if((typeof(u)==='number')){
u=%_NumberToString(u);
}else if(!(typeof(u)==='string')){
u=B(u);
}
E[t]=u;
}
}
var N=%_FastOneByteArrayJoin(E,C);
if(!(N===(void 0)))return N;
return %StringBuilderJoin(E,v,C);
}finally{
if(J)o.length=o.length-1;
}
}
function ConvertToString(O){
if((typeof(O)==='number'))return %_NumberToString(O);
if((typeof(O)==='boolean'))return O?'true':'false';
return((O==null))?'':m($defaultString(O));
}
function ConvertToLocaleString(u){
if((u==null)){
return'';
}else{
var P=(%_ToObject(u));
return m(P.toLocaleString());
}
}
function SparseSlice(p,Q,R,A,S){
var q=%GetArrayKeys(p,Q+R);
if((typeof(q)==='number')){
var s=q;
for(var t=Q;t<s;++t){
var T=p[t];
if(!(T===(void 0))||t in p){
%AddElement(S,t-Q,T);
}
}
}else{
var v=q.length;
for(var w=0;w<v;++w){
var x=q[w];
if(!(x===(void 0))){
if(x>=Q){
var T=p[x];
if(!(T===(void 0))||x in p){
%AddElement(S,x-Q,T);
}
}
}
}
}
}
function SparseMove(p,Q,R,A,U){
if(U===R)return;
var V=new e(
g(A-R+U,0xffffffff));
var W;
var q=%GetArrayKeys(p,A);
if((typeof(q)==='number')){
var s=q;
for(var t=0;t<Q&&t<s;++t){
var T=p[t];
if(!(T===(void 0))||t in p){
V[t]=T;
}
}
for(var t=Q+R;t<s;++t){
var T=p[t];
if(!(T===(void 0))||t in p){
V[t-R+U]=T;
}
}
}else{
var v=q.length;
for(var w=0;w<v;++w){
var x=q[w];
if(!(x===(void 0))){
if(x<Q){
var T=p[x];
if(!(T===(void 0))||x in p){
V[x]=T;
}
}else if(x>=Q+R){
var T=p[x];
if(!(T===(void 0))||x in p){
var X=x-R+U;
V[X]=T;
if(X>0xfffffffe){
W=W||new e();
W.push(X);
}
}
}
}
}
}
%MoveArrayContents(V,p);
if(!(W===(void 0))){
var v=W.length;
for(var t=0;t<v;++t){
var x=W[t];
p[x]=V[x];
}
}
}
function SimpleSlice(p,Q,R,A,S){
var J=(%_IsArray(p));
for(var t=0;t<R;t++){
var Y=Q+t;
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(Y<p.length):(Y in p))){
var T=p[Y];
%AddElement(S,t,T);
}
}
}
function SimpleMove(p,Q,R,A,U){
var J=(%_IsArray(p));
if(U!==R){
if(U>R){
for(var t=A-R;t>Q;t--){
var Z=t+R-1;
var aa=t+U-1;
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(Z<p.length):(Z in p))){
p[aa]=p[Z];
}else{
delete p[aa];
}
}
}else{
for(var t=Q;t<A-R;t++){
var Z=t+R;
var aa=t+U;
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(Z<p.length):(Z in p))){
p[aa]=p[Z];
}else{
delete p[aa];
}
}
for(var t=A;t>A-R+U;t--){
delete p[t-1];
}
}
}
}
function ArrayToString(){
var p;
var ab;
if((%_IsArray(this))){
ab=this.join;
if(ab===ArrayJoin){
return Join(this,this.length,',',ConvertToString);
}
p=this;
}else{
p=(%_ToObject(this));
ab=p.join;
}
if(!(%_ClassOf(ab)==='Function')){
return %_CallFunction(p,k);
}
return %_CallFunction(p,ab);
}
function InnerArrayToLocaleString(p,v){
var A=(v>>>0);
if(A===0)return"";
return Join(p,A,',',ConvertToLocaleString);
}
function ArrayToLocaleString(){
var p=(%_ToObject(this));
var ac=p.length;
return InnerArrayToLocaleString(p,ac);
}
function InnerArrayJoin(C,p,v){
if((C===(void 0))){
C=',';
}else if(!(typeof(C)==='string')){
C=$nonStringToString(C);
}
var N=%_FastOneByteArrayJoin(p,C);
if(!(N===(void 0)))return N;
if(v===1){
var u=p[0];
if((typeof(u)==='string'))return u;
if((u==null))return'';
return $nonStringToString(u);
}
return Join(p,v,C,ConvertToString);
}
function ArrayJoin(C){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.join");
var p=(%_ToObject(this));
var v=(p.length>>>0);
return InnerArrayJoin(C,p,v);
}
function ObservedArrayPop(ad){
ad--;
var ae=this[ad];
try{
$observeBeginPerformSplice(this);
delete this[ad];
this.length=ad;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,ad,[ae],0);
}
return ae;
}
function ArrayPop(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.pop");
var p=(%_ToObject(this));
var ad=(p.length>>>0);
if(ad==0){
p.length=ad;
return;
}
if(%IsObserved(p))
return ObservedArrayPop.call(p,ad);
ad--;
var ae=p[ad];
c(p,ad,true);
p.length=ad;
return ae;
}
function ObservedArrayPush(){
var ad=(this.length>>>0);
var af=%_ArgumentsLength();
try{
$observeBeginPerformSplice(this);
for(var t=0;t<af;t++){
this[t+ad]=%_Arguments(t);
}
var ag=ad+af;
this.length=ag;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,ad,[],af);
}
return ag;
}
function ArrayPush(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.push");
if(%IsObserved(this))
return ObservedArrayPush.apply(this,arguments);
var p=(%_ToObject(this));
var ad=(p.length>>>0);
var af=%_ArgumentsLength();
for(var t=0;t<af;t++){
p[t+ad]=%_Arguments(t);
}
var ag=ad+af;
p.length=ag;
return ag;
}
function ArrayConcatJS(ah){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.concat");
var p=(%_ToObject(this));
var ai=%_ArgumentsLength();
var aj=new e(1+ai);
aj[0]=p;
for(var t=0;t<ai;t++){
aj[t+1]=%_Arguments(t);
}
return %ArrayConcat(aj);
}
function SparseReverse(p,A){
var r=GetSortedArrayKeys(p,%GetArrayKeys(p,A));
var ak=r.length-1;
var al=0;
while(al<=ak){
var t=r[al];
var am=r[ak];
var an=A-am-1;
var ao,ap;
if(an<=t){
ap=am;
while(r[--ak]==am){}
ao=an;
}
if(an>=t){
ao=t;
while(r[++al]==t){}
ap=A-t-1;
}
var aq=p[ao];
if(!(aq===(void 0))||ao in p){
var ar=p[ap];
if(!(ar===(void 0))||ap in p){
p[ao]=ar;
p[ap]=aq;
}else{
p[ap]=aq;
delete p[ao];
}
}else{
var ar=p[ap];
if(!(ar===(void 0))||ap in p){
p[ao]=ar;
delete p[ap];
}
}
}
}
function PackedArrayReverse(p,A){
var am=A-1;
for(var t=0;t<am;t++,am--){
var aq=p[t];
var ar=p[am];
p[t]=ar;
p[am]=aq;
}
return p;
}
function GenericArrayReverse(p,A){
var am=A-1;
for(var t=0;t<am;t++,am--){
if(t in p){
var aq=p[t];
if(am in p){
var ar=p[am];
p[t]=ar;
p[am]=aq;
}else{
p[am]=aq;
delete p[t];
}
}else{
if(am in p){
var ar=p[am];
p[t]=ar;
delete p[am];
}
}
}
return p;
}
function ArrayReverse(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.reverse");
var p=(%_ToObject(this));
var A=(p.length>>>0);
var as=(%_IsArray(p));
if(UseSparseVariant(p,A,as,A)){
%NormalizeElements(p);
SparseReverse(p,A);
return p;
}else if(as&&%_HasFastPackedElements(p)){
return PackedArrayReverse(p,A);
}else{
return GenericArrayReverse(p,A);
}
}
function ObservedArrayShift(A){
var at=this[0];
try{
$observeBeginPerformSplice(this);
SimpleMove(this,0,1,A,0);
this.length=A-1;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,0,[at],0);
}
return at;
}
function ArrayShift(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.shift");
var p=(%_ToObject(this));
var A=(p.length>>>0);
if(A===0){
p.length=0;
return;
}
if(j(p))throw MakeTypeError(11);
if(%IsObserved(p))
return ObservedArrayShift.call(p,A);
var at=p[0];
if(UseSparseVariant(p,A,(%_IsArray(p)),A)){
SparseMove(p,0,1,A,0);
}else{
SimpleMove(p,0,1,A,0);
}
p.length=A-1;
return at;
}
function ObservedArrayUnshift(){
var A=(this.length>>>0);
var au=%_ArgumentsLength();
try{
$observeBeginPerformSplice(this);
SimpleMove(this,0,0,A,au);
for(var t=0;t<au;t++){
this[t]=%_Arguments(t);
}
var ag=A+au;
this.length=ag;
}finally{
$observeEndPerformSplice(this);
$observeEnqueueSpliceRecord(this,0,[],au);
}
return ag;
}
function ArrayUnshift(ah){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.unshift");
if(%IsObserved(this))
return ObservedArrayUnshift.apply(this,arguments);
var p=(%_ToObject(this));
var A=(p.length>>>0);
var au=%_ArgumentsLength();
if(A>0&&UseSparseVariant(p,A,(%_IsArray(p)),A)&&
!j(p)){
SparseMove(p,0,0,A,au);
}else{
SimpleMove(p,0,0,A,au);
}
for(var t=0;t<au;t++){
p[t]=%_Arguments(t);
}
var ag=A+au;
p.length=ag;
return ag;
}
function ArraySlice(av,aw){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.slice");
var p=(%_ToObject(this));
var A=(p.length>>>0);
var Q=(%_IsSmi(%IS_VAR(av))?av:%NumberToInteger(l(av)));
var ax=A;
if(!(aw===(void 0)))ax=(%_IsSmi(%IS_VAR(aw))?aw:%NumberToInteger(l(aw)));
if(Q<0){
Q+=A;
if(Q<0)Q=0;
}else{
if(Q>A)Q=A;
}
if(ax<0){
ax+=A;
if(ax<0)ax=0;
}else{
if(ax>A)ax=A;
}
var N=[];
if(ax<Q)return N;
if(UseSparseVariant(p,A,(%_IsArray(p)),ax-Q)){
%NormalizeElements(p);
%NormalizeElements(N);
SparseSlice(p,Q,ax-Q,A,N);
}else{
SimpleSlice(p,Q,ax-Q,A,N);
}
N.length=ax-Q;
return N;
}
function ComputeSpliceStartIndex(Q,A){
if(Q<0){
Q+=A;
return Q<0?0:Q;
}
return Q>A?A:Q;
}
function ComputeSpliceDeleteCount(ay,au,A,Q){
var R=0;
if(au==1)
return A-Q;
R=(%_IsSmi(%IS_VAR(ay))?ay:%NumberToInteger(l(ay)));
if(R<0)
return 0;
if(R>A-Q)
return A-Q;
return R;
}
function ObservedArraySplice(av,ay){
var au=%_ArgumentsLength();
var A=(this.length>>>0);
var Q=ComputeSpliceStartIndex((%_IsSmi(%IS_VAR(av))?av:%NumberToInteger(l(av))),A);
var R=ComputeSpliceDeleteCount(ay,au,A,
Q);
var S=[];
S.length=R;
var az=au>2?au-2:0;
try{
$observeBeginPerformSplice(this);
SimpleSlice(this,Q,R,A,S);
SimpleMove(this,Q,R,A,az);
var t=Q;
var aA=2;
var aB=%_ArgumentsLength();
while(aA<aB){
this[t++]=%_Arguments(aA++);
}
this.length=A-R+az;
}finally{
$observeEndPerformSplice(this);
if(S.length||az){
$observeEnqueueSpliceRecord(this,
Q,
S.slice(),
az);
}
}
return S;
}
function ArraySplice(av,ay){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.splice");
if(%IsObserved(this))
return ObservedArraySplice.apply(this,arguments);
var au=%_ArgumentsLength();
var p=(%_ToObject(this));
var A=(p.length>>>0);
var Q=ComputeSpliceStartIndex((%_IsSmi(%IS_VAR(av))?av:%NumberToInteger(l(av))),A);
var R=ComputeSpliceDeleteCount(ay,au,A,
Q);
var S=[];
S.length=R;
var az=au>2?au-2:0;
if(R!=az&&j(p)){
throw MakeTypeError(11);
}else if(R>0&&i(p)){
throw MakeTypeError(10);
}
var aC=R;
if(az!=R){
aC+=A-Q-R;
}
if(UseSparseVariant(p,A,(%_IsArray(p)),aC)){
%NormalizeElements(p);
%NormalizeElements(S);
SparseSlice(p,Q,R,A,S);
SparseMove(p,Q,R,A,az);
}else{
SimpleSlice(p,Q,R,A,S);
SimpleMove(p,Q,R,A,az);
}
var t=Q;
var aA=2;
var aB=%_ArgumentsLength();
while(aA<aB){
p[t++]=%_Arguments(aA++);
}
p.length=A-R+az;
return S;
}
function InnerArraySort(v,aD){
if(!(%_ClassOf(aD)==='Function')){
aD=function(O,aE){
if(O===aE)return 0;
if(%_IsSmi(O)&&%_IsSmi(aE)){
return %SmiLexicographicCompare(O,aE);
}
O=m(O);
aE=m(aE);
if(O==aE)return 0;
else return O<aE?-1:1;
};
}
var aF=function InsertionSort(y,n,aG){
for(var t=n+1;t<aG;t++){
var aH=y[t];
for(var am=t-1;am>=n;am--){
var aI=y[am];
var aJ=%_CallFunction((void 0),aI,aH,aD);
if(aJ>0){
y[am+1]=aI;
}else{
break;
}
}
y[am+1]=aH;
}
};
var aK=function(y,n,aG){
var aL=[];
var aM=200+((aG-n)&15);
for(var t=n+1,am=0;t<aG-1;t+=aM,am++){
aL[am]=[t,y[t]];
}
%_CallFunction(aL,function(y,z){
return %_CallFunction((void 0),y[1],z[1],aD);
},ArraySort);
var aN=aL[aL.length>>1][0];
return aN;
}
var aO=function QuickSort(y,n,aG){
var aN=0;
while(true){
if(aG-n<=10){
aF(y,n,aG);
return;
}
if(aG-n>1000){
aN=aK(y,n,aG);
}else{
aN=n+((aG-n)>>1);
}
var aP=y[n];
var aQ=y[aG-1];
var aR=y[aN];
var aS=%_CallFunction((void 0),aP,aQ,aD);
if(aS>0){
var aI=aP;
aP=aQ;
aQ=aI;
}
var aT=%_CallFunction((void 0),aP,aR,aD);
if(aT>=0){
var aI=aP;
aP=aR;
aR=aQ;
aQ=aI;
}else{
var aU=%_CallFunction((void 0),aQ,aR,aD);
if(aU>0){
var aI=aQ;
aQ=aR;
aR=aI;
}
}
y[n]=aP;
y[aG-1]=aR;
var aV=aQ;
var aW=n+1;
var aX=aG-1;
y[aN]=y[aW];
y[aW]=aV;
partition:for(var t=aW+1;t<aX;t++){
var aH=y[t];
var aJ=%_CallFunction((void 0),aH,aV,aD);
if(aJ<0){
y[t]=y[aW];
y[aW]=aH;
aW++;
}else if(aJ>0){
do{
aX--;
if(aX==t)break partition;
var aY=y[aX];
aJ=%_CallFunction((void 0),aY,aV,aD);
}while(aJ>0);
y[t]=y[aX];
y[aX]=aH;
if(aJ<0){
aH=y[t];
y[t]=y[aW];
y[aW]=aH;
aW++;
}
}
}
if(aG-aX<aW-n){
aO(y,aX,aG);
aG=aW;
}else{
aO(y,n,aW);
n=aX;
}
}
};
var aZ=function CopyFromPrototype(ba,v){
var bb=0;
for(var bc=%_GetPrototype(ba);bc;bc=%_GetPrototype(bc)){
var q=%GetArrayKeys(bc,v);
if((typeof(q)==='number')){
var bd=q;
for(var t=0;t<bd;t++){
if(!(%_CallFunction(ba,t,h))&&(%_CallFunction(bc,t,h))){
ba[t]=bc[t];
if(t>=bb){bb=t+1;}
}
}
}else{
for(var t=0;t<q.length;t++){
var Y=q[t];
if(!(Y===(void 0))&&!(%_CallFunction(ba,Y,h))
&&(%_CallFunction(bc,Y,h))){
ba[Y]=bc[Y];
if(Y>=bb){bb=Y+1;}
}
}
}
}
return bb;
};
var be=function(ba,n,aG){
for(var bc=%_GetPrototype(ba);bc;bc=%_GetPrototype(bc)){
var q=%GetArrayKeys(bc,aG);
if((typeof(q)==='number')){
var bd=q;
for(var t=n;t<bd;t++){
if((%_CallFunction(bc,t,h))){
ba[t]=(void 0);
}
}
}else{
for(var t=0;t<q.length;t++){
var Y=q[t];
if(!(Y===(void 0))&&n<=Y&&
(%_CallFunction(bc,Y,h))){
ba[Y]=(void 0);
}
}
}
}
};
var bf=function SafeRemoveArrayHoles(ba){
var bg=0;
var bh=v-1;
var bi=0;
while(bg<bh){
while(bg<bh&&
!(ba[bg]===(void 0))){
bg++;
}
if(!(%_CallFunction(ba,bg,h))){
bi++;
}
while(bg<bh&&
(ba[bh]===(void 0))){
if(!(%_CallFunction(ba,bh,h))){
bi++;
}
bh--;
}
if(bg<bh){
ba[bg]=ba[bh];
ba[bh]=(void 0);
}
}
if(!(ba[bg]===(void 0)))bg++;
var t;
for(t=bg;t<v-bi;t++){
ba[t]=(void 0);
}
for(t=v-bi;t<v;t++){
if(t in %_GetPrototype(ba)){
ba[t]=(void 0);
}else{
delete ba[t];
}
}
return bg;
};
if(v<2)return this;
var J=(%_IsArray(this));
var bj;
if(!J){
bj=aZ(this,v);
}
var bk=%RemoveArrayHoles(this,v);
if(bk==-1){
bk=bf(this);
}
aO(this,0,bk);
if(!J&&(bk+1<bj)){
be(this,bk,bj);
}
return this;
}
function ArraySort(aD){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.sort");
var p=(%_ToObject(this));
var v=(p.length>>>0);
return %_CallFunction(p,v,aD,InnerArraySort);
}
function InnerArrayFilter(bl,bm,p,v){
if(!(%_ClassOf(bl)==='Function'))throw MakeTypeError(13,bl);
var bn=false;
if((bm===null)){
if(%IsSloppyModeFunction(bl))bm=(void 0);
}else if(!(bm===(void 0))){
bn=(!(%_IsSpecObject(bm))&&%IsSloppyModeFunction(bl));
}
var bo=new e();
var bp=0;
var J=(%_IsArray(p));
var bq=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bl);
for(var t=0;t<v;t++){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
var aH=p[t];
if(bq)%DebugPrepareStepInIfStepping(bl);
var br=bn?(%_ToObject(bm)):bm;
if(%_CallFunction(br,aH,t,p,bl)){
bo[bp++]=aH;
}
}
}
return bo;
}
function ArrayFilter(bl,bm){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.filter");
var p=(%_ToObject(this));
var v=(p.length>>>0);
var bo=InnerArrayFilter(bl,bm,p,v);
var N=new d();
%MoveArrayContents(bo,N);
return N;
}
function InnerArrayForEach(bl,bm,p,v){
if(!(%_ClassOf(bl)==='Function'))throw MakeTypeError(13,bl);
var bn=false;
if((bm===null)){
if(%IsSloppyModeFunction(bl))bm=(void 0);
}else if(!(bm===(void 0))){
bn=(!(%_IsSpecObject(bm))&&%IsSloppyModeFunction(bl));
}
var J=(%_IsArray(p));
var bq=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bl);
for(var t=0;t<v;t++){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
var aH=p[t];
if(bq)%DebugPrepareStepInIfStepping(bl);
var br=bn?(%_ToObject(bm)):bm;
%_CallFunction(br,aH,t,p,bl);
}
}
}
function ArrayForEach(bl,bm){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.forEach");
var p=(%_ToObject(this));
var v=(p.length>>>0);
InnerArrayForEach(bl,bm,p,v);
}
function InnerArraySome(bl,bm,p,v){
if(!(%_ClassOf(bl)==='Function'))throw MakeTypeError(13,bl);
var bn=false;
if((bm===null)){
if(%IsSloppyModeFunction(bl))bm=(void 0);
}else if(!(bm===(void 0))){
bn=(!(%_IsSpecObject(bm))&&%IsSloppyModeFunction(bl));
}
var J=(%_IsArray(p));
var bq=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bl);
for(var t=0;t<v;t++){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
var aH=p[t];
if(bq)%DebugPrepareStepInIfStepping(bl);
var br=bn?(%_ToObject(bm)):bm;
if(%_CallFunction(br,aH,t,p,bl))return true;
}
}
return false;
}
function ArraySome(bl,bm){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.some");
var p=(%_ToObject(this));
var v=(p.length>>>0);
return InnerArraySome(bl,bm,p,v);
}
function InnerArrayEvery(bl,bm,p,v){
if(!(%_ClassOf(bl)==='Function'))throw MakeTypeError(13,bl);
var bn=false;
if((bm===null)){
if(%IsSloppyModeFunction(bl))bm=(void 0);
}else if(!(bm===(void 0))){
bn=(!(%_IsSpecObject(bm))&&%IsSloppyModeFunction(bl));
}
var J=(%_IsArray(p));
var bq=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bl);
for(var t=0;t<v;t++){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
var aH=p[t];
if(bq)%DebugPrepareStepInIfStepping(bl);
var br=bn?(%_ToObject(bm)):bm;
if(!%_CallFunction(br,aH,t,p,bl))return false;
}
}
return true;
}
function ArrayEvery(bl,bm){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.every");
var p=(%_ToObject(this));
var v=(p.length>>>0);
return InnerArrayEvery(bl,bm,p,v);
}
function InnerArrayMap(bl,bm,p,v){
if(!(%_ClassOf(bl)==='Function'))throw MakeTypeError(13,bl);
var bn=false;
if((bm===null)){
if(%IsSloppyModeFunction(bl))bm=(void 0);
}else if(!(bm===(void 0))){
bn=(!(%_IsSpecObject(bm))&&%IsSloppyModeFunction(bl));
}
var bo=new e(v);
var J=(%_IsArray(p));
var bq=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bl);
for(var t=0;t<v;t++){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
var aH=p[t];
if(bq)%DebugPrepareStepInIfStepping(bl);
var br=bn?(%_ToObject(bm)):bm;
bo[t]=%_CallFunction(br,aH,t,p,bl);
}
}
return bo;
}
function ArrayMap(bl,bm){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.map");
var p=(%_ToObject(this));
var v=(p.length>>>0);
var bo=InnerArrayMap(bl,bm,p,v);
var N=new d();
%MoveArrayContents(bo,N);
return N;
}
function InnerArrayIndexOf(aH,Y,v){
if(v==0)return-1;
if((Y===(void 0))){
Y=0;
}else{
Y=(%_IsSmi(%IS_VAR(Y))?Y:%NumberToInteger(l(Y)));
if(Y<0){
Y=v+Y;
if(Y<0)Y=0;
}
}
var bs=Y;
var bb=v;
if(UseSparseVariant(this,v,(%_IsArray(this)),bb-bs)){
%NormalizeElements(this);
var q=%GetArrayKeys(this,v);
if((typeof(q)==='number')){
bb=q;
}else{
if(q.length==0)return-1;
var bt=GetSortedArrayKeys(this,q);
var ad=bt.length;
var t=0;
while(t<ad&&bt[t]<Y)t++;
while(t<ad){
var x=bt[t];
if(!(x===(void 0))&&this[x]===aH)return x;
t++;
}
return-1;
}
}
if(!(aH===(void 0))){
for(var t=bs;t<bb;t++){
if(this[t]===aH)return t;
}
return-1;
}
for(var t=bs;t<bb;t++){
if((this[t]===(void 0))&&t in this){
return t;
}
}
return-1;
}
function ArrayIndexOf(aH,Y){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.indexOf");
var v=(this.length>>>0);
return %_CallFunction(this,aH,Y,v,InnerArrayIndexOf);
}
function InnerArrayLastIndexOf(aH,Y,v,bu){
if(v==0)return-1;
if(bu<2){
Y=v-1;
}else{
Y=(%_IsSmi(%IS_VAR(Y))?Y:%NumberToInteger(l(Y)));
if(Y<0)Y+=v;
if(Y<0)return-1;
else if(Y>=v)Y=v-1;
}
var bs=0;
var bb=Y;
if(UseSparseVariant(this,v,(%_IsArray(this)),Y)){
%NormalizeElements(this);
var q=%GetArrayKeys(this,Y+1);
if((typeof(q)==='number')){
bb=q;
}else{
if(q.length==0)return-1;
var bt=GetSortedArrayKeys(this,q);
var t=bt.length-1;
while(t>=0){
var x=bt[t];
if(!(x===(void 0))&&this[x]===aH)return x;
t--;
}
return-1;
}
}
if(!(aH===(void 0))){
for(var t=bb;t>=bs;t--){
if(this[t]===aH)return t;
}
return-1;
}
for(var t=bb;t>=bs;t--){
if((this[t]===(void 0))&&t in this){
return t;
}
}
return-1;
}
function ArrayLastIndexOf(aH,Y){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.lastIndexOf");
var v=(this.length>>>0);
return %_CallFunction(this,aH,Y,v,
%_ArgumentsLength(),InnerArrayLastIndexOf);
}
function InnerArrayReduce(bv,T,p,v,bu){
if(!(%_ClassOf(bv)==='Function')){
throw MakeTypeError(13,bv);
}
var J=(%_IsArray(p));
var t=0;
find_initial:if(bu<2){
for(;t<v;t++){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
T=p[t++];
break find_initial;
}
}
throw MakeTypeError(96);
}
var bq=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bv);
for(;t<v;t++){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
var aH=p[t];
if(bq)%DebugPrepareStepInIfStepping(bv);
T=%_CallFunction((void 0),T,aH,t,p,bv);
}
}
return T;
}
function ArrayReduce(bv,T){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.reduce");
var p=(%_ToObject(this));
var v=(p.length>>>0);
return InnerArrayReduce(bv,T,p,v,
%_ArgumentsLength());
}
function InnerArrayReduceRight(bv,T,p,v,
bu){
if(!(%_ClassOf(bv)==='Function')){
throw MakeTypeError(13,bv);
}
var J=(%_IsArray(p));
var t=v-1;
find_initial:if(bu<2){
for(;t>=0;t--){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
T=p[t--];
break find_initial;
}
}
throw MakeTypeError(96);
}
var bq=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(bv);
for(;t>=0;t--){
if(((J&&%_HasFastPackedElements(%IS_VAR(p)))?(t<p.length):(t in p))){
var aH=p[t];
if(bq)%DebugPrepareStepInIfStepping(bv);
T=%_CallFunction((void 0),T,aH,t,p,bv);
}
}
return T;
}
function ArrayReduceRight(bv,T){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.reduceRight");
var p=(%_ToObject(this));
var v=(p.length>>>0);
return InnerArrayReduceRight(bv,T,p,v,
%_ArgumentsLength());
}
function ArrayIsArray(ba){
return(%_IsArray(ba));
}
%AddNamedProperty(d.prototype,"constructor",d,
2);
var bw={
__proto__:null,
copyWithin:true,
entries:true,
fill:true,
find:true,
findIndex:true,
keys:true,
};
%AddNamedProperty(d.prototype,symbolUnscopables,bw,
2|1);
b.InstallFunctions(d,2,[
"isArray",ArrayIsArray
]);
var bx=%SpecialArrayFunctions();
var by=function(bz,bA,A){
var bl=bA;
if(bx.hasOwnProperty(bz)){
bl=bx[bz];
}
if(!(A===(void 0))){
%FunctionSetLength(bl,A);
}
return bl;
};
b.InstallFunctions(d.prototype,2,[
"toString",by("toString",ArrayToString),
"toLocaleString",by("toLocaleString",ArrayToLocaleString),
"join",by("join",ArrayJoin),
"pop",by("pop",ArrayPop),
"push",by("push",ArrayPush,1),
"concat",by("concat",ArrayConcatJS,1),
"reverse",by("reverse",ArrayReverse),
"shift",by("shift",ArrayShift),
"unshift",by("unshift",ArrayUnshift,1),
"slice",by("slice",ArraySlice,2),
"splice",by("splice",ArraySplice,2),
"sort",by("sort",ArraySort),
"filter",by("filter",ArrayFilter,1),
"forEach",by("forEach",ArrayForEach,1),
"some",by("some",ArraySome,1),
"every",by("every",ArrayEvery,1),
"map",by("map",ArrayMap,1),
"indexOf",by("indexOf",ArrayIndexOf,1),
"lastIndexOf",by("lastIndexOf",ArrayLastIndexOf,1),
"reduce",by("reduce",ArrayReduce,1),
"reduceRight",by("reduceRight",ArrayReduceRight,1)
]);
%FinishArrayPrototypeSetup(d.prototype);
b.SetUpLockedPrototype(e,d(),[
"concat",by("concat",ArrayConcatJS),
"indexOf",by("indexOf",ArrayIndexOf),
"join",by("join",ArrayJoin),
"pop",by("pop",ArrayPop),
"push",by("push",ArrayPush),
"shift",by("shift",ArrayShift),
"splice",by("splice",ArraySplice)
]);
b.SetUpLockedPrototype(f,d(),[
"join",by("join",ArrayJoin),
"pop",by("pop",ArrayPop),
"push",by("push",ArrayPush),
"shift",by("shift",ArrayShift)
]);
b.Export(function(aG){
aG.ArrayIndexOf=ArrayIndexOf;
aG.ArrayJoin=ArrayJoin;
aG.ArrayToString=ArrayToString;
aG.InnerArrayEvery=InnerArrayEvery;
aG.InnerArrayFilter=InnerArrayFilter;
aG.InnerArrayForEach=InnerArrayForEach;
aG.InnerArrayIndexOf=InnerArrayIndexOf;
aG.InnerArrayJoin=InnerArrayJoin;
aG.InnerArrayLastIndexOf=InnerArrayLastIndexOf;
aG.InnerArrayMap=InnerArrayMap;
aG.InnerArrayReduce=InnerArrayReduce;
aG.InnerArrayReduceRight=InnerArrayReduceRight;
aG.InnerArraySome=InnerArraySome;
aG.InnerArraySort=InnerArraySort;
aG.InnerArrayToLocaleString=InnerArrayToLocaleString;
aG.PackedArrayReverse=PackedArrayReverse;
});
$arrayConcat=ArrayConcatJS;
$arrayPush=ArrayPush;
$arrayPop=ArrayPop;
$arrayShift=ArrayShift;
$arraySlice=ArraySlice;
$arraySplice=ArraySplice;
$arrayUnshift=ArrayUnshift;
});

string²N
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e=a.RegExp;
var f=a.String;
var g=b.InternalArray;
var h=b.InternalPackedArray;
var i;
var j;
var k;
var l;
var m;
var n;
var o;
b.Import(function(p){
c=p.ArrayIndexOf;
d=p.ArrayJoin;
i=p.MathMax;
j=p.MathMin;
k=p.RegExpExec;
l=p.RegExpExecNoTests;
m=p.RegExpLastMatchInfo;
n=p.ToNumber;
o=p.ToString;
});
function StringConstructor(q){
if(%_ArgumentsLength()==0)q='';
if(%_IsConstructCall()){
%_SetValueOf(this,((typeof(%IS_VAR(q))==='string')?q:$nonStringToString(q)));
}else{
return(typeof(q)==='symbol')?
%_CallFunction(q,$symbolToString):((typeof(%IS_VAR(q))==='string')?q:$nonStringToString(q));
}
}
function StringToString(){
if(!(typeof(this)==='string')&&!(%_ClassOf(this)==='String')){
throw MakeTypeError(58,'String.prototype.toString');
}
return %_ValueOf(this);
}
function StringValueOf(){
if(!(typeof(this)==='string')&&!(%_ClassOf(this)==='String')){
throw MakeTypeError(58,'String.prototype.valueOf');
}
return %_ValueOf(this);
}
function StringCharAtJS(r){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.charAt");
var s=%_StringCharAt(this,r);
if(%_IsSmi(s)){
s=%_StringCharAt(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)),(%_IsSmi(%IS_VAR(r))?r:%NumberToInteger(n(r))));
}
return s;
}
function StringCharCodeAtJS(r){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.charCodeAt");
var s=%_StringCharCodeAt(this,r);
if(!%_IsSmi(s)){
s=%_StringCharCodeAt(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)),(%_IsSmi(%IS_VAR(r))?r:%NumberToInteger(n(r))));
}
return s;
}
function StringConcat(t){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.concat");
var u=%_ArgumentsLength();
var v=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
if(u===1){
return v+((typeof(%IS_VAR(t))==='string')?t:$nonStringToString(t));
}
var w=new g(u+1);
w[0]=v;
for(var x=0;x<u;x++){
var y=%_Arguments(x);
w[x+1]=((typeof(%IS_VAR(y))==='string')?y:$nonStringToString(y));
}
return %StringBuilderConcat(w,u+1,"");
}
function StringIndexOfJS(z){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.indexOf");
var A=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
z=((typeof(%IS_VAR(z))==='string')?z:$nonStringToString(z));
var B=0;
if(%_ArgumentsLength()>1){
B=%_Arguments(1);
B=(%_IsSmi(%IS_VAR(B))?B:%NumberToInteger(n(B)));
if(B<0)B=0;
if(B>A.length)B=A.length;
}
return %StringIndexOf(A,z,B);
}
function StringLastIndexOfJS(C){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.lastIndexOf");
var D=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var E=D.length;
var C=((typeof(%IS_VAR(C))==='string')?C:$nonStringToString(C));
var F=C.length;
var B=E-F;
if(%_ArgumentsLength()>1){
var G=n(%_Arguments(1));
if(!(!%_IsSmi(%IS_VAR(G))&&!(G==G))){
G=(%_IsSmi(%IS_VAR(G))?G:%NumberToInteger(n(G)));
if(G<0){
G=0;
}
if(G+F<E){
B=G;
}
}
}
if(B<0){
return-1;
}
return %StringLastIndexOf(D,C,B);
}
function StringLocaleCompareJS(t){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.localeCompare");
return %StringLocaleCompare(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)),
((typeof(%IS_VAR(t))==='string')?t:$nonStringToString(t)));
}
function StringMatchJS(H){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.match");
var A=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
if((%_IsRegExp(H))){
var I=H.lastIndex;
(%_IsSmi(%IS_VAR(I))?I:n(I));
if(!H.global)return l(H,A,0);
var s=%StringMatch(A,H,m);
if(s!==null)$regexpLastMatchInfoOverride=null;
H.lastIndex=0;
return s;
}
H=new e(H);
return l(H,A,0);
}
function StringNormalizeJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.normalize");
var J=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var K=%_Arguments(0);
var L=(K===(void 0))?'NFC':((typeof(%IS_VAR(K))==='string')?K:$nonStringToString(K));
var M=['NFC','NFD','NFKC','NFKD'];
var N=
%_CallFunction(M,L,c);
if(N===-1){
throw MakeRangeError(146,
%_CallFunction(M,', ',d));
}
return J;
}
var O=[2,"","",-1,-1];
function StringReplace(P,Q){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.replace");
var A=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
if((%_IsRegExp(P))){
var I=P.lastIndex;
(%_IsSmi(%IS_VAR(I))?I:n(I));
if(!(%_ClassOf(Q)==='Function')){
Q=((typeof(%IS_VAR(Q))==='string')?Q:$nonStringToString(Q));
if(!P.global){
var R=k(P,A,0);
if(R==null){
P.lastIndex=0
return A;
}
if(Q.length==0){
return %_SubString(A,0,R[3])+
%_SubString(A,R[4],A.length)
}
return ExpandReplacement(Q,A,m,
%_SubString(A,0,R[3]))+
%_SubString(A,R[4],A.length);
}
P.lastIndex=0;
if($regexpLastMatchInfoOverride==null){
return %StringReplaceGlobalRegExpWithString(
A,P,Q,m);
}else{
var S=m[1];
m[1]=0;
var T=%StringReplaceGlobalRegExpWithString(
A,P,Q,m);
if(%_IsSmi(m[1])){
m[1]=S;
}else{
$regexpLastMatchInfoOverride=null;
}
return T;
}
}
if(P.global){
return StringReplaceGlobalRegExpWithFunction(A,P,Q);
}
return StringReplaceNonGlobalRegExpWithFunction(A,P,Q);
}
P=((typeof(%IS_VAR(P))==='string')?P:$nonStringToString(P));
if(P.length==1&&
A.length>0xFF&&
(typeof(Q)==='string')&&
%StringIndexOf(Q,'$',0)<0){
return %StringReplaceOneCharWithString(A,P,Q);
}
var U=%StringIndexOf(A,P,0);
if(U<0)return A;
var V=U+P.length;
var s=%_SubString(A,0,U);
if((%_ClassOf(Q)==='Function')){
var W=(void 0);
s+=%_CallFunction(W,P,U,A,Q);
}else{
O[3]=U;
O[4]=V;
s=ExpandReplacement(((typeof(%IS_VAR(Q))==='string')?Q:$nonStringToString(Q)),
A,
O,
s);
}
return s+%_SubString(A,V,A.length);
}
function ExpandReplacement(X,A,Y,s){
var Z=X.length;
var aa=%StringIndexOf(X,'$',0);
if(aa<0){
if(Z>0)s+=X;
return s;
}
if(aa>0)s+=%_SubString(X,0,aa);
while(true){
var ab='$';
var G=aa+1;
if(G<Z){
var ac=%_StringCharCodeAt(X,G);
if(ac==36){
++G;
s+='$';
}else if(ac==38){
++G;
s+=
%_SubString(A,Y[3],Y[4]);
}else if(ac==96){
++G;
s+=%_SubString(A,0,Y[3]);
}else if(ac==39){
++G;
s+=%_SubString(A,Y[4],A.length);
}else if(ac>=48&&ac<=57){
var ad=(ac-48)<<1;
var ae=1;
var af=((Y)[0]);
if(G+1<X.length){
var aa=%_StringCharCodeAt(X,G+1);
if(aa>=48&&aa<=57){
var ag=ad*10+((aa-48)<<1);
if(ag<af){
ad=ag;
ae=2;
}
}
}
if(ad!=0&&ad<af){
var U=Y[(3+(ad))];
if(U>=0){
s+=
%_SubString(A,U,Y[(3+(ad+1))]);
}
G+=ae;
}else{
s+='$';
}
}else{
s+='$';
}
}else{
s+='$';
}
aa=%StringIndexOf(X,'$',G);
if(aa<0){
if(G<Z){
s+=%_SubString(X,G,Z);
}
return s;
}
if(aa>G){
s+=%_SubString(X,G,aa);
}
}
return s;
}
function CaptureString(X,ah,B){
var ai=B<<1;
var U=ah[(3+(ai))];
if(U<0)return;
var V=ah[(3+(ai+1))];
return %_SubString(X,U,V);
}
var aj=new g(4);
function StringReplaceGlobalRegExpWithFunction(A,H,Q){
var ak=aj;
if(ak){
aj=null;
}else{
ak=new g(16);
}
var al=%RegExpExecMultiple(H,
A,
m,
ak);
H.lastIndex=0;
if((al===null)){
aj=ak;
return A;
}
var u=al.length;
if(((m)[0])==2){
var am=0;
var an=new h(null,0,A);
for(var x=0;x<u;x++){
var ao=al[x];
if(%_IsSmi(ao)){
if(ao>0){
am=(ao>>11)+(ao&0x7ff);
}else{
am=al[++x]-ao;
}
}else{
an[0]=ao;
an[1]=am;
$regexpLastMatchInfoOverride=an;
var ap=
%_CallFunction((void 0),ao,am,A,Q);
al[x]=((typeof(%IS_VAR(ap))==='string')?ap:$nonStringToString(ap));
am+=ao.length;
}
}
}else{
for(var x=0;x<u;x++){
var ao=al[x];
if(!%_IsSmi(ao)){
$regexpLastMatchInfoOverride=ao;
var ap=%Apply(Q,(void 0),ao,0,ao.length);
al[x]=((typeof(%IS_VAR(ap))==='string')?ap:$nonStringToString(ap));
}
}
}
var s=%StringBuilderConcat(al,al.length,A);
ak.length=0;
aj=ak;
return s;
}
function StringReplaceNonGlobalRegExpWithFunction(A,H,Q){
var Y=k(H,A,0);
if((Y===null)){
H.lastIndex=0;
return A;
}
var B=Y[3];
var s=%_SubString(A,0,B);
var aq=Y[4];
var ar=((Y)[0])>>1;
var as;
if(ar==1){
var J=%_SubString(A,B,aq);
as=%_CallFunction((void 0),J,B,A,Q);
}else{
var at=new g(ar+2);
for(var au=0;au<ar;au++){
at[au]=CaptureString(A,Y,au);
}
at[au]=B;
at[au+1]=A;
as=%Apply(Q,(void 0),at,0,au+2);
}
s+=as;
return s+%_SubString(A,aq,A.length);
}
function StringSearch(av){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.search");
var H;
if((%_IsRegExp(av))){
H=av;
}else{
H=new e(av);
}
var R=k(H,((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)),0);
if(R){
return R[3];
}
return-1;
}
function StringSlice(U,V){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.slice");
var J=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var aw=J.length;
var ax=(%_IsSmi(%IS_VAR(U))?U:%NumberToInteger(n(U)));
var ay=aw;
if(!(V===(void 0))){
ay=(%_IsSmi(%IS_VAR(V))?V:%NumberToInteger(n(V)));
}
if(ax<0){
ax+=aw;
if(ax<0){
ax=0;
}
}else{
if(ax>aw){
return'';
}
}
if(ay<0){
ay+=aw;
if(ay<0){
return'';
}
}else{
if(ay>aw){
ay=aw;
}
}
if(ay<=ax){
return'';
}
return %_SubString(J,ax,ay);
}
function StringSplitJS(az,aA){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.split");
var A=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
aA=((aA===(void 0)))?0xffffffff:(aA>>>0);
var Z=A.length;
if(!(%_IsRegExp(az))){
var aB=((typeof(%IS_VAR(az))==='string')?az:$nonStringToString(az));
if(aA===0)return[];
if((az===(void 0)))return[A];
var aC=aB.length;
if(aC===0)return %StringToArray(A,aA);
var s=%StringSplit(A,aB,aA);
return s;
}
if(aA===0)return[];
return StringSplitOnRegExp(A,az,aA,Z);
}
function StringSplitOnRegExp(A,az,aA,Z){
if(Z===0){
if(k(az,A,0,0)!=null){
return[];
}
return[A];
}
var aD=0;
var aE=0;
var aF=0;
var s=new g();
outer_loop:
while(true){
if(aE===Z){
s[s.length]=%_SubString(A,aD,Z);
break;
}
var Y=k(az,A,aE);
if(Y==null||Z===(aF=Y[3])){
s[s.length]=%_SubString(A,aD,Z);
break;
}
var aG=Y[4];
if(aE===aG&&aG===aD){
aE++;
continue;
}
s[s.length]=%_SubString(A,aD,aF);
if(s.length===aA)break;
var aH=((Y)[0])+3;
for(var x=3+2;x<aH;){
var U=Y[x++];
var V=Y[x++];
if(V!=-1){
s[s.length]=%_SubString(A,U,V);
}else{
s[s.length]=(void 0);
}
if(s.length===aA)break outer_loop;
}
aE=aD=aG;
}
var aI=[];
%MoveArrayContents(s,aI);
return aI;
}
function StringSubstring(U,V){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.subString");
var J=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var aw=J.length;
var ax=(%_IsSmi(%IS_VAR(U))?U:%NumberToInteger(n(U)));
if(ax<0){
ax=0;
}else if(ax>aw){
ax=aw;
}
var ay=aw;
if(!(V===(void 0))){
ay=(%_IsSmi(%IS_VAR(V))?V:%NumberToInteger(n(V)));
if(ay>aw){
ay=aw;
}else{
if(ay<0)ay=0;
if(ax>ay){
var aJ=ay;
ay=ax;
ax=aJ;
}
}
}
return %_SubString(J,ax,ay);
}
function StringSubstr(U,aK){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.substr");
var J=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var u;
if((aK===(void 0))){
u=J.length;
}else{
u=(%_IsSmi(%IS_VAR(aK))?aK:%NumberToInteger(n(aK)));
if(u<=0)return'';
}
if((U===(void 0))){
U=0;
}else{
U=(%_IsSmi(%IS_VAR(U))?U:%NumberToInteger(n(U)));
if(U>=J.length)return'';
if(U<0){
U+=J.length;
if(U<0)U=0;
}
}
var V=U+u;
if(V>J.length)V=J.length;
return %_SubString(J,U,V);
}
function StringToLowerCaseJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toLowerCase");
return %StringToLowerCase(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)));
}
function StringToLocaleLowerCase(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toLocaleLowerCase");
return %StringToLowerCase(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)));
}
function StringToUpperCaseJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toUpperCase");
return %StringToUpperCase(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)));
}
function StringToLocaleUpperCase(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.toLocaleUpperCase");
return %StringToUpperCase(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)));
}
function StringTrimJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.trim");
return %StringTrim(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)),true,true);
}
function StringTrimLeft(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.trimLeft");
return %StringTrim(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)),true,false);
}
function StringTrimRight(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.trimRight");
return %StringTrim(((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this)),false,true);
}
function StringFromCharCode(aL){
var aK=%_ArgumentsLength();
if(aK==1){
if(!%_IsSmi(aL))aL=n(aL);
return %_StringCharFromCode(aL&0xffff);
}
var aM=%NewString(aK,true);
var x;
for(x=0;x<aK;x++){
var aL=%_Arguments(x);
if(!%_IsSmi(aL))aL=n(aL)&0xffff;
if(aL<0)aL=aL&0xffff;
if(aL>0xff)break;
%_OneByteSeqStringSetChar(x,aL,aM);
}
if(x==aK)return aM;
aM=%TruncateString(aM,x);
var aN=%NewString(aK-x,false);
for(var au=0;x<aK;x++,au++){
var aL=%_Arguments(x);
if(!%_IsSmi(aL))aL=n(aL)&0xffff;
%_TwoByteSeqStringSetChar(au,aL,aN);
}
return aM+aN;
}
function HtmlEscape(aO){
return %_CallFunction(((typeof(%IS_VAR(aO))==='string')?aO:$nonStringToString(aO)),/"/g,"&quot;",StringReplace);
}
function StringAnchor(aP){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.anchor");
return"<a name=\""+HtmlEscape(aP)+"\">"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+
"</a>";
}
function StringBig(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.big");
return"<big>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</big>";
}
function StringBlink(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.blink");
return"<blink>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</blink>";
}
function StringBold(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.bold");
return"<b>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</b>";
}
function StringFixed(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.fixed");
return"<tt>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</tt>";
}
function StringFontcolor(aQ){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.fontcolor");
return"<font color=\""+HtmlEscape(aQ)+"\">"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+
"</font>";
}
function StringFontsize(aR){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.fontsize");
return"<font size=\""+HtmlEscape(aR)+"\">"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+
"</font>";
}
function StringItalics(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.italics");
return"<i>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</i>";
}
function StringLink(J){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.link");
return"<a href=\""+HtmlEscape(J)+"\">"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</a>";
}
function StringSmall(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.small");
return"<small>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</small>";
}
function StringStrike(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.strike");
return"<strike>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</strike>";
}
function StringSub(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.sub");
return"<sub>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</sub>";
}
function StringSup(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.sup");
return"<sup>"+((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this))+"</sup>";
}
function StringRepeat(aS){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.repeat");
var J=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var aK=$toInteger(aS);
if(aK<0||aK>%_MaxSmi())throw MakeRangeError(132);
var aT="";
while(true){
if(aK&1)aT+=J;
aK>>=1;
if(aK===0)return aT;
J+=J;
}
}
function StringStartsWith(aU){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.startsWith");
var J=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
if((%_IsRegExp(aU))){
throw MakeTypeError(31,"String.prototype.startsWith");
}
var aV=((typeof(%IS_VAR(aU))==='string')?aU:$nonStringToString(aU));
var r=0;
if(%_ArgumentsLength()>1){
r=%_Arguments(1);
r=$toInteger(r);
}
var aw=J.length;
var U=j(i(r,0),aw);
var aW=aV.length;
if(aW+U>aw){
return false;
}
return %StringIndexOf(J,aV,U)===U;
}
function StringEndsWith(aU){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.endsWith");
var J=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
if((%_IsRegExp(aU))){
throw MakeTypeError(31,"String.prototype.endsWith");
}
var aV=((typeof(%IS_VAR(aU))==='string')?aU:$nonStringToString(aU));
var aw=J.length;
var r=aw;
if(%_ArgumentsLength()>1){
var aX=%_Arguments(1);
if(!(aX===(void 0))){
r=$toInteger(aX);
}
}
var V=j(i(r,0),aw);
var aW=aV.length;
var U=V-aW;
if(U<0){
return false;
}
return %StringLastIndexOf(J,aV,U)===U;
}
function StringIncludes(aU){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.includes");
var X=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
if((%_IsRegExp(aU))){
throw MakeTypeError(31,"String.prototype.includes");
}
aU=((typeof(%IS_VAR(aU))==='string')?aU:$nonStringToString(aU));
var r=0;
if(%_ArgumentsLength()>1){
r=%_Arguments(1);
r=(%_IsSmi(%IS_VAR(r))?r:%NumberToInteger(n(r)));
}
var aY=X.length;
if(r<0)r=0;
if(r>aY)r=aY;
var aZ=aU.length;
if(aZ+r>aY){
return false;
}
return %StringIndexOf(X,aU,r)!==-1;
}
function StringCodePointAt(r){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.codePointAt");
var X=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var aR=X.length;
r=(%_IsSmi(%IS_VAR(r))?r:%NumberToInteger(n(r)));
if(r<0||r>=aR){
return(void 0);
}
var ba=%_StringCharCodeAt(X,r);
if(ba<0xD800||ba>0xDBFF||r+1==aR){
return ba;
}
var bb=%_StringCharCodeAt(X,r+1);
if(bb<0xDC00||bb>0xDFFF){
return ba;
}
return(ba-0xD800)*0x400+bb+0x2400;
}
function StringFromCodePoint(bc){
var aL;
var Z=%_ArgumentsLength();
var B;
var s="";
for(B=0;B<Z;B++){
aL=%_Arguments(B);
if(!%_IsSmi(aL)){
aL=n(aL);
}
if(aL<0||aL>0x10FFFF||aL!==(%_IsSmi(%IS_VAR(aL))?aL:%NumberToInteger(n(aL)))){
throw MakeRangeError(131,aL);
}
if(aL<=0xFFFF){
s+=%_StringCharFromCode(aL);
}else{
aL-=0x10000;
s+=%_StringCharFromCode((aL>>>10)&0x3FF|0xD800);
s+=%_StringCharFromCode(aL&0x3FF|0xDC00);
}
}
return s;
}
function StringRaw(bd){
var be=%_ArgumentsLength();
var bf=(%_ToObject(bd));
var bg=(%_ToObject(bf.raw));
var bh=$toLength(bg.length);
if(bh<=0)return"";
var s=o(bg[0]);
for(var x=1;x<bh;++x){
if(x<be){
s+=o(%_Arguments(x));
}
s+=o(bg[x]);
}
return s;
}
%SetCode(f,StringConstructor);
%FunctionSetPrototype(f,new f());
%AddNamedProperty(
f.prototype,"constructor",f,2);
b.InstallFunctions(f,2,[
"fromCharCode",StringFromCharCode,
"fromCodePoint",StringFromCodePoint,
"raw",StringRaw
]);
b.InstallFunctions(f.prototype,2,[
"valueOf",StringValueOf,
"toString",StringToString,
"charAt",StringCharAtJS,
"charCodeAt",StringCharCodeAtJS,
"codePointAt",StringCodePointAt,
"concat",StringConcat,
"endsWith",StringEndsWith,
"includes",StringIncludes,
"indexOf",StringIndexOfJS,
"lastIndexOf",StringLastIndexOfJS,
"localeCompare",StringLocaleCompareJS,
"match",StringMatchJS,
"normalize",StringNormalizeJS,
"repeat",StringRepeat,
"replace",StringReplace,
"search",StringSearch,
"slice",StringSlice,
"split",StringSplitJS,
"substring",StringSubstring,
"substr",StringSubstr,
"startsWith",StringStartsWith,
"toLowerCase",StringToLowerCaseJS,
"toLocaleLowerCase",StringToLocaleLowerCase,
"toUpperCase",StringToUpperCaseJS,
"toLocaleUpperCase",StringToLocaleUpperCase,
"trim",StringTrimJS,
"trimLeft",StringTrimLeft,
"trimRight",StringTrimRight,
"link",StringLink,
"anchor",StringAnchor,
"fontcolor",StringFontcolor,
"fontsize",StringFontsize,
"big",StringBig,
"blink",StringBlink,
"bold",StringBold,
"fixed",StringFixed,
"italics",StringItalics,
"small",StringSmall,
"strike",StringStrike,
"sub",StringSub,
"sup",StringSup
]);
b.Export(function(bi){
bi.StringCharAt=StringCharAtJS;
bi.StringIndexOf=StringIndexOfJS;
bi.StringLastIndexOf=StringLastIndexOfJS;
bi.StringMatch=StringMatchJS;
bi.StringReplace=StringReplace;
bi.StringSlice=StringSlice;
bi.StringSplit=StringSplitJS;
bi.StringSubstr=StringSubstr;
bi.StringSubstring=StringSubstring;
});
})

uri-[
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.Array;
var e=b.InternalArray;
var f;
b.Import(function(g){
f=g.ToString;
});
function HexValueOf(h){
if(h>=48&&h<=57)return h-48;
if(h>=65&&h<=70)return h-55;
if(h>=97&&h<=102)return h-87;
return-1;
}
function isAlphaNumeric(i){
if(97<=i&&i<=122)return true;
if(65<=i&&i<=90)return true;
if(48<=i&&i<=57)return true;
return false;
}
var j=0;
function URIAddEncodedOctetToBuffer(k,l,m){
l[m++]=37;
l[m++]=j[k>>4];
l[m++]=j[k&0x0F];
return m;
}
function URIEncodeOctets(n,l,m){
if(j===0){
j=[48,49,50,51,52,53,54,55,56,57,
65,66,67,68,69,70];
}
m=URIAddEncodedOctetToBuffer(n[0],l,m);
if(n[1])m=URIAddEncodedOctetToBuffer(n[1],l,m);
if(n[2])m=URIAddEncodedOctetToBuffer(n[2],l,m);
if(n[3])m=URIAddEncodedOctetToBuffer(n[3],l,m);
return m;
}
function URIEncodeSingle(i,l,m){
var o=(i>>12)&0xF;
var p=(i>>6)&63;
var q=i&63;
var n=new d(3);
if(i<=0x007F){
n[0]=i;
}else if(i<=0x07FF){
n[0]=p+192;
n[1]=q+128;
}else{
n[0]=o+224;
n[1]=p+128;
n[2]=q+128;
}
return URIEncodeOctets(n,l,m);
}
function URIEncodePair(r,s,l,m){
var t=((r>>6)&0xF)+1;
var u=(r>>2)&0xF;
var o=r&3;
var p=(s>>6)&0xF;
var q=s&63;
var n=new d(4);
n[0]=(t>>2)+240;
n[1]=(((t&3)<<4)|u)+128;
n[2]=((o<<4)|p)+128;
n[3]=q+128;
return URIEncodeOctets(n,l,m);
}
function URIHexCharsToCharCode(v,w){
var x=HexValueOf(v);
var y=HexValueOf(w);
if(x==-1||y==-1)throw MakeURIError();
return(x<<4)|y;
}
function URIDecodeOctets(n,l,m){
var z;
var A=n[0];
if(A<0x80){
z=A;
}else if(A<0xc2){
throw MakeURIError();
}else{
var B=n[1];
if(A<0xe0){
var C=A&0x1f;
if((B<0x80)||(B>0xbf))throw MakeURIError();
var D=B&0x3f;
z=(C<<6)+D;
if(z<0x80||z>0x7ff)throw MakeURIError();
}else{
var E=n[2];
if(A<0xf0){
var C=A&0x0f;
if((B<0x80)||(B>0xbf))throw MakeURIError();
var D=B&0x3f;
if((E<0x80)||(E>0xbf))throw MakeURIError();
var F=E&0x3f;
z=(C<<12)+(D<<6)+F;
if((z<0x800)||(z>0xffff))throw MakeURIError();
}else{
var G=n[3];
if(A<0xf8){
var C=(A&0x07);
if((B<0x80)||(B>0xbf))throw MakeURIError();
var D=(B&0x3f);
if((E<0x80)||(E>0xbf)){
throw MakeURIError();
}
var F=(E&0x3f);
if((G<0x80)||(G>0xbf))throw MakeURIError();
var H=(G&0x3f);
z=(C<<18)+(D<<12)+(F<<6)+H;
if((z<0x10000)||(z>0x10ffff))throw MakeURIError();
}else{
throw MakeURIError();
}
}
}
}
if(0xD800<=z&&z<=0xDFFF)throw MakeURIError();
if(z<0x10000){
%_TwoByteSeqStringSetChar(m++,z,l);
}else{
%_TwoByteSeqStringSetChar(m++,(z>>10)+0xd7c0,l);
%_TwoByteSeqStringSetChar(m++,(z&0x3ff)+0xdc00,l);
}
return m;
}
function Encode(I,J){
I=((typeof(%IS_VAR(I))==='string')?I:$nonStringToString(I));
var K=I.length;
var L=new e(K);
var m=0;
for(var M=0;M<K;M++){
var r=%_StringCharCodeAt(I,M);
if(J(r)){
L[m++]=r;
}else{
if(r>=0xDC00&&r<=0xDFFF)throw MakeURIError();
if(r<0xD800||r>0xDBFF){
m=URIEncodeSingle(r,L,m);
}else{
M++;
if(M==K)throw MakeURIError();
var s=%_StringCharCodeAt(I,M);
if(s<0xDC00||s>0xDFFF)throw MakeURIError();
m=URIEncodePair(r,s,L,m);
}
}
}
var l=%NewString(L.length,true);
for(var N=0;N<L.length;N++){
%_OneByteSeqStringSetChar(N,L[N],l);
}
return l;
}
function Decode(I,O){
I=((typeof(%IS_VAR(I))==='string')?I:$nonStringToString(I));
var K=I.length;
var P=%NewString(K,true);
var m=0;
var M=0;
for(;M<K;M++){
var h=%_StringCharCodeAt(I,M);
if(h==37){
if(M+2>=K)throw MakeURIError();
var i=URIHexCharsToCharCode(%_StringCharCodeAt(I,M+1),
%_StringCharCodeAt(I,M+2));
if(i>>7)break;
if(O(i)){
%_OneByteSeqStringSetChar(m++,37,P);
%_OneByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M+1),
P);
%_OneByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M+2),
P);
}else{
%_OneByteSeqStringSetChar(m++,i,P);
}
M+=2;
}else{
if(h>0x7f)break;
%_OneByteSeqStringSetChar(m++,h,P);
}
}
P=%TruncateString(P,m);
if(M==K)return P;
var Q=%NewString(K-M,false);
m=0;
for(;M<K;M++){
var h=%_StringCharCodeAt(I,M);
if(h==37){
if(M+2>=K)throw MakeURIError();
var i=URIHexCharsToCharCode(%_StringCharCodeAt(I,++M),
%_StringCharCodeAt(I,++M));
if(i>>7){
var R=0;
while(((i<<++R)&0x80)!=0){}
if(R==1||R>4)throw MakeURIError();
var n=new d(R);
n[0]=i;
if(M+3*(R-1)>=K)throw MakeURIError();
for(var N=1;N<R;N++){
if(I[++M]!='%')throw MakeURIError();
n[N]=URIHexCharsToCharCode(%_StringCharCodeAt(I,++M),
%_StringCharCodeAt(I,++M));
}
m=URIDecodeOctets(n,Q,m);
}else if(O(i)){
%_TwoByteSeqStringSetChar(m++,37,Q);
%_TwoByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M-1),
Q);
%_TwoByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M),
Q);
}else{
%_TwoByteSeqStringSetChar(m++,i,Q);
}
}else{
%_TwoByteSeqStringSetChar(m++,h,Q);
}
}
Q=%TruncateString(Q,m);
return P+Q;
}
function URIEscapeJS(S){
var T=f(S);
return %URIEscape(T);
}
function URIUnescapeJS(S){
var T=f(S);
return %URIUnescape(T);
}
function URIDecode(I){
var U=function(i){
if(35<=i&&i<=36)return true;
if(i==38)return true;
if(43<=i&&i<=44)return true;
if(i==47)return true;
if(58<=i&&i<=59)return true;
if(i==61)return true;
if(63<=i&&i<=64)return true;
return false;
};
var V=f(I);
return Decode(V,U);
}
function URIDecodeComponent(W){
var U=function(i){return false;};
var V=f(W);
return Decode(V,U);
}
function URIEncode(I){
var X=function(i){
if(isAlphaNumeric(i))return true;
if(i==33)return true;
if(35<=i&&i<=36)return true;
if(38<=i&&i<=47)return true;
if(58<=i&&i<=59)return true;
if(i==61)return true;
if(63<=i&&i<=64)return true;
if(i==95)return true;
if(i==126)return true;
return false;
};
var V=f(I);
return Encode(V,X);
}
function URIEncodeComponent(W){
var X=function(i){
if(isAlphaNumeric(i))return true;
if(i==33)return true;
if(39<=i&&i<=42)return true;
if(45<=i&&i<=46)return true;
if(i==95)return true;
if(i==126)return true;
return false;
};
var V=f(W);
return Encode(V,X);
}
b.InstallFunctions(a,2,[
"escape",URIEscapeJS,
"unescape",URIUnescapeJS,
"decodeURI",URIDecode,
"decodeURIComponent",URIDecodeComponent,
"encodeURI",URIEncode,
"encodeURIComponent",URIEncodeComponent
]);
})

mathí^
var rngstate;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Math;
var d=a.Object;
var e=b.InternalArray;
function MathAbs(f){
f=+f;
return(f>0)?f:0-f;
}
function MathAcosJS(f){
return %_MathAcos(+f);
}
function MathAsinJS(f){
return %_MathAsin(+f);
}
function MathAtanJS(f){
return %_MathAtan(+f);
}
function MathAtan2JS(g,f){
g=+g;
f=+f;
return %_MathAtan2(g,f);
}
function MathCeil(f){
return-%_MathFloor(-f);
}
function MathExp(f){
return %MathExpRT(((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f)));
}
function MathFloorJS(f){
return %_MathFloor(+f);
}
function MathLog(f){
return %_MathLogRT(((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f)));
}
function MathMax(h,i){
var j=%_ArgumentsLength();
if(j==2){
h=((typeof(%IS_VAR(h))==='number')?h:$nonNumberToNumber(h));
i=((typeof(%IS_VAR(i))==='number')?i:$nonNumberToNumber(i));
if(i>h)return i;
if(h>i)return h;
if(h==i){
return(h===0&&%_IsMinusZero(h))?i:h;
}
return $NaN;
}
var k=-(1/0);
for(var l=0;l<j;l++){
var m=%_Arguments(l);
m=((typeof(%IS_VAR(m))==='number')?m:$nonNumberToNumber(m));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m))||m>k||(k===0&&m===0&&%_IsMinusZero(k))){
k=m;
}
}
return k;
}
function MathMin(h,i){
var j=%_ArgumentsLength();
if(j==2){
h=((typeof(%IS_VAR(h))==='number')?h:$nonNumberToNumber(h));
i=((typeof(%IS_VAR(i))==='number')?i:$nonNumberToNumber(i));
if(i>h)return h;
if(h>i)return i;
if(h==i){
return(h===0&&%_IsMinusZero(h))?h:i;
}
return $NaN;
}
var k=(1/0);
for(var l=0;l<j;l++){
var m=%_Arguments(l);
m=((typeof(%IS_VAR(m))==='number')?m:$nonNumberToNumber(m));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m))||m<k||(k===0&&m===0&&%_IsMinusZero(m))){
k=m;
}
}
return k;
}
function MathPowJS(f,g){
return %_MathPow(((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f)),((typeof(%IS_VAR(g))==='number')?g:$nonNumberToNumber(g)));
}
function MathRandom(){
var n=(MathImul(18030,rngstate[0]&0xFFFF)+(rngstate[0]>>>16))|0;
rngstate[0]=n;
var o=(MathImul(36969,rngstate[1]&0xFFFF)+(rngstate[1]>>>16))|0;
rngstate[1]=o;
var f=((n<<16)+(o&0xFFFF))|0;
return(f<0?(f+0x100000000):f)*2.3283064365386962890625e-10;
}
function MathRandomRaw(){
var n=(MathImul(18030,rngstate[0]&0xFFFF)+(rngstate[0]>>>16))|0;
rngstate[0]=n;
var o=(MathImul(36969,rngstate[1]&0xFFFF)+(rngstate[1]>>>16))|0;
rngstate[1]=o;
var f=((n<<16)+(o&0xFFFF))|0;
return f&0x3fffffff;
}
function MathRound(f){
return %RoundNumber(((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f)));
}
function MathSqrtJS(f){
return %_MathSqrt(+f);
}
function MathImul(f,g){
return %NumberImul(((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f)),((typeof(%IS_VAR(g))==='number')?g:$nonNumberToNumber(g)));
}
function MathSign(f){
f=+f;
if(f>0)return 1;
if(f<0)return-1;
return f;
}
function MathTrunc(f){
f=+f;
if(f>0)return %_MathFloor(f);
if(f<0)return-%_MathFloor(-f);
return f;
}
function MathTanh(f){
f=((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f));
if(f===0)return f;
if(!(%_IsSmi(%IS_VAR(f))||((f==f)&&(f!=1/0)&&(f!=-1/0))))return MathSign(f);
var p=MathExp(f);
var q=MathExp(-f);
return(p-q)/(p+q);
}
function MathAsinh(f){
f=((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f));
if(f===0||!(%_IsSmi(%IS_VAR(f))||((f==f)&&(f!=1/0)&&(f!=-1/0))))return f;
if(f>0)return MathLog(f+%_MathSqrt(f*f+1));
return-MathLog(-f+%_MathSqrt(f*f+1));
}
function MathAcosh(f){
f=((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f));
if(f<1)return $NaN;
if(!(%_IsSmi(%IS_VAR(f))||((f==f)&&(f!=1/0)&&(f!=-1/0))))return f;
return MathLog(f+%_MathSqrt(f+1)*%_MathSqrt(f-1));
}
function MathAtanh(f){
f=((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f));
if(f===0)return f;
if(!(%_IsSmi(%IS_VAR(f))||((f==f)&&(f!=1/0)&&(f!=-1/0))))return $NaN;
return 0.5*MathLog((1+f)/(1-f));
}
function MathHypot(f,g){
var j=%_ArgumentsLength();
var r=new e(j);
var s=0;
for(var l=0;l<j;l++){
var m=%_Arguments(l);
m=((typeof(%IS_VAR(m))==='number')?m:$nonNumberToNumber(m));
if(m===(1/0)||m===-(1/0))return(1/0);
m=MathAbs(m);
if(m>s)s=m;
r[l]=m;
}
if(s===0)s=1;
var t=0;
var u=0;
for(var l=0;l<j;l++){
var m=r[l]/s;
var v=m*m-u;
var w=t+v;
u=(w-t)-v;
t=w;
}
return %_MathSqrt(t)*s;
}
function MathFroundJS(f){
return %MathFround(((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f)));
}
function MathClz32JS(f){
return %_MathClz32(f>>>0);
}
function MathCbrt(f){
f=((typeof(%IS_VAR(f))==='number')?f:$nonNumberToNumber(f));
if(f==0||!(%_IsSmi(%IS_VAR(f))||((f==f)&&(f!=1/0)&&(f!=-1/0))))return f;
return f>=0?CubeRoot(f):-CubeRoot(-f);
}
function CubeRoot(f){
var x=MathFloorJS(%_DoubleHi(f)/3)+0x2A9F7893;
var y=%_ConstructDouble(x,0);
y=(1.0/3.0)*(f/(y*y)+2*y);
;
y=(1.0/3.0)*(f/(y*y)+2*y);
;
y=(1.0/3.0)*(f/(y*y)+2*y);
;
return(1.0/3.0)*(f/(y*y)+2*y);
;
}
%AddNamedProperty(c,symbolToStringTag,"Math",1|2);
b.InstallConstants(c,[
"E",2.7182818284590452354,
"LN10",2.302585092994046,
"LN2",0.6931471805599453,
"LOG2E",1.4426950408889634,
"LOG10E",0.4342944819032518,
"PI",3.1415926535897932,
"SQRT1_2",0.7071067811865476,
"SQRT2",1.4142135623730951
]);
b.InstallFunctions(c,2,[
"random",MathRandom,
"abs",MathAbs,
"acos",MathAcosJS,
"asin",MathAsinJS,
"atan",MathAtanJS,
"ceil",MathCeil,
"exp",MathExp,
"floor",MathFloorJS,
"log",MathLog,
"round",MathRound,
"sqrt",MathSqrtJS,
"atan2",MathAtan2JS,
"pow",MathPowJS,
"max",MathMax,
"min",MathMin,
"imul",MathImul,
"sign",MathSign,
"trunc",MathTrunc,
"tanh",MathTanh,
"asinh",MathAsinh,
"acosh",MathAcosh,
"atanh",MathAtanh,
"hypot",MathHypot,
"fround",MathFroundJS,
"clz32",MathClz32JS,
"cbrt",MathCbrt
]);
%SetForceInlineFlag(MathAbs);
%SetForceInlineFlag(MathAcosJS);
%SetForceInlineFlag(MathAsinJS);
%SetForceInlineFlag(MathAtanJS);
%SetForceInlineFlag(MathAtan2JS);
%SetForceInlineFlag(MathCeil);
%SetForceInlineFlag(MathClz32JS);
%SetForceInlineFlag(MathFloorJS);
%SetForceInlineFlag(MathRandom);
%SetForceInlineFlag(MathSign);
%SetForceInlineFlag(MathSqrtJS);
%SetForceInlineFlag(MathTrunc);
b.Export(function(z){
z.MathAbs=MathAbs;
z.MathExp=MathExp;
z.MathFloor=MathFloorJS;
z.IntRandom=MathRandomRaw;
z.MathMax=MathMax;
z.MathMin=MathMin;
});
})

fdlibm-¨
var kMath;
var rempio2result;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Math;
var d;
var e;
b.Import(function(f){
d=f.MathAbs;
e=f.MathExp;
});





















function KernelTan(g,h,i){
var j;
var k;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x3e300000){
if(((m|%_DoubleLo(g))|(i+1))==0){
return 1/d(g);
}else{
if(i==1){
return g;
}else{
var k=g+h;
var j=%_ConstructDouble(%_DoubleHi(k),0);
var n=h-(j-g);
var o=-1/k;
var p=%_ConstructDouble(%_DoubleHi(o),0);
var q=1+p*j;
return p+o*(q+p*n);
}
}
}
if(m>=0x3fe59428){
if(g<0){
g=-g;
h=-h;
}
j=kMath[32]-g;
k=kMath[33]-h;
g=j+k;
h=0;
}
j=g*g;
k=j*j;
var r=kMath[19+1]
+k*(kMath[19+3]
+k*(kMath[19+5]
+
k*(kMath[19+7]
+k*(kMath[19+9]
+k*kMath[19+11]
))));
var n=j*(kMath[19+2]
+k*(kMath[19+4]
+k*(kMath[19+6]
+
k*(kMath[19+8]
+k*(kMath[19+10]
+k*kMath[19+12]
)))));
var q=j*g;
r=h+j*(q*(r+n)+h);
r=r+kMath[19+0]
*q;
k=g+r;
if(m>=0x3fe59428){
return(1-((l>>30)&2))*
(i-2.0*(g-(k*k/(k+i)-r)));
}
if(i==1){
return k;
}else{
j=%_ConstructDouble(%_DoubleHi(k),0);
n=r-(j-g);
var o=-1/k;
var p=%_ConstructDouble(%_DoubleHi(o),0);
q=1+p*j;
return p+o*(q+p*n);
}
}
function MathSinSlow(g){
var s,t,u;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x4002d97c){
if(l>0){
var j=g-kMath[1];
if(m!=0x3ff921fb){
t=j-kMath[2];
u=(j-t)-kMath[2];
}else{
j-=kMath[3];
t=j-kMath[4];
u=(j-t)-kMath[4];
}
s=1;
}else{
var j=g+kMath[1];
if(m!=0x3ff921fb){
t=j+kMath[2];
u=(j-t)+kMath[2];
}else{
j+=kMath[3];
t=j+kMath[4];
u=(j-t)+kMath[4];
}
s=-1;
}
}else if(m<=0x413921fb){
var p=d(g);
s=(p*kMath[0]+0.5)|0;
var r=p-s*kMath[1];
var k=s*kMath[2];
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x1000000){
p=r;
k=s*kMath[3];
r=p-k;
k=s*kMath[4]-((p-r)-k);
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x3100000){
p=r;
k=s*kMath[5];
r=p-k;
k=s*kMath[6]-((p-r)-k);
t=r-k;
}
}
u=(r-t)-k;
if(l<0){
s=-s;
t=-t;
u=-u;
}
}else{
s=%RemPiO2(g,rempio2result);
t=rempio2result[0];
u=rempio2result[1];
}
;
var v=1-(s&2);
if(s&1){
var m=%_DoubleHi(t)&0x7fffffff;
var j=t*t;
var r=j*(4.16666666666666019037e-02+j*(-1.38888888888741095749e-03+j*(2.48015872894767294178e-05+j*(-2.75573143513906633035e-07+j*(2.08757232129817482790e-09+j*-1.13596475577881948265e-11)))));
if(m<0x3fd33333){
return(1-(0.5*j-(j*r-t*u)))*v;
}else{
var w;
if(m>0x3fe90000){
w=0.28125;
}else{
w=%_ConstructDouble(%_DoubleHi(0.25*t),0);
}
var x=0.5*j-w;
return(1-w-(x-(j*r-t*u)))*v;
}
;
}else{
var j=t*t;
var n=j*t;
var r=8.33333333332248946124e-03+j*(-1.98412698298579493134e-04+j*(2.75573137070700676789e-06+j*(-2.50507602534068634195e-08+j*1.58969099521155010221e-10)));
return(t-((j*(0.5*u-n*r)-u)-n*-1.66666666666666324348e-01))*v;
;
}
}
function MathCosSlow(g){
var s,t,u;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x4002d97c){
if(l>0){
var j=g-kMath[1];
if(m!=0x3ff921fb){
t=j-kMath[2];
u=(j-t)-kMath[2];
}else{
j-=kMath[3];
t=j-kMath[4];
u=(j-t)-kMath[4];
}
s=1;
}else{
var j=g+kMath[1];
if(m!=0x3ff921fb){
t=j+kMath[2];
u=(j-t)+kMath[2];
}else{
j+=kMath[3];
t=j+kMath[4];
u=(j-t)+kMath[4];
}
s=-1;
}
}else if(m<=0x413921fb){
var p=d(g);
s=(p*kMath[0]+0.5)|0;
var r=p-s*kMath[1];
var k=s*kMath[2];
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x1000000){
p=r;
k=s*kMath[3];
r=p-k;
k=s*kMath[4]-((p-r)-k);
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x3100000){
p=r;
k=s*kMath[5];
r=p-k;
k=s*kMath[6]-((p-r)-k);
t=r-k;
}
}
u=(r-t)-k;
if(l<0){
s=-s;
t=-t;
u=-u;
}
}else{
s=%RemPiO2(g,rempio2result);
t=rempio2result[0];
u=rempio2result[1];
}
;
if(s&1){
var v=(s&2)-1;
var j=t*t;
var n=j*t;
var r=8.33333333332248946124e-03+j*(-1.98412698298579493134e-04+j*(2.75573137070700676789e-06+j*(-2.50507602534068634195e-08+j*1.58969099521155010221e-10)));
return(t-((j*(0.5*u-n*r)-u)-n*-1.66666666666666324348e-01))*v;
;
}else{
var v=1-(s&2);
var m=%_DoubleHi(t)&0x7fffffff;
var j=t*t;
var r=j*(4.16666666666666019037e-02+j*(-1.38888888888741095749e-03+j*(2.48015872894767294178e-05+j*(-2.75573143513906633035e-07+j*(2.08757232129817482790e-09+j*-1.13596475577881948265e-11)))));
if(m<0x3fd33333){
return(1-(0.5*j-(j*r-t*u)))*v;
}else{
var w;
if(m>0x3fe90000){
w=0.28125;
}else{
w=%_ConstructDouble(%_DoubleHi(0.25*t),0);
}
var x=0.5*j-w;
return(1-w-(x-(j*r-t*u)))*v;
}
;
}
}
function MathSin(g){
g=+g;
if((%_DoubleHi(g)&0x7fffffff)<=0x3fe921fb){
var j=g*g;
var n=j*g;
var r=8.33333333332248946124e-03+j*(-1.98412698298579493134e-04+j*(2.75573137070700676789e-06+j*(-2.50507602534068634195e-08+j*1.58969099521155010221e-10)));
return(g-((j*(0.5*0-n*r)-0)-n*-1.66666666666666324348e-01));
;
}
return+MathSinSlow(g);
}
function MathCos(g){
g=+g;
if((%_DoubleHi(g)&0x7fffffff)<=0x3fe921fb){
var m=%_DoubleHi(g)&0x7fffffff;
var j=g*g;
var r=j*(4.16666666666666019037e-02+j*(-1.38888888888741095749e-03+j*(2.48015872894767294178e-05+j*(-2.75573143513906633035e-07+j*(2.08757232129817482790e-09+j*-1.13596475577881948265e-11)))));
if(m<0x3fd33333){
return(1-(0.5*j-(j*r-g*0)));
}else{
var w;
if(m>0x3fe90000){
w=0.28125;
}else{
w=%_ConstructDouble(%_DoubleHi(0.25*g),0);
}
var x=0.5*j-w;
return(1-w-(x-(j*r-g*0)));
}
;
}
return+MathCosSlow(g);
}
function MathTan(g){
g=g*1;
if((%_DoubleHi(g)&0x7fffffff)<=0x3fe921fb){
return KernelTan(g,0,1);
}
var s,t,u;
var l=%_DoubleHi(g);
var m=l&0x7fffffff;
if(m<0x4002d97c){
if(l>0){
var j=g-kMath[1];
if(m!=0x3ff921fb){
t=j-kMath[2];
u=(j-t)-kMath[2];
}else{
j-=kMath[3];
t=j-kMath[4];
u=(j-t)-kMath[4];
}
s=1;
}else{
var j=g+kMath[1];
if(m!=0x3ff921fb){
t=j+kMath[2];
u=(j-t)+kMath[2];
}else{
j+=kMath[3];
t=j+kMath[4];
u=(j-t)+kMath[4];
}
s=-1;
}
}else if(m<=0x413921fb){
var p=d(g);
s=(p*kMath[0]+0.5)|0;
var r=p-s*kMath[1];
var k=s*kMath[2];
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x1000000){
p=r;
k=s*kMath[3];
r=p-k;
k=s*kMath[4]-((p-r)-k);
t=r-k;
if(m-(%_DoubleHi(t)&0x7ff00000)>0x3100000){
p=r;
k=s*kMath[5];
r=p-k;
k=s*kMath[6]-((p-r)-k);
t=r-k;
}
}
u=(r-t)-k;
if(l<0){
s=-s;
t=-t;
u=-u;
}
}else{
s=%RemPiO2(g,rempio2result);
t=rempio2result[0];
u=rempio2result[1];
}
;
return KernelTan(t,u,(s&1)?-1:1);
}




function MathLog1p(g){
g=g*1;
var l=%_DoubleHi(g);
var y=l&0x7fffffff;
var z=1;
var A=g;
var B=1;
var C=0;
var D=g;
if(l<0x3fda827a){
if(y>=0x3ff00000){
if(g===-1){
return-(1/0);
}else{
return $NaN;
}
}else if(y<0x3c900000){
return g;
}else if(y<0x3e200000){
return g-g*g*0.5;
}
if((l>0)||(l<=-0x402D413D)){
z=0;
}
}
if(l>=0x7ff00000)return g;
if(z!==0){
if(l<0x43400000){
D=1+g;
B=%_DoubleHi(D);
z=(B>>20)-1023;
C=(z>0)?1-(D-g):g-(D-1);
C=C/D;
}else{
B=%_DoubleHi(D);
z=(B>>20)-1023;
}
B=B&0xfffff;
if(B<0x6a09e){
D=%_ConstructDouble(B|0x3ff00000,%_DoubleLo(D));
}else{
++z;
D=%_ConstructDouble(B|0x3fe00000,%_DoubleLo(D));
B=(0x00100000-B)>>2;
}
A=D-1;
}
var E=0.5*A*A;
if(B===0){
if(A===0){
if(z===0){
return 0.0;
}else{
return z*kMath[34]+(C+z*kMath[35]);
}
}
var F=E*(1-kMath[36]*A);
if(z===0){
return A-F;
}else{
return z*kMath[34]-((F-(z*kMath[35]+C))-A);
}
}
var q=A/(2+A);
var j=q*q;
var F=j*((kMath[37+0])
+j*((kMath[37+1])
+j*
((kMath[37+2])
+j*((kMath[37+3])
+j*
((kMath[37+4])
+j*((kMath[37+5])
+j*(kMath[37+6])
))))));
if(z===0){
return A-(E-q*(E+F));
}else{
return z*kMath[34]-((E-(q*(E+F)+(z*kMath[35]+C)))-A);
}
}


function MathExpm1(g){
g=g*1;
var h;
var G;
var H;
var z;
var p;
var C;
var l=%_DoubleHi(g);
var I=l&0x80000000;
var h=(I===0)?g:-g;
l&=0x7fffffff;
if(l>=0x4043687a){
if(l>=0x40862e42){
if(l>=0x7ff00000){
return(g===-(1/0))?-1:g;
}
if(g>kMath[44])return(1/0);
}
if(I!=0)return-1;
}
if(l>0x3fd62e42){
if(l<0x3ff0a2b2){
if(I===0){
G=g-kMath[34];
H=kMath[35];
z=1;
}else{
G=g+kMath[34];
H=-kMath[35];
z=-1;
}
}else{
z=(kMath[45]*g+((I===0)?0.5:-0.5))|0;
p=z;
G=g-p*kMath[34];
H=p*kMath[35];
}
g=G-H;
C=(G-g)-H;
}else if(l<0x3c900000){
return g;
}else{
z=0;
}
var J=0.5*g;
var K=g*J;
var L=1+K*((kMath[46+0])
+K*((kMath[46+1])
+K*
((kMath[46+2])
+K*((kMath[46+3])
+K*(kMath[46+4])
))));
p=3-L*J;
var M=K*((L-p)/(6-g*p));
if(z===0){
return g-(g*M-K);
}else{
M=(g*(M-C)-C);
M-=K;
if(z===-1)return 0.5*(g-M)-0.5;
if(z===1){
if(g<-0.25)return-2*(M-(g+0.5));
return 1+2*(g-M);
}
if(z<=-2||z>56){
h=1-(M-g);
h=%_ConstructDouble(%_DoubleHi(h)+(z<<20),%_DoubleLo(h));
return h-1;
}
if(z<20){
p=%_ConstructDouble(0x3ff00000-(0x200000>>z),0);
h=p-(M-g);
h=%_ConstructDouble(%_DoubleHi(h)+(z<<20),%_DoubleLo(h));
}else{
p=%_ConstructDouble((0x3ff-z)<<20,0);
h=g-(M+p);
h+=1;
h=%_ConstructDouble(%_DoubleHi(h)+(z<<20),%_DoubleLo(h));
}
}
return h;
}



function MathSinh(g){
g=g*1;
var N=(g<0)?-0.5:0.5;
var y=d(g);
if(y<22){
if(y<3.725290298461914e-9)return g;
var p=MathExpm1(y);
if(y<1)return N*(2*p-p*p/(p+1));
return N*(p+p/(p+1));
}
if(y<709.7822265625)return N*e(y);
if(y<=kMath[51]){
var k=e(0.5*y);
var p=N*k;
return p*k;
}
return g*(1/0);
}

function MathCosh(g){
g=g*1;
var m=%_DoubleHi(g)&0x7fffffff;
if(m<0x3fd62e43){
var p=MathExpm1(d(g));
var k=1+p;
if(m<0x3c800000)return k;
return 1+(p*p)/(k+k);
}
if(m<0x40360000){
var p=e(d(g));
return 0.5*p+0.5/p;
}
if(m<0x40862e42)return 0.5*e(d(g));
if(d(g)<=kMath[51]){
var k=e(0.5*d(g));
var p=0.5*k;
return p*k;
}
if((!%_IsSmi(%IS_VAR(g))&&!(g==g)))return g;
return(1/0);
}



function MathLog10(g){
g=g*1;
var l=%_DoubleHi(g);
var O=%_DoubleLo(g);
var z=0;
if(l<0x00100000){
if(((l&0x7fffffff)|O)===0)return-(1/0);
if(l<0)return $NaN;
z-=54;
g*=18014398509481984;
l=%_DoubleHi(g);
O=%_DoubleLo(g);
}
if(l>=0x7ff00000)return g;
z+=(l>>20)-1023;
var P=(z&0x80000000)>>>31;
l=(l&0x000fffff)|((0x3ff-P)<<20);
var h=z+P;
g=%_ConstructDouble(l,O);
var j=h*kMath[54]+kMath[52]*%_MathLogRT(g);
return j+h*kMath[53];
}






function MathLog2(g){
g=g*1;
var y=d(g);
var l=%_DoubleHi(g);
var O=%_DoubleLo(g);
var m=l&0x7fffffff;
if((m|O)==0)return-(1/0);
if(l<0)return $NaN;
if(m>=0x7ff00000)return g;
var s=0;
if(m<0x00100000){
y*=9007199254740992;
s-=53;
m=%_DoubleHi(y);
}
s+=(m>>20)-0x3ff;
var Q=m&0x000fffff;
m=Q|0x3ff00000;
var R=1;
var S=0;
var T=0;
if(Q>0x3988e){
if(Q<0xbb67a){
R=1.5;
S=kMath[64];
T=kMath[65];
}else{
s+=1;
m-=0x00100000;
}
}
y=%_ConstructDouble(m,%_DoubleLo(y));
var D=y-R;
var n=1/(y+R);
var U=D*n;
var V=%_ConstructDouble(%_DoubleHi(U),0);
var W=%_ConstructDouble(%_DoubleHi(y+R),0)
var X=y-(W-R);
var Y=n*((D-V*W)-V*X);
var Z=U*U;
var r=Z*Z*((kMath[55+0])
+Z*((kMath[55+1])
+Z*((kMath[55+2])
+Z*(
(kMath[55+3])
+Z*((kMath[55+4])
+Z*(kMath[55+5])
)))));
r+=Y*(V+U);
Z=V*V;
W=%_ConstructDouble(%_DoubleHi(3.0+Z+r),0);
X=r-((W-3.0)-Z);
D=V*W;
n=Y*W+X*U;
p_h=%_ConstructDouble(%_DoubleHi(D+n),0);
p_l=n-(p_h-D);
z_h=kMath[62]*p_h;
z_l=kMath[63]*p_h+p_l*kMath[61]+T;
var p=s;
var aa=%_ConstructDouble(%_DoubleHi(((z_h+z_l)+S)+p),0);
var ab=z_l-(((aa-p)-S)-z_h);
return aa+ab;
}
b.InstallFunctions(c,2,[
"cos",MathCos,
"sin",MathSin,
"tan",MathTan,
"sinh",MathSinh,
"cosh",MathCosh,
"log10",MathLog10,
"log2",MathLog2,
"log1p",MathLog1p,
"expm1",MathExpm1
]);
%SetForceInlineFlag(MathSin);
%SetForceInlineFlag(MathCos);
})

dateý
var $createDate;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Date;
var d=b.InternalArray;
var e;
var f;
var g;
var h;
var i;
b.Import(function(j){
e=j.IsFinite;
f=j.MathAbs;
g=j.MathFloor;
h=j.ToNumber;
i=j.ToString;
});
var k=$NaN;
var l;
function LocalTimezone(m){
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))return"";
CheckDateCacheCurrent();
if(m==k){
return l;
}
var n=%DateLocalTimezone(m);
k=m;
l=n;
return n;
}
function UTC(o){
if((!%_IsSmi(%IS_VAR(o))&&!(o==o)))return o;
return %DateToUTC(o);
}
function MakeTime(p,q,r,s){
if(!e(p))return $NaN;
if(!e(q))return $NaN;
if(!e(r))return $NaN;
if(!e(s))return $NaN;
return(%_IsSmi(%IS_VAR(p))?p:%NumberToInteger(h(p)))*3600000
+(%_IsSmi(%IS_VAR(q))?q:%NumberToInteger(h(q)))*60000
+(%_IsSmi(%IS_VAR(r))?r:%NumberToInteger(h(r)))*1000
+(%_IsSmi(%IS_VAR(s))?s:%NumberToInteger(h(s)));
}
function TimeInYear(t){
return DaysInYear(t)*86400000;
}
function MakeDay(t,u,v){
if(!e(t)||!e(u)||!e(v))return $NaN;
t=(%_IsSmi(%IS_VAR(t))?t:%NumberToIntegerMapMinusZero(h(t)));
u=(%_IsSmi(%IS_VAR(u))?u:%NumberToIntegerMapMinusZero(h(u)));
v=(%_IsSmi(%IS_VAR(v))?v:%NumberToIntegerMapMinusZero(h(v)));
if(t<-1000000||t>1000000||
u<-10000000||u>10000000){
return $NaN;
}
return %DateMakeDay(t|0,u|0)+v-1;
}
function MakeDate(w,o){
var o=w*86400000+o;
if(f(o)>8640002592000000)return $NaN;
return o;
}
function TimeClip(o){
if(!e(o))return $NaN;
if(f(o)>8640000000000000)return $NaN;
return(%_IsSmi(%IS_VAR(o))?o:%NumberToInteger(h(o)));
}
var x={
time:0,
string:null
};
function DateConstructor(t,u,v,y,z,A,s){
if(!%_IsConstructCall()){
return %_CallFunction(new c(),DateToString);
}
var B=%_ArgumentsLength();
var C;
if(B==0){
C=%DateCurrentTime();
(%DateSetValue(this,C,1));
}else if(B==1){
if((typeof(t)==='number')){
C=t;
}else if((typeof(t)==='string')){
CheckDateCacheCurrent();
var D=x;
if(D.string===t){
C=D.time;
}else{
C=DateParse(t);
if(!(!%_IsSmi(%IS_VAR(C))&&!(C==C))){
D.time=C;
D.string=t;
}
}
}else{
var o=$toPrimitive(t,1);
C=(typeof(o)==='string')?DateParse(o):h(o);
}
(%DateSetValue(this,C,1));
}else{
t=h(t);
u=h(u);
v=B>2?h(v):1;
y=B>3?h(y):0;
z=B>4?h(z):0;
A=B>5?h(A):0;
s=B>6?h(s):0;
t=(!(!%_IsSmi(%IS_VAR(t))&&!(t==t))&&
0<=(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t)))&&
(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t)))<=99)?1900+(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t))):t;
var w=MakeDay(t,u,v);
var o=MakeTime(y,z,A,s);
C=MakeDate(w,o);
(%DateSetValue(this,C,0));
}
}
var E=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
var F=['Jan','Feb','Mar','Apr','May','Jun',
'Jul','Aug','Sep','Oct','Nov','Dec'];
function TwoDigitString(C){
return C<10?"0"+C:""+C;
}
function DateString(v){
if(!%_IsDate(v))%_ThrowNotDateError();
return E[(%_DateField(v,4))]+' '
+F[(%_DateField(v,2))]+' '
+TwoDigitString((%_DateField(v,3)))+' '
+(%_DateField(v,1));
}
var G=['Sunday','Monday','Tuesday','Wednesday',
'Thursday','Friday','Saturday'];
var H=['January','February','March','April','May','June',
'July','August','September','October','November','December'];
function LongDateString(v){
if(!%_IsDate(v))%_ThrowNotDateError();
return G[(%_DateField(v,4))]+', '
+H[(%_DateField(v,2))]+' '
+TwoDigitString((%_DateField(v,3)))+', '
+(%_DateField(v,1));
}
function TimeString(v){
if(!%_IsDate(v))%_ThrowNotDateError();
return TwoDigitString((%_DateField(v,5)))+':'
+TwoDigitString((%_DateField(v,6)))+':'
+TwoDigitString((%_DateField(v,7)));
}
function TimeStringUTC(v){
if(!%_IsDate(v))%_ThrowNotDateError();
return TwoDigitString((%_DateField(v,15)))+':'
+TwoDigitString((%_DateField(v,16)))+':'
+TwoDigitString((%_DateField(v,17)));
}
function LocalTimezoneString(v){
if(!%_IsDate(v))%_ThrowNotDateError();
var n=LocalTimezone((%_DateField(v,0)));
var I=-(%_DateField(v,21));
var J=(I>=0)?1:-1;
var y=g((J*I)/60);
var q=g((J*I)%60);
var K=' GMT'+((J==1)?'+':'-')+
TwoDigitString(y)+TwoDigitString(q);
return K+' ('+n+')';
}
function DatePrintString(v){
if(!%_IsDate(v))%_ThrowNotDateError();
return DateString(v)+' '+TimeString(v);
}
var L=new d(8);
function DateParse(M){
var N=%DateParseString(i(M),L);
if((N===null))return $NaN;
var w=MakeDay(N[0],N[1],N[2]);
var o=MakeTime(N[3],N[4],N[5],N[6]);
var v=MakeDate(w,o);
if((N[7]===null)){
return TimeClip(UTC(v));
}else{
return TimeClip(v-N[7]*1000);
}
}
function DateUTC(t,u,v,y,z,A,s){
t=h(t);
u=h(u);
var B=%_ArgumentsLength();
v=B>2?h(v):1;
y=B>3?h(y):0;
z=B>4?h(z):0;
A=B>5?h(A):0;
s=B>6?h(s):0;
t=(!(!%_IsSmi(%IS_VAR(t))&&!(t==t))&&
0<=(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t)))&&
(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t)))<=99)?1900+(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t))):t;
var w=MakeDay(t,u,v);
var o=MakeTime(y,z,A,s);
return TimeClip(MakeDate(w,o));
}
function DateNow(){
return %DateCurrentTime();
}
function DateToString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0))
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))return'Invalid Date';
var O=LocalTimezoneString(this)
return DatePrintString(this)+O;
}
function DateToDateString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))return'Invalid Date';
return DateString(this);
}
function DateToTimeString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))return'Invalid Date';
var O=LocalTimezoneString(this);
return TimeString(this)+O;
}
function DateToLocaleString(){
if(!%_IsDate(this))%_ThrowNotDateError();
return %_CallFunction(this,DateToString);
}
function DateToLocaleDateString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))return'Invalid Date';
return LongDateString(this);
}
function DateToLocaleTimeString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))return'Invalid Date';
return TimeString(this);
}
function DateValueOf(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,0));
}
function DateGetTime(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,0));
}
function DateGetFullYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,1));
}
function DateGetUTCFullYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,11));
}
function DateGetMonth(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,2));
}
function DateGetUTCMonth(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,12));
}
function DateGetDate(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,3));
}
function DateGetUTCDate(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,13));
}
function DateGetDay(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,4));
}
function DateGetUTCDay(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,14));
}
function DateGetHours(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,5));
}
function DateGetUTCHours(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,15));
}
function DateGetMinutes(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,6));
}
function DateGetUTCMinutes(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,16));
}
function DateGetSeconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,7));
}
function DateGetUTCSeconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,17))
}
function DateGetMilliseconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,8));
}
function DateGetUTCMilliseconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,18));
}
function DateGetTimezoneOffset(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,21));
}
function DateSetTime(s){
if(!%_IsDate(this))%_ThrowNotDateError();
(%DateSetValue(this,h(s),1));
return(%_DateField(this,0));
}
function DateSetMilliseconds(s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0)+%_DateField(this,21));
s=h(s);
var o=MakeTime((%_DateField(this,5)),(%_DateField(this,6)),(%_DateField(this,7)),s);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),o),0));
}
function DateSetUTCMilliseconds(s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
s=h(s);
var o=MakeTime((%_DateField(this,15)),
(%_DateField(this,16)),
(%_DateField(this,17)),
s);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),o),1));
}
function DateSetSeconds(r,s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0)+%_DateField(this,21));
r=h(r);
s=%_ArgumentsLength()<2?(%_DateField(this,8)):h(s);
var o=MakeTime((%_DateField(this,5)),(%_DateField(this,6)),r,s);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),o),0));
}
function DateSetUTCSeconds(r,s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
r=h(r);
s=%_ArgumentsLength()<2?(%_DateField(this,18)):h(s);
var o=MakeTime((%_DateField(this,15)),(%_DateField(this,16)),r,s);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),o),1));
}
function DateSetMinutes(q,r,s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0)+%_DateField(this,21));
q=h(q);
var B=%_ArgumentsLength();
r=B<2?(%_DateField(this,7)):h(r);
s=B<3?(%_DateField(this,8)):h(s);
var o=MakeTime((%_DateField(this,5)),q,r,s);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),o),0));
}
function DateSetUTCMinutes(q,r,s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
q=h(q);
var B=%_ArgumentsLength();
r=B<2?(%_DateField(this,17)):h(r);
s=B<3?(%_DateField(this,18)):h(s);
var o=MakeTime((%_DateField(this,15)),q,r,s);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),o),1));
}
function DateSetHours(p,q,r,s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0)+%_DateField(this,21));
p=h(p);
var B=%_ArgumentsLength();
q=B<2?(%_DateField(this,6)):h(q);
r=B<3?(%_DateField(this,7)):h(r);
s=B<4?(%_DateField(this,8)):h(s);
var o=MakeTime(p,q,r,s);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),o),0));
}
function DateSetUTCHours(p,q,r,s){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
p=h(p);
var B=%_ArgumentsLength();
q=B<2?(%_DateField(this,16)):h(q);
r=B<3?(%_DateField(this,17)):h(r);
s=B<4?(%_DateField(this,18)):h(s);
var o=MakeTime(p,q,r,s);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),o),1));
}
function DateSetDate(v){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0)+%_DateField(this,21));
v=h(v);
var w=MakeDay((%_DateField(this,1)),(%_DateField(this,2)),v);
return(%DateSetValue(this,MakeDate(w,(%_DateField(this,10))),0));
}
function DateSetUTCDate(v){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
v=h(v);
var w=MakeDay((%_DateField(this,11)),(%_DateField(this,12)),v);
return(%DateSetValue(this,MakeDate(w,(%_DateField(this,20))),1));
}
function DateSetMonth(u,v){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0)+%_DateField(this,21));
u=h(u);
v=%_ArgumentsLength()<2?(%_DateField(this,3)):h(v);
var w=MakeDay((%_DateField(this,1)),u,v);
return(%DateSetValue(this,MakeDate(w,(%_DateField(this,10))),0));
}
function DateSetUTCMonth(u,v){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
u=h(u);
v=%_ArgumentsLength()<2?(%_DateField(this,13)):h(v);
var w=MakeDay((%_DateField(this,11)),u,v);
return(%DateSetValue(this,MakeDate(w,(%_DateField(this,20))),1));
}
function DateSetFullYear(t,u,v){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0)+%_DateField(this,21));
t=h(t);
var B=%_ArgumentsLength();
var o;
if((!%_IsSmi(%IS_VAR(m))&&!(m==m))){
u=B<2?0:h(u);
v=B<3?1:h(v);
o=0;
}else{
u=B<2?(%_DateField(this,2)):h(u);
v=B<3?(%_DateField(this,3)):h(v);
o=(%_DateField(this,10));
}
var w=MakeDay(t,u,v);
return(%DateSetValue(this,MakeDate(w,o),0));
}
function DateSetUTCFullYear(t,u,v){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
t=h(t);
var B=%_ArgumentsLength();
var o;
if((!%_IsSmi(%IS_VAR(m))&&!(m==m))){
u=B<2?0:h(u);
v=B<3?1:h(v);
o=0;
}else{
u=B<2?(%_DateField(this,12)):h(u);
v=B<3?(%_DateField(this,13)):h(v);
o=(%_DateField(this,20));
}
var w=MakeDay(t,u,v);
return(%DateSetValue(this,MakeDate(w,o),1));
}
function DateToUTCString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))return'Invalid Date';
return E[(%_DateField(this,14))]+', '
+TwoDigitString((%_DateField(this,13)))+' '
+F[(%_DateField(this,12))]+' '
+(%_DateField(this,11))+' '
+TimeStringUTC(this)+' GMT';
}
function DateGetYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,1))-1900;
}
function DateSetYear(t){
if(!%_IsDate(this))%_ThrowNotDateError();
t=h(t);
if((!%_IsSmi(%IS_VAR(t))&&!(t==t)))return(%DateSetValue(this,$NaN,1));
t=(0<=(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t)))&&(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t)))<=99)
?1900+(%_IsSmi(%IS_VAR(t))?t:%NumberToInteger(h(t))):t;
var m=(%_DateField(this,0)+%_DateField(this,21));
var u,v,o;
if((!%_IsSmi(%IS_VAR(m))&&!(m==m))){
u=0;
v=1;
o=0;
}else{
u=(%_DateField(this,2));
v=(%_DateField(this,3));
o=(%_DateField(this,10));
}
var w=MakeDay(t,u,v);
return(%DateSetValue(this,MakeDate(w,o),0));
}
function DateToGMTString(){
return %_CallFunction(this,DateToUTCString);
}
function PadInt(P,Q){
if(Q==1)return P;
return P<%_MathPow(10,Q-1)?'0'+PadInt(P,Q-1):P;
}
function DateToISOString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var m=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(m))&&!(m==m)))throw MakeRangeError(141);
var t=(%_DateField(this,11));
var R;
if(t>=0&&t<=9999){
R=PadInt(t,4);
}else{
if(t<0){
R="-"+PadInt(-t,6);
}else{
R="+"+PadInt(t,6);
}
}
return R+
'-'+PadInt((%_DateField(this,12))+1,2)+
'-'+PadInt((%_DateField(this,13)),2)+
'T'+PadInt((%_DateField(this,15)),2)+
':'+PadInt((%_DateField(this,16)),2)+
':'+PadInt((%_DateField(this,17)),2)+
'.'+PadInt((%_DateField(this,18)),3)+
'Z';
}
function DateToJSON(S){
var T=(%_ToObject(this));
var U=$defaultNumber(T);
if((typeof(U)==='number')&&!(%_IsSmi(%IS_VAR(U))||((U==U)&&(U!=1/0)&&(U!=-1/0)))){
return null;
}
return T.toISOString();
}
var V;
var W=$NaN;
function CheckDateCacheCurrent(){
if(!V){
V=%DateCacheVersion();
if(!V)return;
}
if(V[0]==W){
return;
}
W=V[0];
k=$NaN;
l=(void 0);
x.time=$NaN;
x.string=null;
}
function CreateDate(o){
var v=new c();
v.setTime(o);
return v;
}
%SetCode(c,DateConstructor);
%FunctionSetPrototype(c,new c($NaN));
b.InstallFunctions(c,2,[
"UTC",DateUTC,
"parse",DateParse,
"now",DateNow
]);
%AddNamedProperty(c.prototype,"constructor",c,2);
b.InstallFunctions(c.prototype,2,[
"toString",DateToString,
"toDateString",DateToDateString,
"toTimeString",DateToTimeString,
"toLocaleString",DateToLocaleString,
"toLocaleDateString",DateToLocaleDateString,
"toLocaleTimeString",DateToLocaleTimeString,
"valueOf",DateValueOf,
"getTime",DateGetTime,
"getFullYear",DateGetFullYear,
"getUTCFullYear",DateGetUTCFullYear,
"getMonth",DateGetMonth,
"getUTCMonth",DateGetUTCMonth,
"getDate",DateGetDate,
"getUTCDate",DateGetUTCDate,
"getDay",DateGetDay,
"getUTCDay",DateGetUTCDay,
"getHours",DateGetHours,
"getUTCHours",DateGetUTCHours,
"getMinutes",DateGetMinutes,
"getUTCMinutes",DateGetUTCMinutes,
"getSeconds",DateGetSeconds,
"getUTCSeconds",DateGetUTCSeconds,
"getMilliseconds",DateGetMilliseconds,
"getUTCMilliseconds",DateGetUTCMilliseconds,
"getTimezoneOffset",DateGetTimezoneOffset,
"setTime",DateSetTime,
"setMilliseconds",DateSetMilliseconds,
"setUTCMilliseconds",DateSetUTCMilliseconds,
"setSeconds",DateSetSeconds,
"setUTCSeconds",DateSetUTCSeconds,
"setMinutes",DateSetMinutes,
"setUTCMinutes",DateSetUTCMinutes,
"setHours",DateSetHours,
"setUTCHours",DateSetUTCHours,
"setDate",DateSetDate,
"setUTCDate",DateSetUTCDate,
"setMonth",DateSetMonth,
"setUTCMonth",DateSetUTCMonth,
"setFullYear",DateSetFullYear,
"setUTCFullYear",DateSetUTCFullYear,
"toGMTString",DateToGMTString,
"toUTCString",DateToUTCString,
"getYear",DateGetYear,
"setYear",DateSetYear,
"toISOString",DateToISOString,
"toJSON",DateToJSON
]);
b.ExportToRuntime(function(X){
X["create_date_fun"]=CreateDate;
});
})

regexp½f
var $regexpLastMatchInfoOverride;
var harmony_regexps=false;
var harmony_unicode_regexps=false;
(function(a,b){
%CheckIsBootstrapping();
var c=a.RegExp;
var d=b.InternalPackedArray;
b.Import(function(e){
ToNumber=e.ToNumber;
});
var f=new d(
2,
"",
(void 0),
0,
0
);
$regexpLastMatchInfoOverride=null;
function DoConstructRegExp(g,h,i){
if((%_IsRegExp(h))){
if(!(i===(void 0)))throw MakeTypeError(97);
i=(h.global?'g':'')
+(h.ignoreCase?'i':'')
+(h.multiline?'m':'');
if(harmony_unicode_regexps)
i+=(h.unicode?'u':'');
if(harmony_regexps)
i+=(h.sticky?'y':'');
h=h.source;
}
h=(h===(void 0))?'':$toString(h);
i=(i===(void 0))?'':$toString(i);
%RegExpInitializeAndCompile(g,h,i);
}
function RegExpConstructor(h,i){
if(%_IsConstructCall()){
DoConstructRegExp(this,h,i);
}else{
if((%_IsRegExp(h))&&(i===(void 0))){
return h;
}
return new c(h,i);
}
}
function RegExpCompileJS(h,i){
if(this==c.prototype){
throw MakeTypeError(36,
'RegExp.prototype.compile',this);
}
if((h===(void 0))&&%_ArgumentsLength()!=0){
DoConstructRegExp(this,'undefined',i);
}else{
DoConstructRegExp(this,h,i);
}
}
function DoRegExpExec(j,k,l){
var m=%_RegExpExec(j,k,l,f);
if(m!==null)$regexpLastMatchInfoOverride=null;
return m;
}
function RegExpExecNoTests(j,k,n){
var o=%_RegExpExec(j,k,n,f);
if(o!==null){
$regexpLastMatchInfoOverride=null;
var p=((o)[0])>>1;
var n=o[3];
var q=o[4];
var r=%_SubString(k,n,q);
var m=%_RegExpConstructResult(p,n,k);
m[0]=r;
if(p==1)return m;
var s=3+2;
for(var t=1;t<p;t++){
n=o[s++];
if(n!=-1){
q=o[s];
m[t]=%_SubString(k,n,q);
}
s++;
}
return m;
;
}
j.lastIndex=0;
return null;
}
function RegExpExecJS(k){
if(!(%_IsRegExp(this))){
throw MakeTypeError(36,
'RegExp.prototype.exec',this);
}
k=((typeof(%IS_VAR(k))==='string')?k:$nonStringToString(k));
var u=this.lastIndex;
var t=(%_IsSmi(%IS_VAR(u))?u:%NumberToInteger(ToNumber(u)));
var v=this.global||(harmony_regexps&&this.sticky);
if(v){
if(t<0||t>k.length){
this.lastIndex=0;
return null;
}
}else{
t=0;
}
var w=%_RegExpExec(this,k,t,f);
if((w===null)){
this.lastIndex=0;
return null;
}
$regexpLastMatchInfoOverride=null;
if(v){
this.lastIndex=f[4];
}
var p=((w)[0])>>1;
var n=w[3];
var q=w[4];
var r=%_SubString(k,n,q);
var m=%_RegExpConstructResult(p,n,k);
m[0]=r;
if(p==1)return m;
var s=3+2;
for(var t=1;t<p;t++){
n=w[s++];
if(n!=-1){
q=w[s];
m[t]=%_SubString(k,n,q);
}
s++;
}
return m;
;
}
var x;
var y;
function RegExpTest(k){
if(!(%_IsRegExp(this))){
throw MakeTypeError(36,
'RegExp.prototype.test',this);
}
k=((typeof(%IS_VAR(k))==='string')?k:$nonStringToString(k));
var u=this.lastIndex;
var t=(%_IsSmi(%IS_VAR(u))?u:%NumberToInteger(ToNumber(u)));
if(this.global||(harmony_regexps&&this.sticky)){
if(t<0||t>k.length){
this.lastIndex=0;
return false;
}
var w=%_RegExpExec(this,k,t,f);
if((w===null)){
this.lastIndex=0;
return false;
}
$regexpLastMatchInfoOverride=null;
this.lastIndex=f[4];
return true;
}else{
var j=this;
if(j.source.length>=3&&
%_StringCharCodeAt(j.source,0)==46&&
%_StringCharCodeAt(j.source,1)==42&&
%_StringCharCodeAt(j.source,2)!=63){
j=TrimRegExp(j);
}
var w=%_RegExpExec(j,k,0,f);
if((w===null)){
this.lastIndex=0;
return false;
}
$regexpLastMatchInfoOverride=null;
return true;
}
}
function TrimRegExp(j){
if(!%_ObjectEquals(x,j)){
x=j;
y=
new c(%_SubString(j.source,2,j.source.length),
(j.ignoreCase?j.multiline?"im":"i"
:j.multiline?"m":""));
}
return y;
}
function RegExpToString(){
if(!(%_IsRegExp(this))){
throw MakeTypeError(36,
'RegExp.prototype.toString',this);
}
var m='/'+this.source+'/';
if(this.global)m+='g';
if(this.ignoreCase)m+='i';
if(this.multiline)m+='m';
if(harmony_unicode_regexps&&this.unicode)m+='u';
if(harmony_regexps&&this.sticky)m+='y';
return m;
}
function RegExpGetLastMatch(){
if($regexpLastMatchInfoOverride!==null){
return(($regexpLastMatchInfoOverride)[0]);
}
var z=((f)[1]);
return %_SubString(z,
f[3],
f[4]);
}
function RegExpGetLastParen(){
if($regexpLastMatchInfoOverride){
var A=$regexpLastMatchInfoOverride;
if(A.length<=3)return'';
return A[A.length-3];
}
var B=((f)[0]);
if(B<=2)return'';
var z=((f)[1]);
var n=f[(3+(B-2))];
var q=f[(3+(B-1))];
if(n!=-1&&q!=-1){
return %_SubString(z,n,q);
}
return"";
}
function RegExpGetLeftContext(){
var C;
var D;
if(!$regexpLastMatchInfoOverride){
C=f[3];
D=((f)[1]);
}else{
var A=$regexpLastMatchInfoOverride;
C=((A)[(A).length-2]);
D=((A)[(A).length-1]);
}
return %_SubString(D,0,C);
}
function RegExpGetRightContext(){
var C;
var D;
if(!$regexpLastMatchInfoOverride){
C=f[4];
D=((f)[1]);
}else{
var A=$regexpLastMatchInfoOverride;
D=((A)[(A).length-1]);
var E=((A)[0]);
C=((A)[(A).length-2])+E.length;
}
return %_SubString(D,C,D.length);
}
function RegExpMakeCaptureGetter(F){
return function foo(){
if($regexpLastMatchInfoOverride){
if(F<$regexpLastMatchInfoOverride.length-2){
return(($regexpLastMatchInfoOverride)[(F)]);
}
return'';
}
var l=F*2;
if(l>=((f)[0]))return'';
var G=f[(3+(l))];
var H=f[(3+(l+1))];
if(G==-1||H==-1)return'';
return %_SubString(((f)[1]),G,H);
};
}
%FunctionSetInstanceClassName(c,'RegExp');
%AddNamedProperty(
c.prototype,'constructor',c,2);
%SetCode(c,RegExpConstructor);
b.InstallFunctions(c.prototype,2,[
"exec",RegExpExecJS,
"test",RegExpTest,
"toString",RegExpToString,
"compile",RegExpCompileJS
]);
%FunctionSetLength(c.prototype.compile,1);
var I=function(){
var J=((f)[2]);
return(J===(void 0))?"":J;
};
var K=function(k){
((f)[2])=$toString(k);
};
%OptimizeObjectForAddingMultipleProperties(c,22);
%DefineAccessorPropertyUnchecked(c,'input',I,
K,4);
%DefineAccessorPropertyUnchecked(c,'$_',I,
K,2|4);
var L=false;
var M=function(){return L;};
var N=function(O){L=O?true:false;};
%DefineAccessorPropertyUnchecked(c,'multiline',M,
N,4);
%DefineAccessorPropertyUnchecked(c,'$*',M,
N,
2|4);
var P=function(Q){};
%DefineAccessorPropertyUnchecked(c,'lastMatch',RegExpGetLastMatch,
P,4);
%DefineAccessorPropertyUnchecked(c,'$&',RegExpGetLastMatch,
P,2|4);
%DefineAccessorPropertyUnchecked(c,'lastParen',RegExpGetLastParen,
P,4);
%DefineAccessorPropertyUnchecked(c,'$+',RegExpGetLastParen,
P,2|4);
%DefineAccessorPropertyUnchecked(c,'leftContext',
RegExpGetLeftContext,P,
4);
%DefineAccessorPropertyUnchecked(c,'$`',RegExpGetLeftContext,
P,2|4);
%DefineAccessorPropertyUnchecked(c,'rightContext',
RegExpGetRightContext,P,
4);
%DefineAccessorPropertyUnchecked(c,"$'",RegExpGetRightContext,
P,2|4);
for(var t=1;t<10;++t){
%DefineAccessorPropertyUnchecked(c,'$'+t,
RegExpMakeCaptureGetter(t),P,
4);
}
%ToFastProperties(c);
b.Export(function(R){
R.RegExpExec=DoRegExpExec;
R.RegExpExecNoTests=RegExpExecNoTests;
R.RegExpLastMatchInfo=f;
R.RegExpTest=RegExpTest;
});
})

,arraybuffer}
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.ArrayBuffer;
var d=a.Object;
var e;
var f;
var g;
b.Import(function(h){
e=h.MathMax;
f=h.MathMin;
g=h.ToNumber;
});
function ArrayBufferConstructor(i){
if(%_IsConstructCall()){
var j=$toPositiveInteger(i,129);
%ArrayBufferInitialize(this,j,false);
}else{
throw MakeTypeError(21,"ArrayBuffer");
}
}
function ArrayBufferGetByteLen(){
if(!(%_ClassOf(this)==='ArrayBuffer')){
throw MakeTypeError(36,
'ArrayBuffer.prototype.byteLength',this);
}
return %_ArrayBufferGetByteLength(this);
}
function ArrayBufferSlice(k,l){
if(!(%_ClassOf(this)==='ArrayBuffer')){
throw MakeTypeError(36,
'ArrayBuffer.prototype.slice',this);
}
var m=(%_IsSmi(%IS_VAR(k))?k:%NumberToInteger(g(k)));
if(!(l===(void 0))){
l=(%_IsSmi(%IS_VAR(l))?l:%NumberToInteger(g(l)));
}
var n;
var o=%_ArrayBufferGetByteLength(this);
if(m<0){
n=e(o+m,0);
}else{
n=f(m,o);
}
var p=(l===(void 0))?o:l;
var q;
if(p<0){
q=e(o+p,0);
}else{
q=f(p,o);
}
if(q<n){
q=n;
}
var r=q-n;
var s=new c(r);
%ArrayBufferSliceImpl(this,s,n);
return s;
}
function ArrayBufferIsViewJS(t){
return %ArrayBufferIsView(t);
}
%SetCode(c,ArrayBufferConstructor);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(
c.prototype,"constructor",c,2);
%AddNamedProperty(c.prototype,
symbolToStringTag,"ArrayBuffer",2|1);
b.InstallGetter(c.prototype,"byteLength",ArrayBufferGetByteLen);
b.InstallFunctions(c,2,[
"isView",ArrayBufferIsViewJS
]);
b.InstallFunctions(c.prototype,2,[
"slice",ArrayBufferSlice
]);
})

(typedarray¦©
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Array;
var d=a.ArrayBuffer;
var e=a.DataView;
var f=a.Object;
var g=a.Uint8Array;

var h=a.Int8Array;

var i=a.Uint16Array;

var j=a.Int16Array;

var k=a.Uint32Array;

var l=a.Int32Array;

var m=a.Float32Array;

var n=a.Float64Array;

var o=a.Uint8ClampedArray;


var p;
var q;
var r;
b.Import(function(s){
p=s.MathMax;
q=s.MathMin;
r=s.ToNumber;
});
var t=b.InternalArray;
function Uint8ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 1!==0){
throw MakeRangeError(142,
"start offset","Uint8Array",1);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 1!==0){
throw MakeRangeError(142,
"byte length","Uint8Array",1);
}
A=y-z;
B=A/1;
}else{
var B=x;
A=B*1;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,1,v,z,A,true);
}
function Uint8ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*1;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,1,v,0,D,true);
}else{
%_TypedArrayInitialize(u,1,null,0,D,true);
}
}
function Uint8ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*1;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,1,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,1,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Uint8ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Uint8ArrayConstructByArrayLike(u,J);
}
function Uint8ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Uint8ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Uint8ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Uint8ArrayConstructByArrayLike(this,N);
}else{
Uint8ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Uint8Array")
}
}
function Uint8Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint8Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint8Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint8Array_GetLength(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint8ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Uint8Array')){
throw MakeTypeError(36,"Uint8Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*1;
return new g(%TypedArrayGetBuffer(this),
V,B);
}

function Int8ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 1!==0){
throw MakeRangeError(142,
"start offset","Int8Array",1);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 1!==0){
throw MakeRangeError(142,
"byte length","Int8Array",1);
}
A=y-z;
B=A/1;
}else{
var B=x;
A=B*1;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,2,v,z,A,true);
}
function Int8ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*1;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,2,v,0,D,true);
}else{
%_TypedArrayInitialize(u,2,null,0,D,true);
}
}
function Int8ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*1;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,2,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,2,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Int8ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Int8ArrayConstructByArrayLike(u,J);
}
function Int8ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Int8ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Int8ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Int8ArrayConstructByArrayLike(this,N);
}else{
Int8ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Int8Array")
}
}
function Int8Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int8Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int8Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int8Array_GetLength(){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int8ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Int8Array')){
throw MakeTypeError(36,"Int8Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*1;
return new h(%TypedArrayGetBuffer(this),
V,B);
}

function Uint16ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 2!==0){
throw MakeRangeError(142,
"start offset","Uint16Array",2);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 2!==0){
throw MakeRangeError(142,
"byte length","Uint16Array",2);
}
A=y-z;
B=A/2;
}else{
var B=x;
A=B*2;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,3,v,z,A,true);
}
function Uint16ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*2;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,3,v,0,D,true);
}else{
%_TypedArrayInitialize(u,3,null,0,D,true);
}
}
function Uint16ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*2;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,3,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,3,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Uint16ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Uint16ArrayConstructByArrayLike(u,J);
}
function Uint16ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Uint16ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Uint16ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Uint16ArrayConstructByArrayLike(this,N);
}else{
Uint16ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Uint16Array")
}
}
function Uint16Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint16Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint16Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint16Array_GetLength(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint16ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Uint16Array')){
throw MakeTypeError(36,"Uint16Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*2;
return new i(%TypedArrayGetBuffer(this),
V,B);
}

function Int16ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 2!==0){
throw MakeRangeError(142,
"start offset","Int16Array",2);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 2!==0){
throw MakeRangeError(142,
"byte length","Int16Array",2);
}
A=y-z;
B=A/2;
}else{
var B=x;
A=B*2;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,4,v,z,A,true);
}
function Int16ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*2;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,4,v,0,D,true);
}else{
%_TypedArrayInitialize(u,4,null,0,D,true);
}
}
function Int16ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*2;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,4,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,4,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Int16ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Int16ArrayConstructByArrayLike(u,J);
}
function Int16ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Int16ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Int16ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Int16ArrayConstructByArrayLike(this,N);
}else{
Int16ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Int16Array")
}
}
function Int16Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int16Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int16Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int16Array_GetLength(){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int16ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Int16Array')){
throw MakeTypeError(36,"Int16Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*2;
return new j(%TypedArrayGetBuffer(this),
V,B);
}

function Uint32ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 4!==0){
throw MakeRangeError(142,
"start offset","Uint32Array",4);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 4!==0){
throw MakeRangeError(142,
"byte length","Uint32Array",4);
}
A=y-z;
B=A/4;
}else{
var B=x;
A=B*4;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,5,v,z,A,true);
}
function Uint32ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*4;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,5,v,0,D,true);
}else{
%_TypedArrayInitialize(u,5,null,0,D,true);
}
}
function Uint32ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*4;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,5,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,5,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Uint32ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Uint32ArrayConstructByArrayLike(u,J);
}
function Uint32ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Uint32ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Uint32ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Uint32ArrayConstructByArrayLike(this,N);
}else{
Uint32ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Uint32Array")
}
}
function Uint32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint32Array_GetLength(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint32ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Uint32Array')){
throw MakeTypeError(36,"Uint32Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*4;
return new k(%TypedArrayGetBuffer(this),
V,B);
}

function Int32ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 4!==0){
throw MakeRangeError(142,
"start offset","Int32Array",4);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 4!==0){
throw MakeRangeError(142,
"byte length","Int32Array",4);
}
A=y-z;
B=A/4;
}else{
var B=x;
A=B*4;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,6,v,z,A,true);
}
function Int32ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*4;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,6,v,0,D,true);
}else{
%_TypedArrayInitialize(u,6,null,0,D,true);
}
}
function Int32ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*4;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,6,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,6,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Int32ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Int32ArrayConstructByArrayLike(u,J);
}
function Int32ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Int32ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Int32ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Int32ArrayConstructByArrayLike(this,N);
}else{
Int32ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Int32Array")
}
}
function Int32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int32Array_GetLength(){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int32ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Int32Array')){
throw MakeTypeError(36,"Int32Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*4;
return new l(%TypedArrayGetBuffer(this),
V,B);
}

function Float32ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 4!==0){
throw MakeRangeError(142,
"start offset","Float32Array",4);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 4!==0){
throw MakeRangeError(142,
"byte length","Float32Array",4);
}
A=y-z;
B=A/4;
}else{
var B=x;
A=B*4;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,7,v,z,A,true);
}
function Float32ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*4;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,7,v,0,D,true);
}else{
%_TypedArrayInitialize(u,7,null,0,D,true);
}
}
function Float32ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*4;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,7,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,7,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Float32ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Float32ArrayConstructByArrayLike(u,J);
}
function Float32ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Float32ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Float32ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Float32ArrayConstructByArrayLike(this,N);
}else{
Float32ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Float32Array")
}
}
function Float32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Float32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Float32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Float32Array_GetLength(){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Float32ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Float32Array')){
throw MakeTypeError(36,"Float32Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*4;
return new m(%TypedArrayGetBuffer(this),
V,B);
}

function Float64ArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 8!==0){
throw MakeRangeError(142,
"start offset","Float64Array",8);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 8!==0){
throw MakeRangeError(142,
"byte length","Float64Array",8);
}
A=y-z;
B=A/8;
}else{
var B=x;
A=B*8;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,8,v,z,A,true);
}
function Float64ArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*8;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,8,v,0,D,true);
}else{
%_TypedArrayInitialize(u,8,null,0,D,true);
}
}
function Float64ArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*8;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,8,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,8,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Float64ArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Float64ArrayConstructByArrayLike(u,J);
}
function Float64ArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Float64ArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Float64ArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Float64ArrayConstructByArrayLike(this,N);
}else{
Float64ArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Float64Array")
}
}
function Float64Array_GetBuffer(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Float64Array_GetByteLength(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Float64Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Float64Array_GetLength(){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Float64ArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Float64Array')){
throw MakeTypeError(36,"Float64Array.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*8;
return new n(%TypedArrayGetBuffer(this),
V,B);
}

function Uint8ClampedArrayConstructByArrayBuffer(u,v,w,x){
if(!(w===(void 0))){
w=
$toPositiveInteger(w,143);
}
if(!(x===(void 0))){
x=$toPositiveInteger(x,143);
}
var y=%_ArrayBufferGetByteLength(v);
var z;
if((w===(void 0))){
z=0;
}else{
z=w;
if(z % 1!==0){
throw MakeRangeError(142,
"start offset","Uint8ClampedArray",1);
}
if(z>y){
throw MakeRangeError(144);
}
}
var A;
var B;
if((x===(void 0))){
if(y % 1!==0){
throw MakeRangeError(142,
"byte length","Uint8ClampedArray",1);
}
A=y-z;
B=A/1;
}else{
var B=x;
A=B*1;
}
if((z+A>y)
||(B>%_MaxSmi())){
throw MakeRangeError(143);
}
%_TypedArrayInitialize(u,9,v,z,A,true);
}
function Uint8ClampedArrayConstructByLength(u,x){
var C=(x===(void 0))?
0:$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var D=C*1;
if(D>%_TypedArrayMaxSizeInHeap()){
var v=new d(D);
%_TypedArrayInitialize(u,9,v,0,D,true);
}else{
%_TypedArrayInitialize(u,9,null,0,D,true);
}
}
function Uint8ClampedArrayConstructByArrayLike(u,E){
var x=E.length;
var C=$toPositiveInteger(x,143);
if(C>%_MaxSmi()){
throw MakeRangeError(143);
}
var F=false;
var D=C*1;
if(D<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(u,9,null,0,D,false);
}else{
F=
%TypedArrayInitializeFromArrayLike(u,9,E,C);
}
if(!F){
for(var G=0;G<C;G++){
u[G]=E[G];
}
}
}
function Uint8ClampedArrayConstructByIterable(u,H,I){
var J=new t();
var K=%_CallFunction(H,I);
var L={
__proto__:null
};
L[symbolIterator]=function(){return K;}
for(var M of L){
J.push(M);
}
Uint8ClampedArrayConstructByArrayLike(u,J);
}
function Uint8ClampedArrayConstructor(N,O,P){
if(%_IsConstructCall()){
if((%_ClassOf(N)==='ArrayBuffer')||(%_ClassOf(N)==='SharedArrayBuffer')){
Uint8ClampedArrayConstructByArrayBuffer(this,N,O,P);
}else if((typeof(N)==='number')||(typeof(N)==='string')||
(typeof(N)==='boolean')||(N===(void 0))){
Uint8ClampedArrayConstructByLength(this,N);
}else{
var I=N[symbolIterator];
if((I===(void 0))||I===$arrayValues){
Uint8ClampedArrayConstructByArrayLike(this,N);
}else{
Uint8ClampedArrayConstructByIterable(this,N,I);
}
}
}else{
throw MakeTypeError(21,"Uint8ClampedArray")
}
}
function Uint8ClampedArray_GetBuffer(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint8ClampedArray_GetByteLength(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint8ClampedArray_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint8ClampedArray_GetLength(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint8ClampedArraySubArray(Q,R){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw MakeTypeError(36,"Uint8ClampedArray.subarray",this);
}
var S=(%_IsSmi(%IS_VAR(Q))?Q:%NumberToInteger(r(Q)));
if(!(R===(void 0))){
R=(%_IsSmi(%IS_VAR(R))?R:%NumberToInteger(r(R)));
}
var T=%_TypedArrayGetLength(this);
if(S<0){
S=p(0,T+S);
}else{
S=q(T,S);
}
var U=(R===(void 0))?T:R;
if(U<0){
U=p(0,T+U);
}else{
U=q(U,T);
}
if(U<S){
U=S;
}
var B=U-S;
var V=
%_ArrayBufferViewGetByteOffset(this)+S*1;
return new o(%TypedArrayGetBuffer(this),
V,B);
}


function TypedArraySetFromArrayLike(W,X,Y,z){
if(z>0){
for(var G=0;G<Y;G++){
W[z+G]=X[G];
}
}
else{
for(var G=0;G<Y;G++){
W[G]=X[G];
}
}
}
function TypedArraySetFromOverlappingTypedArray(W,X,z){
var Z=X.BYTES_PER_ELEMENT;
var aa=W.BYTES_PER_ELEMENT;
var Y=X.length;
function CopyLeftPart(){
var ab=W.byteOffset+(z+1)*aa;
var ac=X.byteOffset;
for(var ad=0;
ad<Y&&ab<=ac;
ad++){
W[z+ad]=X[ad];
ab+=aa;
ac+=Z;
}
return ad;
}
var ad=CopyLeftPart();
function CopyRightPart(){
var ab=
W.byteOffset+(z+Y-1)*aa;
var ac=
X.byteOffset+Y*Z;
for(var ae=Y-1;
ae>=ad&&ab>=ac;
ae--){
W[z+ae]=X[ae];
ab-=aa;
ac-=Z;
}
return ae;
}
var ae=CopyRightPart();
var af=new c(ae+1-ad);
for(var G=ad;G<=ae;G++){
af[G-ad]=X[G];
}
for(G=ad;G<=ae;G++){
W[z+G]=af[G-ad];
}
}
function TypedArraySet(u,z){
var ag=(z===(void 0))?0:(%_IsSmi(%IS_VAR(z))?z:%NumberToInteger(r(z)));
if(ag<0)throw MakeTypeError(152);
if(ag>%_MaxSmi()){
throw MakeRangeError(153);
}
switch(%TypedArraySetFastCases(this,u,ag)){
case 0:
return;
case 1:
TypedArraySetFromOverlappingTypedArray(this,u,ag);
return;
case 2:
TypedArraySetFromArrayLike(this,u,u.length,ag);
return;
case 3:
var C=u.length;
if((C===(void 0))){
if((typeof(u)==='number')){
throw MakeTypeError(39);
}
return;
}
C=$toLength(C);
if(ag+C>this.length){
throw MakeRangeError(153);
}
TypedArraySetFromArrayLike(this,u,C,ag);
return;
}
}
function TypedArrayGetToStringTag(){
if(!%_IsTypedArray(this))return;
var ah=%_ClassOf(this);
if((ah===(void 0)))return;
return ah;
}
%SetCode(g,Uint8ArrayConstructor);
%FunctionSetPrototype(g,new f());
%AddNamedProperty(g,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(g.prototype,
"constructor",a.Uint8Array,2);
%AddNamedProperty(g.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(g.prototype,"buffer",Uint8Array_GetBuffer);
b.InstallGetter(g.prototype,"byteOffset",Uint8Array_GetByteOffset,
2|4);
b.InstallGetter(g.prototype,"byteLength",Uint8Array_GetByteLength,
2|4);
b.InstallGetter(g.prototype,"length",Uint8Array_GetLength,
2|4);
b.InstallGetter(g.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(g.prototype,2,[
"subarray",Uint8ArraySubArray,
"set",TypedArraySet
]);

%SetCode(h,Int8ArrayConstructor);
%FunctionSetPrototype(h,new f());
%AddNamedProperty(h,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(h.prototype,
"constructor",a.Int8Array,2);
%AddNamedProperty(h.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(h.prototype,"buffer",Int8Array_GetBuffer);
b.InstallGetter(h.prototype,"byteOffset",Int8Array_GetByteOffset,
2|4);
b.InstallGetter(h.prototype,"byteLength",Int8Array_GetByteLength,
2|4);
b.InstallGetter(h.prototype,"length",Int8Array_GetLength,
2|4);
b.InstallGetter(h.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(h.prototype,2,[
"subarray",Int8ArraySubArray,
"set",TypedArraySet
]);

%SetCode(i,Uint16ArrayConstructor);
%FunctionSetPrototype(i,new f());
%AddNamedProperty(i,"BYTES_PER_ELEMENT",2,
1|2|4);
%AddNamedProperty(i.prototype,
"constructor",a.Uint16Array,2);
%AddNamedProperty(i.prototype,
"BYTES_PER_ELEMENT",2,
1|2|4);
b.InstallGetter(i.prototype,"buffer",Uint16Array_GetBuffer);
b.InstallGetter(i.prototype,"byteOffset",Uint16Array_GetByteOffset,
2|4);
b.InstallGetter(i.prototype,"byteLength",Uint16Array_GetByteLength,
2|4);
b.InstallGetter(i.prototype,"length",Uint16Array_GetLength,
2|4);
b.InstallGetter(i.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(i.prototype,2,[
"subarray",Uint16ArraySubArray,
"set",TypedArraySet
]);

%SetCode(j,Int16ArrayConstructor);
%FunctionSetPrototype(j,new f());
%AddNamedProperty(j,"BYTES_PER_ELEMENT",2,
1|2|4);
%AddNamedProperty(j.prototype,
"constructor",a.Int16Array,2);
%AddNamedProperty(j.prototype,
"BYTES_PER_ELEMENT",2,
1|2|4);
b.InstallGetter(j.prototype,"buffer",Int16Array_GetBuffer);
b.InstallGetter(j.prototype,"byteOffset",Int16Array_GetByteOffset,
2|4);
b.InstallGetter(j.prototype,"byteLength",Int16Array_GetByteLength,
2|4);
b.InstallGetter(j.prototype,"length",Int16Array_GetLength,
2|4);
b.InstallGetter(j.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(j.prototype,2,[
"subarray",Int16ArraySubArray,
"set",TypedArraySet
]);

%SetCode(k,Uint32ArrayConstructor);
%FunctionSetPrototype(k,new f());
%AddNamedProperty(k,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(k.prototype,
"constructor",a.Uint32Array,2);
%AddNamedProperty(k.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(k.prototype,"buffer",Uint32Array_GetBuffer);
b.InstallGetter(k.prototype,"byteOffset",Uint32Array_GetByteOffset,
2|4);
b.InstallGetter(k.prototype,"byteLength",Uint32Array_GetByteLength,
2|4);
b.InstallGetter(k.prototype,"length",Uint32Array_GetLength,
2|4);
b.InstallGetter(k.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(k.prototype,2,[
"subarray",Uint32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(l,Int32ArrayConstructor);
%FunctionSetPrototype(l,new f());
%AddNamedProperty(l,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(l.prototype,
"constructor",a.Int32Array,2);
%AddNamedProperty(l.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(l.prototype,"buffer",Int32Array_GetBuffer);
b.InstallGetter(l.prototype,"byteOffset",Int32Array_GetByteOffset,
2|4);
b.InstallGetter(l.prototype,"byteLength",Int32Array_GetByteLength,
2|4);
b.InstallGetter(l.prototype,"length",Int32Array_GetLength,
2|4);
b.InstallGetter(l.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(l.prototype,2,[
"subarray",Int32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(m,Float32ArrayConstructor);
%FunctionSetPrototype(m,new f());
%AddNamedProperty(m,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(m.prototype,
"constructor",a.Float32Array,2);
%AddNamedProperty(m.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(m.prototype,"buffer",Float32Array_GetBuffer);
b.InstallGetter(m.prototype,"byteOffset",Float32Array_GetByteOffset,
2|4);
b.InstallGetter(m.prototype,"byteLength",Float32Array_GetByteLength,
2|4);
b.InstallGetter(m.prototype,"length",Float32Array_GetLength,
2|4);
b.InstallGetter(m.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(m.prototype,2,[
"subarray",Float32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(n,Float64ArrayConstructor);
%FunctionSetPrototype(n,new f());
%AddNamedProperty(n,"BYTES_PER_ELEMENT",8,
1|2|4);
%AddNamedProperty(n.prototype,
"constructor",a.Float64Array,2);
%AddNamedProperty(n.prototype,
"BYTES_PER_ELEMENT",8,
1|2|4);
b.InstallGetter(n.prototype,"buffer",Float64Array_GetBuffer);
b.InstallGetter(n.prototype,"byteOffset",Float64Array_GetByteOffset,
2|4);
b.InstallGetter(n.prototype,"byteLength",Float64Array_GetByteLength,
2|4);
b.InstallGetter(n.prototype,"length",Float64Array_GetLength,
2|4);
b.InstallGetter(n.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(n.prototype,2,[
"subarray",Float64ArraySubArray,
"set",TypedArraySet
]);

%SetCode(o,Uint8ClampedArrayConstructor);
%FunctionSetPrototype(o,new f());
%AddNamedProperty(o,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(o.prototype,
"constructor",a.Uint8ClampedArray,2);
%AddNamedProperty(o.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(o.prototype,"buffer",Uint8ClampedArray_GetBuffer);
b.InstallGetter(o.prototype,"byteOffset",Uint8ClampedArray_GetByteOffset,
2|4);
b.InstallGetter(o.prototype,"byteLength",Uint8ClampedArray_GetByteLength,
2|4);
b.InstallGetter(o.prototype,"length",Uint8ClampedArray_GetLength,
2|4);
b.InstallGetter(o.prototype,symbolToStringTag,
TypedArrayGetToStringTag);
b.InstallFunctions(o.prototype,2,[
"subarray",Uint8ClampedArraySubArray,
"set",TypedArraySet
]);


function DataViewConstructor(v,w,D){
if(%_IsConstructCall()){
if(!(%_ClassOf(v)==='ArrayBuffer'))throw MakeTypeError(23);
if(!(w===(void 0))){
w=$toPositiveInteger(w,136);
}
if(!(D===(void 0))){
D=(%_IsSmi(%IS_VAR(D))?D:%NumberToInteger(r(D)));
}
var y=%_ArrayBufferGetByteLength(v);
var z=(w===(void 0))?0:w;
if(z>y)throw MakeRangeError(136);
var x=(D===(void 0))
?y-z
:D;
if(x<0||z+x>y){
throw new MakeRangeError(135);
}
%_DataViewInitialize(this,v,z,x);
}else{
throw MakeTypeError(21,"DataView");
}
}
function DataViewGetBufferJS(){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,'DataView.buffer',this);
}
return %DataViewGetBuffer(this);
}
function DataViewGetByteOffset(){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.byteOffset',this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function DataViewGetByteLength(){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.byteLength',this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function DataViewGetInt8JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getInt8',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetInt8(this,z,!!ai);
}
function DataViewSetInt8JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setInt8',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetInt8(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}

function DataViewGetUint8JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getUint8',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetUint8(this,z,!!ai);
}
function DataViewSetUint8JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setUint8',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetUint8(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}

function DataViewGetInt16JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getInt16',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetInt16(this,z,!!ai);
}
function DataViewSetInt16JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setInt16',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetInt16(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}

function DataViewGetUint16JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getUint16',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetUint16(this,z,!!ai);
}
function DataViewSetUint16JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setUint16',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetUint16(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}

function DataViewGetInt32JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getInt32',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetInt32(this,z,!!ai);
}
function DataViewSetInt32JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setInt32',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetInt32(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}

function DataViewGetUint32JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getUint32',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetUint32(this,z,!!ai);
}
function DataViewSetUint32JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setUint32',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetUint32(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}

function DataViewGetFloat32JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getFloat32',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetFloat32(this,z,!!ai);
}
function DataViewSetFloat32JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setFloat32',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetFloat32(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}

function DataViewGetFloat64JS(z,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.getFloat64',this);
}
if(%_ArgumentsLength()<1)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
return %DataViewGetFloat64(this,z,!!ai);
}
function DataViewSetFloat64JS(z,M,ai){
if(!(%_ClassOf(this)==='DataView')){
throw MakeTypeError(36,
'DataView.setFloat64',this);
}
if(%_ArgumentsLength()<2)throw MakeTypeError(39);
z=$toPositiveInteger(z,134);
%DataViewSetFloat64(this,z,((typeof(%IS_VAR(M))==='number')?M:$nonNumberToNumber(M)),!!ai);
}


%SetCode(e,DataViewConstructor);
%FunctionSetPrototype(e,new f);
%AddNamedProperty(e.prototype,"constructor",e,
2);
%AddNamedProperty(e.prototype,symbolToStringTag,"DataView",
1|2);
b.InstallGetter(e.prototype,"buffer",DataViewGetBufferJS);
b.InstallGetter(e.prototype,"byteOffset",
DataViewGetByteOffset);
b.InstallGetter(e.prototype,"byteLength",
DataViewGetByteLength);
b.InstallFunctions(e.prototype,2,[
"getInt8",DataViewGetInt8JS,
"setInt8",DataViewSetInt8JS,
"getUint8",DataViewGetUint8JS,
"setUint8",DataViewSetUint8JS,
"getInt16",DataViewGetInt16JS,
"setInt16",DataViewSetInt16JS,
"getUint16",DataViewGetUint16JS,
"setUint16",DataViewSetUint16JS,
"getInt32",DataViewGetInt32JS,
"setInt32",DataViewSetInt32JS,
"getUint32",DataViewGetUint32JS,
"setUint32",DataViewSetUint32JS,
"getFloat32",DataViewGetFloat32JS,
"setFloat32",DataViewSetFloat32JS,
"getFloat64",DataViewGetFloat64JS,
"setFloat64",DataViewSetFloat64JS
]);
})

Hiterator-prototype¥
var $iteratorPrototype;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
function IteratorPrototypeIterator(){
return this;
}
b.SetFunctionName(IteratorPrototypeIterator,symbolIterator);
%AddNamedProperty($iteratorPrototype,symbolIterator,
IteratorPrototypeIterator,2);
})

$generatorá
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Function;
var d;
b.Import(function(e){
d=e.NewFunctionString;
});
function GeneratorObjectNext(f){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.next',this);
}
var g=%GeneratorGetContinuation(this);
if(g>0){
if((%_DebugIsActive()!=0))%DebugPrepareStepInIfStepping(this);
try{
return %_GeneratorNext(this,f);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(g==0){
return{value:void 0,done:true};
}else{
throw MakeTypeError(34);
}
}
function GeneratorObjectThrow(h){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.throw',this);
}
var g=%GeneratorGetContinuation(this);
if(g>0){
try{
return %_GeneratorThrow(this,h);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(g==0){
throw h;
}else{
throw MakeTypeError(34);
}
}
function GeneratorFunctionConstructor(i){
var j=d(arguments,'function*');
var k=%GlobalProxy(GeneratorFunctionConstructor);
var l=%_CallFunction(k,%CompileString(j,true));
%FunctionMarkNameShouldPrintAsAnonymous(l);
return l;
}
%NeverOptimizeFunction(GeneratorObjectNext);
%NeverOptimizeFunction(GeneratorObjectThrow);
var m=GeneratorFunctionPrototype.prototype;
b.InstallFunctions(m,
2,
["next",GeneratorObjectNext,
"throw",GeneratorObjectThrow]);
%AddNamedProperty(m,"constructor",
GeneratorFunctionPrototype,2|1);
%AddNamedProperty(m,
symbolToStringTag,"Generator",2|1);
%InternalSetPrototype(GeneratorFunctionPrototype,c.prototype);
%AddNamedProperty(GeneratorFunctionPrototype,
symbolToStringTag,"GeneratorFunction",2|1);
%AddNamedProperty(GeneratorFunctionPrototype,"constructor",
GeneratorFunction,2|1);
%InternalSetPrototype(GeneratorFunction,c);
%SetCode(GeneratorFunction,GeneratorFunctionConstructor);
})

8object-observe-²
var $observeEnqueueSpliceRecord;
var $observeBeginPerformSplice;
var $observeEndPerformSplice;
var $observeObjectMethods;
var $observeArrayMethods;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Array;
var d=a.Object;
var e=b.InternalArray;
var f;
var g;
b.Import(function(h){
f=h.ObjectFreeze;
g=h.ObjectIsFrozen;
});
var i;
var j={};
function GetObservationStateJS(){
if((i===(void 0))){
i=%GetObservationState();
}
if((i.callbackInfoMap===(void 0))){
i.callbackInfoMap=%ObservationWeakMapCreate();
i.objectInfoMap=%ObservationWeakMapCreate();
i.notifierObjectInfoMap=%ObservationWeakMapCreate();
i.pendingObservers=null;
i.nextCallbackPriority=0;
i.lastMicrotaskId=0;
}
return i;
}
function GetPendingObservers(){
return GetObservationStateJS().pendingObservers;
}
function SetPendingObservers(k){
GetObservationStateJS().pendingObservers=k;
}
function GetNextCallbackPriority(){
return GetObservationStateJS().nextCallbackPriority++;
}
function nullProtoObject(){
return{__proto__:null};
}
function TypeMapCreate(){
return nullProtoObject();
}
function TypeMapAddType(l,m,n){
l[m]=n?1:(l[m]||0)+1;
}
function TypeMapRemoveType(l,m){
l[m]--;
}
function TypeMapCreateFromList(o,p){
var l=TypeMapCreate();
for(var q=0;q<p;q++){
TypeMapAddType(l,o[q],true);
}
return l;
}
function TypeMapHasType(l,m){
return!!l[m];
}
function TypeMapIsDisjointFrom(r,s){
if(!r||!s)
return true;
for(var m in r){
if(TypeMapHasType(r,m)&&TypeMapHasType(s,m))
return false;
}
return true;
}
var t=(function(){
var u=[
'add',
'update',
'delete',
'setPrototype',
'reconfigure',
'preventExtensions'
];
return TypeMapCreateFromList(u,u.length);
})();
function ObserverCreate(v,w){
if((w===(void 0)))
return v;
var x=nullProtoObject();
x.callback=v;
x.accept=w;
return x;
}
function ObserverGetCallback(x){
return(%_ClassOf(x)==='Function')?x:x.callback;
}
function ObserverGetAcceptTypes(x){
return(%_ClassOf(x)==='Function')?t:x.accept;
}
function ObserverIsActive(x,y){
return TypeMapIsDisjointFrom(ObjectInfoGetPerformingTypes(y),
ObserverGetAcceptTypes(x));
}
function ObjectInfoGetOrCreate(z){
var y=ObjectInfoGet(z);
if((y===(void 0))){
if(!%_IsJSProxy(z)){
%SetIsObserved(z);
}
y={
object:z,
changeObservers:null,
notifier:null,
performing:null,
performingCount:0,
};
%WeakCollectionSet(GetObservationStateJS().objectInfoMap,
z,y,$getHash(z));
}
return y;
}
function ObjectInfoGet(z){
return %WeakCollectionGet(GetObservationStateJS().objectInfoMap,z,
$getHash(z));
}
function ObjectInfoGetFromNotifier(A){
return %WeakCollectionGet(GetObservationStateJS().notifierObjectInfoMap,
A,$getHash(A));
}
function ObjectInfoGetNotifier(y){
if((y.notifier===null)){
var A={__proto__:j};
y.notifier=A;
%WeakCollectionSet(GetObservationStateJS().notifierObjectInfoMap,
A,y,$getHash(A));
}
return y.notifier;
}
function ChangeObserversIsOptimized(B){
return(%_ClassOf(B)==='Function')||
(%_ClassOf(B.callback)==='Function');
}
function ObjectInfoNormalizeChangeObservers(y){
if(ChangeObserversIsOptimized(y.changeObservers)){
var x=y.changeObservers;
var v=ObserverGetCallback(x);
var C=CallbackInfoGet(v);
var D=CallbackInfoGetPriority(C);
y.changeObservers=nullProtoObject();
y.changeObservers[D]=x;
}
}
function ObjectInfoAddObserver(y,v,w){
var C=CallbackInfoGetOrCreate(v);
var x=ObserverCreate(v,w);
if(!y.changeObservers){
y.changeObservers=x;
return;
}
ObjectInfoNormalizeChangeObservers(y);
var D=CallbackInfoGetPriority(C);
y.changeObservers[D]=x;
}
function ObjectInfoRemoveObserver(y,v){
if(!y.changeObservers)
return;
if(ChangeObserversIsOptimized(y.changeObservers)){
if(v===ObserverGetCallback(y.changeObservers))
y.changeObservers=null;
return;
}
var C=CallbackInfoGet(v);
var D=CallbackInfoGetPriority(C);
y.changeObservers[D]=null;
}
function ObjectInfoHasActiveObservers(y){
if((y===(void 0))||!y.changeObservers)
return false;
if(ChangeObserversIsOptimized(y.changeObservers))
return ObserverIsActive(y.changeObservers,y);
for(var D in y.changeObservers){
var x=y.changeObservers[D];
if(!(x===null)&&ObserverIsActive(x,y))
return true;
}
return false;
}
function ObjectInfoAddPerformingType(y,m){
y.performing=y.performing||TypeMapCreate();
TypeMapAddType(y.performing,m);
y.performingCount++;
}
function ObjectInfoRemovePerformingType(y,m){
y.performingCount--;
TypeMapRemoveType(y.performing,m);
}
function ObjectInfoGetPerformingTypes(y){
return y.performingCount>0?y.performing:null;
}
function ConvertAcceptListToTypeMap(E){
if((E===(void 0)))
return E;
if(!(%_IsSpecObject(E)))throw MakeTypeError(71);
var F=$toInteger(E.length);
if(F<0)F=0;
return TypeMapCreateFromList(E,F);
}
function CallbackInfoGet(v){
return %WeakCollectionGet(GetObservationStateJS().callbackInfoMap,v,
$getHash(v));
}
function CallbackInfoSet(v,C){
%WeakCollectionSet(GetObservationStateJS().callbackInfoMap,
v,C,$getHash(v));
}
function CallbackInfoGetOrCreate(v){
var C=CallbackInfoGet(v);
if(!(C===(void 0)))
return C;
var D=GetNextCallbackPriority();
CallbackInfoSet(v,D);
return D;
}
function CallbackInfoGetPriority(C){
if((typeof(C)==='number'))
return C;
else
return C.priority;
}
function CallbackInfoNormalize(v){
var C=CallbackInfoGet(v);
if((typeof(C)==='number')){
var D=C;
C=new e;
C.priority=D;
CallbackInfoSet(v,C);
}
return C;
}
function ObjectObserve(z,v,w){
if(!(%_IsSpecObject(z)))
throw MakeTypeError(73,"observe","observe");
if(%IsJSGlobalProxy(z))
throw MakeTypeError(70,"observe");
if(!(%_ClassOf(v)==='Function'))
throw MakeTypeError(72,"observe");
if(g(v))
throw MakeTypeError(69);
var G=%GetObjectContextObjectObserve(z);
return G(z,v,w);
}
function NativeObjectObserve(z,v,w){
var y=ObjectInfoGetOrCreate(z);
var o=ConvertAcceptListToTypeMap(w);
ObjectInfoAddObserver(y,v,o);
return z;
}
function ObjectUnobserve(z,v){
if(!(%_IsSpecObject(z)))
throw MakeTypeError(73,"unobserve","unobserve");
if(%IsJSGlobalProxy(z))
throw MakeTypeError(70,"unobserve");
if(!(%_ClassOf(v)==='Function'))
throw MakeTypeError(72,"unobserve");
var y=ObjectInfoGet(z);
if((y===(void 0)))
return z;
ObjectInfoRemoveObserver(y,v);
return z;
}
function ArrayObserve(z,v){
return ObjectObserve(z,v,['add',
'update',
'delete',
'splice']);
}
function ArrayUnobserve(z,v){
return ObjectUnobserve(z,v);
}
function ObserverEnqueueIfActive(x,y,H){
if(!ObserverIsActive(x,y)||
!TypeMapHasType(ObserverGetAcceptTypes(x),H.type)){
return;
}
var v=ObserverGetCallback(x);
if(!%ObserverObjectAndRecordHaveSameOrigin(v,H.object,
H)){
return;
}
var C=CallbackInfoNormalize(v);
if((GetPendingObservers()===null)){
SetPendingObservers(nullProtoObject());
if((%_DebugIsActive()!=0)){
var I=++GetObservationStateJS().lastMicrotaskId;
var J="Object.observe";
%EnqueueMicrotask(function(){
%DebugAsyncTaskEvent({type:"willHandle",id:I,name:J});
ObserveMicrotaskRunner();
%DebugAsyncTaskEvent({type:"didHandle",id:I,name:J});
});
%DebugAsyncTaskEvent({type:"enqueue",id:I,name:J});
}else{
%EnqueueMicrotask(ObserveMicrotaskRunner);
}
}
GetPendingObservers()[C.priority]=v;
C.push(H);
}
function ObjectInfoEnqueueExternalChangeRecord(y,H,m){
if(!ObjectInfoHasActiveObservers(y))
return;
var K=!(m===(void 0));
var L=K?
{object:y.object,type:m}:
{object:y.object};
for(var M in H){
if(M==='object'||(K&&M==='type'))continue;
%DefineDataPropertyUnchecked(
L,M,H[M],1+4);
}
f(L);
ObjectInfoEnqueueInternalChangeRecord(y,L);
}
function ObjectInfoEnqueueInternalChangeRecord(y,H){
if((typeof(H.name)==='symbol'))return;
if(ChangeObserversIsOptimized(y.changeObservers)){
var x=y.changeObservers;
ObserverEnqueueIfActive(x,y,H);
return;
}
for(var D in y.changeObservers){
var x=y.changeObservers[D];
if((x===null))
continue;
ObserverEnqueueIfActive(x,y,H);
}
}
function BeginPerformSplice(N){
var y=ObjectInfoGet(N);
if(!(y===(void 0)))
ObjectInfoAddPerformingType(y,'splice');
}
function EndPerformSplice(N){
var y=ObjectInfoGet(N);
if(!(y===(void 0)))
ObjectInfoRemovePerformingType(y,'splice');
}
function EnqueueSpliceRecord(N,O,P,Q){
var y=ObjectInfoGet(N);
if(!ObjectInfoHasActiveObservers(y))
return;
var H={
type:'splice',
object:N,
index:O,
removed:P,
addedCount:Q
};
f(H);
f(H.removed);
ObjectInfoEnqueueInternalChangeRecord(y,H);
}
function NotifyChange(m,z,J,R){
var y=ObjectInfoGet(z);
if(!ObjectInfoHasActiveObservers(y))
return;
var H;
if(arguments.length==2){
H={type:m,object:z};
}else if(arguments.length==3){
H={type:m,object:z,name:J};
}else{
H={
type:m,
object:z,
name:J,
oldValue:R
};
}
f(H);
ObjectInfoEnqueueInternalChangeRecord(y,H);
}
function ObjectNotifierNotify(H){
if(!(%_IsSpecObject(this)))
throw MakeTypeError(14,"notify");
var y=ObjectInfoGetFromNotifier(this);
if((y===(void 0)))
throw MakeTypeError(74);
if(!(typeof(H.type)==='string'))
throw MakeTypeError(77);
ObjectInfoEnqueueExternalChangeRecord(y,H);
}
function ObjectNotifierPerformChange(S,T){
if(!(%_IsSpecObject(this)))
throw MakeTypeError(14,"performChange");
var y=ObjectInfoGetFromNotifier(this);
if((y===(void 0)))
throw MakeTypeError(74);
if(!(typeof(S)==='string'))
throw MakeTypeError(76);
if(!(%_ClassOf(T)==='Function'))
throw MakeTypeError(75);
var U=%GetObjectContextNotifierPerformChange(y);
U(y,S,T);
}
function NativeObjectNotifierPerformChange(y,S,T){
ObjectInfoAddPerformingType(y,S);
var H;
try{
H=%_CallFunction((void 0),T);
}finally{
ObjectInfoRemovePerformingType(y,S);
}
if((%_IsSpecObject(H)))
ObjectInfoEnqueueExternalChangeRecord(y,H,S);
}
function ObjectGetNotifier(z){
if(!(%_IsSpecObject(z)))
throw MakeTypeError(73,"getNotifier","getNotifier");
if(%IsJSGlobalProxy(z))
throw MakeTypeError(70,"getNotifier");
if(g(z))return null;
if(!%ObjectWasCreatedInCurrentOrigin(z))return null;
var V=%GetObjectContextObjectGetNotifier(z);
return V(z);
}
function NativeObjectGetNotifier(z){
var y=ObjectInfoGetOrCreate(z);
return ObjectInfoGetNotifier(y);
}
function CallbackDeliverPending(v){
var C=CallbackInfoGet(v);
if((C===(void 0))||(typeof(C)==='number'))
return false;
var D=C.priority;
CallbackInfoSet(v,D);
var k=GetPendingObservers();
if(!(k===null))
delete k[D];
var W=[];
%MoveArrayContents(C,W);
%DeliverObservationChangeRecords(v,W);
return true;
}
function ObjectDeliverChangeRecords(v){
if(!(%_ClassOf(v)==='Function'))
throw MakeTypeError(72,"deliverChangeRecords");
while(CallbackDeliverPending(v)){}
}
function ObserveMicrotaskRunner(){
var k=GetPendingObservers();
if(!(k===null)){
SetPendingObservers(null);
for(var q in k){
CallbackDeliverPending(k[q]);
}
}
}
b.InstallFunctions(j,2,[
"notify",ObjectNotifierNotify,
"performChange",ObjectNotifierPerformChange
]);
$observeObjectMethods=[
"deliverChangeRecords",ObjectDeliverChangeRecords,
"getNotifier",ObjectGetNotifier,
"observe",ObjectObserve,
"unobserve",ObjectUnobserve
];
$observeArrayMethods=[
"observe",ArrayObserve,
"unobserve",ArrayUnobserve
];
var X=function(Y,q){
if(q % 2===1)%FunctionRemovePrototype(Y);
};
$observeObjectMethods.forEach(X);
$observeArrayMethods.forEach(X);
$observeEnqueueSpliceRecord=EnqueueSpliceRecord;
$observeBeginPerformSplice=BeginPerformSplice;
$observeEndPerformSplice=EndPerformSplice;
b.ExportToRuntime(function(Z){
Z["native_object_get_notifier"]=NativeObjectGetNotifier;
Z["native_object_notifier_perform_change"]=
NativeObjectNotifierPerformChange;
Z["native_object_observe"]=NativeObjectObserve;
Z["observers_begin_perform_splice"]=BeginPerformSplice;
Z["observers_end_perform_splice"]=EndPerformSplice;
Z["observers_enqueue_splice"]=EnqueueSpliceRecord;
Z["observers_notify_change"]=NotifyChange;
});
})

(collection½
var $getHash;
var $getExistingHash;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=a.Object;
var e=a.Set;
var f=b.GetPrivateSymbol("hash_code_symbol");
var g;
b.Import(function(h){
g=h.IntRandom;
});
var i;
b.Import(function(h){
i=h.NumberIsNaN;
});
function HashToEntry(j,k,l){
var m=(k&((l)-1));
return((%_FixedArrayGet(j,(3+(m))|0)));
}
%SetForceInlineFlag(HashToEntry);
function SetFindEntry(j,l,n,k){
var o=HashToEntry(j,k,l);
if(o===-1)return o;
var p=((%_FixedArrayGet(j,((3+(l)+((o)<<1)))|0)));
if(n===p)return o;
var q=i(n);
while(true){
if(q&&i(p)){
return o;
}
o=((%_FixedArrayGet(j,((3+(l)+((o)<<1))+1)|0)));
if(o===-1)return o;
p=((%_FixedArrayGet(j,((3+(l)+((o)<<1)))|0)));
if(n===p)return o;
}
return-1;
}
%SetForceInlineFlag(SetFindEntry);
function MapFindEntry(j,l,n,k){
var o=HashToEntry(j,k,l);
if(o===-1)return o;
var p=((%_FixedArrayGet(j,((3+(l)+((o)*3)))|0)));
if(n===p)return o;
var q=i(n);
while(true){
if(q&&i(p)){
return o;
}
o=((%_FixedArrayGet(j,((3+(l)+((o)*3))+2)|0)));
if(o===-1)return o;
p=((%_FixedArrayGet(j,((3+(l)+((o)*3)))|0)));
if(n===p)return o;
}
return-1;
}
%SetForceInlineFlag(MapFindEntry);
function ComputeIntegerHash(n,r){
var k=n;
k=k^r;
k=~k+(k<<15);
k=k^(k>>>12);
k=k+(k<<2);
k=k^(k>>>4);
k=(k*2057)|0;
k=k^(k>>>16);
return k&0x3fffffff;
}
%SetForceInlineFlag(ComputeIntegerHash);
function GetExistingHash(n){
if(%_IsSmi(n)){
return ComputeIntegerHash(n,0);
}
if((typeof(n)==='string')){
var s=%_StringGetRawHashField(n);
if((s&1)===0){
return s>>>2;
}
}else if((%_IsSpecObject(n))&&!%_IsJSProxy(n)&&!(%_ClassOf(n)==='global')){
var k=(n[f]);
return k;
}
return %GenericHash(n);
}
%SetForceInlineFlag(GetExistingHash);
function GetHash(n){
var k=GetExistingHash(n);
if((k===(void 0))){
k=g()|0;
if(k===0)k=1;
(n[f]=k);
}
return k;
}
%SetForceInlineFlag(GetHash);
function SetConstructor(t){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"Set");
}
%_SetInitialize(this);
if(!(t==null)){
var u=this.add;
if(!(%_ClassOf(u)==='Function')){
throw MakeTypeError(81,'add',this);
}
for(var v of t){
%_CallFunction(this,v,u);
}
}
}
function SetAdd(n){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,'Set.prototype.add',this);
}
if(n===0){
n=0;
}
var j=%_JSCollectionGetTable(this);
var l=((%_FixedArrayGet(j,(0)|0)));
var k=GetHash(n);
if(SetFindEntry(j,l,n,k)!==-1)return this;
var w=((%_FixedArrayGet(j,(1)|0)));
var x=((%_FixedArrayGet(j,(2)|0)));
var y=l<<1;
if((w+x)>=y){
%SetGrow(this);
j=%_JSCollectionGetTable(this);
l=((%_FixedArrayGet(j,(0)|0)));
w=((%_FixedArrayGet(j,(1)|0)));
x=((%_FixedArrayGet(j,(2)|0)));
}
var o=w+x;
var z=(3+(l)+((o)<<1));
var m=(k&((l)-1));
var A=((%_FixedArrayGet(j,(3+(m))|0)));
((%_FixedArraySet(j,(3+(m))|0,o)));
(((%_FixedArraySet(j,(1)|0,(w+1)|0))));
(%_FixedArraySet(j,(z)|0,n));
((%_FixedArraySet(j,(z+1)|0,(A)|0)));
return this;
}
function SetHas(n){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,'Set.prototype.has',this);
}
var j=%_JSCollectionGetTable(this);
var l=((%_FixedArrayGet(j,(0)|0)));
var k=GetExistingHash(n);
if((k===(void 0)))return false;
return SetFindEntry(j,l,n,k)!==-1;
}
function SetDelete(n){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.delete',this);
}
var j=%_JSCollectionGetTable(this);
var l=((%_FixedArrayGet(j,(0)|0)));
var k=GetExistingHash(n);
if((k===(void 0)))return false;
var o=SetFindEntry(j,l,n,k);
if(o===-1)return false;
var w=((%_FixedArrayGet(j,(1)|0)))-1;
var x=((%_FixedArrayGet(j,(2)|0)))+1;
var z=(3+(l)+((o)<<1));
(%_FixedArraySet(j,(z)|0,%_TheHole()));
(((%_FixedArraySet(j,(1)|0,(w)|0))));
(((%_FixedArraySet(j,(2)|0,(x)|0))));
if(w<(l>>>1))%SetShrink(this);
return true;
}
function SetGetSize(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.size',this);
}
var j=%_JSCollectionGetTable(this);
return((%_FixedArrayGet(j,(1)|0)));
}
function SetClearJS(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.clear',this);
}
%_SetClear(this);
}
function SetForEach(B,C){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.forEach',this);
}
if(!(%_ClassOf(B)==='Function'))throw MakeTypeError(13,B);
var D=false;
if((C===null)){
if(%IsSloppyModeFunction(B))C=(void 0);
}else if(!(C===(void 0))){
D=(!(%_IsSpecObject(C))&&%IsSloppyModeFunction(B));
}
var E=new SetIterator(this,2);
var n;
var F=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(B);
var G=[(void 0)];
while(%SetIteratorNext(E,G)){
if(F)%DebugPrepareStepInIfStepping(B);
n=G[0];
var H=D?(%_ToObject(C)):C;
%_CallFunction(H,n,n,this,B);
}
}
%SetCode(e,SetConstructor);
%FunctionSetLength(e,0);
%FunctionSetPrototype(e,new d());
%AddNamedProperty(e.prototype,"constructor",e,2);
%AddNamedProperty(e.prototype,symbolToStringTag,"Set",
2|1);
%FunctionSetLength(SetForEach,1);
b.InstallGetter(e.prototype,"size",SetGetSize);
b.InstallFunctions(e.prototype,2,[
"add",SetAdd,
"has",SetHas,
"delete",SetDelete,
"clear",SetClearJS,
"forEach",SetForEach
]);
function MapConstructor(t){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"Map");
}
%_MapInitialize(this);
if(!(t==null)){
var u=this.set;
if(!(%_ClassOf(u)==='Function')){
throw MakeTypeError(81,'set',this);
}
for(var I of t){
if(!(%_IsSpecObject(I))){
throw MakeTypeError(42,I);
}
%_CallFunction(this,I[0],I[1],u);
}
}
}
function MapGet(n){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.get',this);
}
var j=%_JSCollectionGetTable(this);
var l=((%_FixedArrayGet(j,(0)|0)));
var k=GetExistingHash(n);
if((k===(void 0)))return(void 0);
var o=MapFindEntry(j,l,n,k);
if(o===-1)return(void 0);
return((%_FixedArrayGet(j,((3+(l)+((o)*3))+1)|0)));
}
function MapSet(n,v){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.set',this);
}
if(n===0){
n=0;
}
var j=%_JSCollectionGetTable(this);
var l=((%_FixedArrayGet(j,(0)|0)));
var k=GetHash(n);
var o=MapFindEntry(j,l,n,k);
if(o!==-1){
var J=(3+(l)+((o)*3));
(%_FixedArraySet(j,(J+1)|0,v));
return this;
}
var w=((%_FixedArrayGet(j,(1)|0)));
var x=((%_FixedArrayGet(j,(2)|0)));
var y=l<<1;
if((w+x)>=y){
%MapGrow(this);
j=%_JSCollectionGetTable(this);
l=((%_FixedArrayGet(j,(0)|0)));
w=((%_FixedArrayGet(j,(1)|0)));
x=((%_FixedArrayGet(j,(2)|0)));
}
o=w+x;
var z=(3+(l)+((o)*3));
var m=(k&((l)-1));
var A=((%_FixedArrayGet(j,(3+(m))|0)));
((%_FixedArraySet(j,(3+(m))|0,o)));
(((%_FixedArraySet(j,(1)|0,(w+1)|0))));
(%_FixedArraySet(j,(z)|0,n));
(%_FixedArraySet(j,(z+1)|0,v));
(%_FixedArraySet(j,(z+2)|0,A));
return this;
}
function MapHas(n){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.has',this);
}
var j=%_JSCollectionGetTable(this);
var l=((%_FixedArrayGet(j,(0)|0)));
var k=GetHash(n);
return MapFindEntry(j,l,n,k)!==-1;
}
function MapDelete(n){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.delete',this);
}
var j=%_JSCollectionGetTable(this);
var l=((%_FixedArrayGet(j,(0)|0)));
var k=GetHash(n);
var o=MapFindEntry(j,l,n,k);
if(o===-1)return false;
var w=((%_FixedArrayGet(j,(1)|0)))-1;
var x=((%_FixedArrayGet(j,(2)|0)))+1;
var z=(3+(l)+((o)*3));
(%_FixedArraySet(j,(z)|0,%_TheHole()));
(%_FixedArraySet(j,(z+1)|0,%_TheHole()));
(((%_FixedArraySet(j,(1)|0,(w)|0))));
(((%_FixedArraySet(j,(2)|0,(x)|0))));
if(w<(l>>>1))%MapShrink(this);
return true;
}
function MapGetSize(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.size',this);
}
var j=%_JSCollectionGetTable(this);
return((%_FixedArrayGet(j,(1)|0)));
}
function MapClearJS(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.clear',this);
}
%_MapClear(this);
}
function MapForEach(B,C){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.forEach',this);
}
if(!(%_ClassOf(B)==='Function'))throw MakeTypeError(13,B);
var D=false;
if((C===null)){
if(%IsSloppyModeFunction(B))C=(void 0);
}else if(!(C===(void 0))){
D=(!(%_IsSpecObject(C))&&%IsSloppyModeFunction(B));
}
var E=new MapIterator(this,3);
var F=(%_DebugIsActive()!=0)&&%DebugCallbackSupportsStepping(B);
var G=[(void 0),(void 0)];
while(%MapIteratorNext(E,G)){
if(F)%DebugPrepareStepInIfStepping(B);
var H=D?(%_ToObject(C)):C;
%_CallFunction(H,G[1],G[0],this,B);
}
}
%SetCode(c,MapConstructor);
%FunctionSetLength(c,0);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(c.prototype,"constructor",c,2);
%AddNamedProperty(
c.prototype,symbolToStringTag,"Map",2|1);
%FunctionSetLength(MapForEach,1);
b.InstallGetter(c.prototype,"size",MapGetSize);
b.InstallFunctions(c.prototype,2,[
"get",MapGet,
"set",MapSet,
"has",MapHas,
"delete",MapDelete,
"clear",MapClearJS,
"forEach",MapForEach
]);
$getHash=GetHash;
$getExistingHash=GetExistingHash;
function MapFromArray(K){
var L=new c;
var M=K.length;
for(var N=0;N<M;N+=2){
var n=K[N];
var v=K[N+1];
%_CallFunction(L,n,v,MapSet);
}
return L;
};
function SetFromArray(K){
var O=new e;
var M=K.length;
for(var N=0;N<M;++N){
%_CallFunction(O,K[N],SetAdd);
}
return O;
};
b.ExportToRuntime(function(P){
P["map_get"]=MapGet;
P["map_set"]=MapSet;
P["map_has"]=MapHas;
P["map_delete"]=MapDelete;
P["set_add"]=SetAdd;
P["set_has"]=SetHas;
P["set_delete"]=SetDelete;
P["map_from_array"]=MapFromArray;
P["set_from_array"]=SetFromArray;
});
})

<weak-collectionM0
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.WeakMap;
var e=a.WeakSet;
function WeakMapConstructor(f){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"WeakMap");
}
%WeakCollectionInitialize(this);
if(!(f==null)){
var g=this.set;
if(!(%_ClassOf(g)==='Function')){
throw MakeTypeError(81,'set',this);
}
for(var h of f){
if(!(%_IsSpecObject(h))){
throw MakeTypeError(42,h);
}
%_CallFunction(this,h[0],h[1],g);
}
}
}
function WeakMapGet(i){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.get',this);
}
if(!(%_IsSpecObject(i)))return(void 0);
var j=$getExistingHash(i);
if((j===(void 0)))return(void 0);
return %WeakCollectionGet(this,i,j);
}
function WeakMapSet(i,k){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.set',this);
}
if(!(%_IsSpecObject(i)))throw MakeTypeError(138);
return %WeakCollectionSet(this,i,k,$getHash(i));
}
function WeakMapHas(i){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.has',this);
}
if(!(%_IsSpecObject(i)))return false;
var j=$getExistingHash(i);
if((j===(void 0)))return false;
return %WeakCollectionHas(this,i,j);
}
function WeakMapDelete(i){
if(!(%_ClassOf(this)==='WeakMap')){
throw MakeTypeError(36,
'WeakMap.prototype.delete',this);
}
if(!(%_IsSpecObject(i)))return false;
var j=$getExistingHash(i);
if((j===(void 0)))return false;
return %WeakCollectionDelete(this,i,j);
}
%SetCode(d,WeakMapConstructor);
%FunctionSetLength(d,0);
%FunctionSetPrototype(d,new c());
%AddNamedProperty(d.prototype,"constructor",d,
2);
%AddNamedProperty(d.prototype,symbolToStringTag,"WeakMap",
2|1);
b.InstallFunctions(d.prototype,2,[
"get",WeakMapGet,
"set",WeakMapSet,
"has",WeakMapHas,
"delete",WeakMapDelete
]);
function WeakSetConstructor(f){
if(!%_IsConstructCall()){
throw MakeTypeError(21,"WeakSet");
}
%WeakCollectionInitialize(this);
if(!(f==null)){
var g=this.add;
if(!(%_ClassOf(g)==='Function')){
throw MakeTypeError(81,'add',this);
}
for(var k of f){
%_CallFunction(this,k,g);
}
}
}
function WeakSetAdd(k){
if(!(%_ClassOf(this)==='WeakSet')){
throw MakeTypeError(36,
'WeakSet.prototype.add',this);
}
if(!(%_IsSpecObject(k)))throw MakeTypeError(139);
return %WeakCollectionSet(this,k,true,$getHash(k));
}
function WeakSetHas(k){
if(!(%_ClassOf(this)==='WeakSet')){
throw MakeTypeError(36,
'WeakSet.prototype.has',this);
}
if(!(%_IsSpecObject(k)))return false;
var j=$getExistingHash(k);
if((j===(void 0)))return false;
return %WeakCollectionHas(this,k,j);
}
function WeakSetDelete(k){
if(!(%_ClassOf(this)==='WeakSet')){
throw MakeTypeError(36,
'WeakSet.prototype.delete',this);
}
if(!(%_IsSpecObject(k)))return false;
var j=$getExistingHash(k);
if((j===(void 0)))return false;
return %WeakCollectionDelete(this,k,j);
}
%SetCode(e,WeakSetConstructor);
%FunctionSetLength(e,0);
%FunctionSetPrototype(e,new c());
%AddNamedProperty(e.prototype,"constructor",e,
2);
%AddNamedProperty(e.prototype,symbolToStringTag,"WeakSet",
2|1);
b.InstallFunctions(e.prototype,2,[
"add",WeakSetAdd,
"has",WeakSetHas,
"delete",WeakSetDelete
]);
})

Lcollection-iterator¥+
var $mapEntries;
var $mapIteratorNext;
var $setIteratorNext;
var $setValues;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=a.Set;
function SetIteratorConstructor(e,f){
%SetIteratorInitialize(this,e,f);
}
function SetIteratorNextJS(){
if(!(%_ClassOf(this)==='Set Iterator')){
throw MakeTypeError(36,
'Set Iterator.prototype.next',this);
}
var g=[(void 0),(void 0)];
var h={value:g,done:false};
switch(%SetIteratorNext(this,g)){
case 0:
h.value=(void 0);
h.done=true;
break;
case 2:
h.value=g[0];
break;
case 3:
g[1]=g[0];
break;
}
return h;
}
function SetEntries(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.entries',this);
}
return new SetIterator(this,3);
}
function SetValues(){
if(!(%_ClassOf(this)==='Set')){
throw MakeTypeError(36,
'Set.prototype.values',this);
}
return new SetIterator(this,2);
}
%SetCode(SetIterator,SetIteratorConstructor);
%FunctionSetPrototype(SetIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(SetIterator,'Set Iterator');
b.InstallFunctions(SetIterator.prototype,2,[
'next',SetIteratorNextJS
]);
%AddNamedProperty(SetIterator.prototype,symbolToStringTag,
"Set Iterator",1|2);
b.InstallFunctions(d.prototype,2,[
'entries',SetEntries,
'keys',SetValues,
'values',SetValues
]);
%AddNamedProperty(d.prototype,symbolIterator,SetValues,2);
$setIteratorNext=SetIteratorNextJS;
$setValues=SetValues;
function MapIteratorConstructor(i,f){
%MapIteratorInitialize(this,i,f);
}
function MapIteratorNextJS(){
if(!(%_ClassOf(this)==='Map Iterator')){
throw MakeTypeError(36,
'Map Iterator.prototype.next',this);
}
var g=[(void 0),(void 0)];
var h={value:g,done:false};
switch(%MapIteratorNext(this,g)){
case 0:
h.value=(void 0);
h.done=true;
break;
case 1:
h.value=g[0];
break;
case 2:
h.value=g[1];
break;
}
return h;
}
function MapEntries(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.entries',this);
}
return new MapIterator(this,3);
}
function MapKeys(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.keys',this);
}
return new MapIterator(this,1);
}
function MapValues(){
if(!(%_ClassOf(this)==='Map')){
throw MakeTypeError(36,
'Map.prototype.values',this);
}
return new MapIterator(this,2);
}
%SetCode(MapIterator,MapIteratorConstructor);
%FunctionSetPrototype(MapIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(MapIterator,'Map Iterator');
b.InstallFunctions(MapIterator.prototype,2,[
'next',MapIteratorNextJS
]);
%AddNamedProperty(MapIterator.prototype,symbolToStringTag,
"Map Iterator",1|2);
b.InstallFunctions(c.prototype,2,[
'entries',MapEntries,
'keys',MapKeys,
'values',MapValues
]);
%AddNamedProperty(c.prototype,symbolIterator,MapEntries,2);
$mapEntries=MapEntries;
$mapIteratorNext=MapIteratorNextJS;
})

promise…c
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=b.InternalArray;
var d=
b.GetPrivateSymbol("promise_has_handler_symbol");
var e=b.GetPrivateSymbol("promise_on_reject_symbol");
var f=
b.GetPrivateSymbol("promise_on_resolve_symbol");
var g=b.GetPrivateSymbol("promise_raw_symbol");
var h=b.GetPrivateSymbol("promise_status_symbol");
var i=b.GetPrivateSymbol("promise_value_symbol");
var j=0;
var k=function Promise(l){
if(l===g)return;
if(!%_IsConstructCall())throw MakeTypeError(54,this);
if(!(%_ClassOf(l)==='Function'))
throw MakeTypeError(100,l);
var m=PromiseInit(this);
try{
%DebugPushPromise(m,Promise);
l(function(n){PromiseResolve(m,n)},
function(o){PromiseReject(m,o)});
}catch(e){
PromiseReject(m,e);
}finally{
%DebugPopPromise();
}
}
function PromiseSet(m,p,q,r,s){
(m[h]=p);
(m[i]=q);
(m[f]=r);
(m[e]=s);
if((%_DebugIsActive()!=0)){
%DebugPromiseEvent({promise:m,status:p,value:q});
}
return m;
}
function PromiseCreateAndSet(p,q){
var m=new k(g);
if((%_DebugIsActive()!=0))PromiseSet(m,0,(void 0));
return PromiseSet(m,p,q);
}
function PromiseInit(m){
return PromiseSet(
m,0,(void 0),new c,new c)
}
function PromiseDone(m,p,q,t){
if((m[h])===0){
var u=(m[t]);
if(u.length)PromiseEnqueue(q,u,p);
PromiseSet(m,p,q);
}
}
function PromiseCoerce(v,n){
if(!IsPromise(n)&&(%_IsSpecObject(n))){
var w;
try{
w=n.then;
}catch(o){
return %_CallFunction(v,o,PromiseRejected);
}
if((%_ClassOf(w)==='Function')){
var x=%_CallFunction(v,PromiseDeferred);
try{
%_CallFunction(n,x.resolve,x.reject,w);
}catch(o){
x.reject(o);
}
return x.promise;
}
}
return n;
}
function PromiseHandle(q,y,x){
try{
%DebugPushPromise(x.promise,PromiseHandle);
if((%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(y)))%DebugPrepareStepInIfStepping(y);
var z=y(q);
if(z===x.promise)
throw MakeTypeError(79,z);
else if(IsPromise(z))
%_CallFunction(z,x.resolve,x.reject,PromiseChain);
else
x.resolve(z);
}catch(exception){
try{x.reject(exception);}catch(e){}
}finally{
%DebugPopPromise();
}
}
function PromiseEnqueue(q,u,p){
var A,B,C=(%_DebugIsActive()!=0);
%EnqueueMicrotask(function(){
if(C){
%DebugAsyncTaskEvent({type:"willHandle",id:A,name:B});
}
for(var D=0;D<u.length;D+=2){
PromiseHandle(q,u[D],u[D+1])
}
if(C){
%DebugAsyncTaskEvent({type:"didHandle",id:A,name:B});
}
});
if(C){
A=++j;
B=p>0?"Promise.resolve":"Promise.reject";
%DebugAsyncTaskEvent({type:"enqueue",id:A,name:B});
}
}
function PromiseIdResolveHandler(n){return n}
function PromiseIdRejectHandler(o){throw o}
function PromiseNopResolver(){}
function IsPromise(n){
return(%_IsSpecObject(n))&&(!(n[h]===(void 0)));
}
function PromiseCreate(){
return new k(PromiseNopResolver)
}
function PromiseResolve(m,n){
PromiseDone(m,+1,n,f)
}
function PromiseReject(m,o){
if((m[h])==0){
var E=(%_DebugIsActive()!=0);
if(E||
!(!(m[d]===(void 0)))){
%PromiseRejectEvent(m,o,E);
}
}
PromiseDone(m,-1,o,e)
}
function PromiseDeferred(){
if(this===k){
var m=PromiseInit(new k(g));
return{
promise:m,
resolve:function(n){PromiseResolve(m,n)},
reject:function(o){PromiseReject(m,o)}
};
}else{
var z={promise:(void 0),reject:(void 0),resolve:(void 0)};
z.promise=new this(function(F,G){
z.resolve=F;
z.reject=G;
});
return z;
}
}
function PromiseResolved(n){
if(this===k){
return PromiseCreateAndSet(+1,n);
}else{
return new this(function(F,G){F(n)});
}
}
function PromiseRejected(o){
var m;
if(this===k){
m=PromiseCreateAndSet(-1,o);
%PromiseRejectEvent(m,o,false);
}else{
m=new this(function(F,G){G(o)});
}
return m;
}
function PromiseChain(r,s){
r=(r===(void 0))?PromiseIdResolveHandler:r;
s=(s===(void 0))?PromiseIdRejectHandler:s;
var x=%_CallFunction(this.constructor,PromiseDeferred);
switch((this[h])){
case(void 0):
throw MakeTypeError(54,this);
case 0:
(this[f]).push(r,x);
(this[e]).push(s,x);
break;
case+1:
PromiseEnqueue((this[i]),
[r,x],
+1);
break;
case-1:
if(!(!(this[d]===(void 0)))){
%PromiseRevokeReject(this);
}
PromiseEnqueue((this[i]),
[s,x],
-1);
break;
}
(this[d]=true);
if((%_DebugIsActive()!=0)){
%DebugPromiseEvent({promise:x.promise,parentPromise:this});
}
return x.promise;
}
function PromiseCatch(s){
return this.then((void 0),s);
}
function PromiseThen(r,s){
r=(%_ClassOf(r)==='Function')?r
:PromiseIdResolveHandler;
s=(%_ClassOf(s)==='Function')?s
:PromiseIdRejectHandler;
var H=this;
var v=this.constructor;
return %_CallFunction(
this,
function(n){
n=PromiseCoerce(v,n);
if(n===H){
if((%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(s)))%DebugPrepareStepInIfStepping(s);
return s(MakeTypeError(79,n));
}else if(IsPromise(n)){
return n.then(r,s);
}else{
if((%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(r)))%DebugPrepareStepInIfStepping(r);
return r(n);
}
},
s,
PromiseChain
);
}
function PromiseCast(n){
return IsPromise(n)?n:new this(function(F){F(n)});
}
function PromiseAll(I){
var x=%_CallFunction(this,PromiseDeferred);
var J=[];
try{
var K=0;
var D=0;
for(var q of I){
this.resolve(q).then(
(function(D){
return function(n){
J[D]=n;
if(--K===0)x.resolve(J);
}
})(D),
function(o){x.reject(o);});
++D;
++K;
}
if(K===0){
x.resolve(J);
}
}catch(e){
x.reject(e)
}
return x.promise;
}
function PromiseRace(I){
var x=%_CallFunction(this,PromiseDeferred);
try{
for(var q of I){
this.resolve(q).then(
function(n){x.resolve(n)},
function(o){x.reject(o)});
}
}catch(e){
x.reject(e)
}
return x.promise;
}
function PromiseHasUserDefinedRejectHandlerRecursive(m){
var L=(m[e]);
if((L===(void 0)))return false;
for(var D=0;D<L.length;D+=2){
if(L[D]!=PromiseIdRejectHandler)return true;
if(PromiseHasUserDefinedRejectHandlerRecursive(L[D+1].promise)){
return true;
}
}
return false;
}
function PromiseHasUserDefinedRejectHandler(){
return PromiseHasUserDefinedRejectHandlerRecursive(this);
};
%AddNamedProperty(a,'Promise',k,2);
%AddNamedProperty(k.prototype,symbolToStringTag,"Promise",
2|1);
b.InstallFunctions(k,2,[
"defer",PromiseDeferred,
"accept",PromiseResolved,
"reject",PromiseRejected,
"all",PromiseAll,
"race",PromiseRace,
"resolve",PromiseCast
]);
b.InstallFunctions(k.prototype,2,[
"chain",PromiseChain,
"then",PromiseThen,
"catch",PromiseCatch
]);
b.ExportToRuntime(function(M){
M["promise_catch"]=PromiseCatch;
M["promise_chain"]=PromiseChain;
M["promise_create"]=PromiseCreate;
M["promise_has_user_defined_reject_handler"]=
PromiseHasUserDefinedRejectHandler;
M["promise_reject"]=PromiseReject;
M["promise_resolve"]=PromiseResolve;
M["promise_then"]=PromiseThen;
});
})

 messagesíä
var $errorToString;
var MakeError;
var MakeEvalError;
var MakeRangeError;
var MakeReferenceError;
var MakeSyntaxError;
var MakeTypeError;
var MakeURIError;
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e;
var f;
var g=
b.GetPrivateSymbol("call_site_receiver_symbol");
var h=
b.GetPrivateSymbol("call_site_function_symbol");
var i=
b.GetPrivateSymbol("call_site_position_symbol");
var j=b.GetPrivateSymbol("call_site_strict_symbol");
var k;
var l=
b.GetPrivateSymbol("formatted_stack_trace_symbol");
var m
var n=a.Object;
var o;
var p;
var q;
var r=b.InternalArray;
var s=b.GetPrivateSymbol("internal_error_symbol");
var t;
var u;
var v=b.GetPrivateSymbol("stack_trace_symbol");
var w;
var x;
var y;
var z;
b.Import(function(A){
c=A.ArrayJoin;
d=A.Bool16x8ToString;
e=A.Bool32x4ToString;
f=A.Bool8x16ToString;
k=A.Float32x4ToString;
m=A.FunctionSourceString;
o=A.Int16x8ToString;
p=A.Int32x4ToString;
q=A.Int8x16ToString;
t=A.ObjectDefineProperty;
u=A.ObjectToString;
w=A.StringCharAt;
x=A.StringIndexOf;
y=A.StringSubstring;
});
b.ImportNow(function(A){
z=A.ToString;
});
var B;
var C;
var D;
var E;
var F;
var G;
var H;
function NoSideEffectsObjectToString(){
if((this===(void 0)))return"[object Undefined]";
if((this===null))return"[object Null]";
return"[object "+%_ClassOf((%_ToObject(this)))+"]";
}
function NoSideEffectToString(I){
if((typeof(I)==='string'))return I;
if((typeof(I)==='number'))return %_NumberToString(I);
if((typeof(I)==='boolean'))return I?'true':'false';
if((I===(void 0)))return'undefined';
if((I===null))return'null';
if((%_IsFunction(I))){
var J=%_CallFunction(I,I,m);
if(J.length>128){
J=%_SubString(J,0,111)+"...<omitted>..."+
%_SubString(J,J.length-2,J.length);
}
return J;
}
if((typeof(I)==='symbol'))return %_CallFunction(I,$symbolToString);
if((%_IsSimdValue(I))){
switch(typeof(I)){
case'float32x4':return %_CallFunction(I,k);
case'int32x4':return %_CallFunction(I,p);
case'bool32x4':return %_CallFunction(I,e);
case'int16x8':return %_CallFunction(I,o);
case'bool16x8':return %_CallFunction(I,d);
case'int16x8':return %_CallFunction(I,o);
case'bool16x8':return %_CallFunction(I,d);
}
}
if((%_IsObject(I))
&&%GetDataProperty(I,"toString")===u){
var K=%GetDataProperty(I,"constructor");
if(typeof K=="function"){
var L=K.name;
if((typeof(L)==='string')&&L!==""){
return"#<"+L+">";
}
}
}
if(CanBeSafelyTreatedAsAnErrorObject(I)){
return %_CallFunction(I,ErrorToString);
}
return %_CallFunction(I,NoSideEffectsObjectToString);
}
function CanBeSafelyTreatedAsAnErrorObject(I){
switch(%_ClassOf(I)){
case'Error':
case'EvalError':
case'RangeError':
case'ReferenceError':
case'SyntaxError':
case'TypeError':
case'URIError':
return true;
}
var M=%GetDataProperty(I,"toString");
return I instanceof B&&M===ErrorToString;
}
function ToStringCheckErrorObject(I){
if(CanBeSafelyTreatedAsAnErrorObject(I)){
return %_CallFunction(I,ErrorToString);
}else{
return z(I);
}
}
function ToDetailString(I){
if(I!=null&&(%_IsObject(I))&&I.toString===u){
var K=I.constructor;
if(typeof K=="function"){
var L=K.name;
if((typeof(L)==='string')&&L!==""){
return"#<"+L+">";
}
}
}
return ToStringCheckErrorObject(I);
}
function MakeGenericError(K,N,O,P,Q){
var R=new K(FormatMessage(N,O,P,Q));
R[s]=true;
return R;
}
%FunctionSetInstanceClassName(Script,'Script');
%AddNamedProperty(Script.prototype,'constructor',Script,
2|4|1);
%SetCode(Script,function(S){
throw MakeError(6);
});
function FormatMessage(N,O,P,Q){
var O=NoSideEffectToString(O);
var P=NoSideEffectToString(P);
var Q=NoSideEffectToString(Q);
try{
return %FormatMessageString(N,O,P,Q);
}catch(e){
return"<error>";
}
}
function GetLineNumber(T){
var U=%MessageGetStartPosition(T);
if(U==-1)return 0;
var V=%MessageGetScript(T);
var W=V.locationFromPosition(U,true);
if(W==null)return 0;
return W.line+1;
}
function GetColumnNumber(T){
var V=%MessageGetScript(T);
var U=%MessageGetStartPosition(T);
var W=V.locationFromPosition(U,true);
if(W==null)return-1;
return W.column;
}
function GetSourceLine(T){
var V=%MessageGetScript(T);
var U=%MessageGetStartPosition(T);
var W=V.locationFromPosition(U,true);
if(W==null)return"";
return W.sourceText();
}
function ScriptLineFromPosition(X){
var Y=0;
var Z=this.lineCount()-1;
var aa=this.line_ends;
if(X>aa[Z]){
return-1;
}
if(X<=aa[0]){
return 0;
}
while(Z>=1){
var ab=(Y+Z)>>1;
if(X>aa[ab]){
Y=ab+1;
}else if(X<=aa[ab-1]){
Z=ab-1;
}else{
return ab;
}
}
return-1;
}
function ScriptLocationFromPosition(X,
include_resource_offset){
var ac=this.lineFromPosition(X);
if(ac==-1)return null;
var aa=this.line_ends;
var ad=ac==0?0:aa[ac-1]+1;
var ae=aa[ac];
if(ae>0&&%_CallFunction(this.source,ae-1,w)=='\r'){
ae--;
}
var af=X-ad;
if(include_resource_offset){
ac+=this.line_offset;
if(ac==this.line_offset){
af+=this.column_offset;
}
}
return new SourceLocation(this,X,ac,af,ad,ae);
}
function ScriptLocationFromLine(ag,ah,ai){
var ac=0;
if(!(ag===(void 0))){
ac=ag-this.line_offset;
}
var af=ah||0;
if(ac==0){
af-=this.column_offset;
}
var aj=ai||0;
if(ac<0||af<0||aj<0)return null;
if(ac==0){
return this.locationFromPosition(aj+af,false);
}else{
var ak=this.lineFromPosition(aj);
if(ak==-1||ak+ac>=this.lineCount()){
return null;
}
return this.locationFromPosition(
this.line_ends[ak+ac-1]+1+af);
}
}
function ScriptSourceSlice(al,am){
var an=(al===(void 0))?this.line_offset
:al;
var ao=(am===(void 0))?this.line_offset+this.lineCount()
:am;
an-=this.line_offset;
ao-=this.line_offset;
if(an<0)an=0;
if(ao>this.lineCount())ao=this.lineCount();
if(an>=this.lineCount()||
ao<0||
an>ao){
return null;
}
var aa=this.line_ends;
var ap=an==0?0:aa[an-1]+1;
var aq=ao==0?0:aa[ao-1]+1;
return new SourceSlice(this,
an+this.line_offset,
ao+this.line_offset,
ap,aq);
}
function ScriptSourceLine(ag){
var ac=0;
if(!(ag===(void 0))){
ac=ag-this.line_offset;
}
if(ac<0||this.lineCount()<=ac){
return null;
}
var aa=this.line_ends;
var ad=ac==0?0:aa[ac-1]+1;
var ae=aa[ac];
return %_CallFunction(this.source,ad,ae,y);
}
function ScriptLineCount(){
return this.line_ends.length;
}
function ScriptLineEnd(ar){
return this.line_ends[ar];
}
function ScriptNameOrSourceURL(){
if(this.source_url)return this.source_url;
return this.name;
}
b.SetUpLockedPrototype(Script,[
"source",
"name",
"source_url",
"source_mapping_url",
"line_ends",
"line_offset",
"column_offset"
],[
"lineFromPosition",ScriptLineFromPosition,
"locationFromPosition",ScriptLocationFromPosition,
"locationFromLine",ScriptLocationFromLine,
"sourceSlice",ScriptSourceSlice,
"sourceLine",ScriptSourceLine,
"lineCount",ScriptLineCount,
"nameOrSourceURL",ScriptNameOrSourceURL,
"lineEnd",ScriptLineEnd
]
);
function SourceLocation(V,X,ac,af,ad,ae){
this.script=V;
this.position=X;
this.line=ac;
this.column=af;
this.start=ad;
this.end=ae;
}
function SourceLocationSourceText(){
return %_CallFunction(this.script.source,
this.start,
this.end,
y);
}
b.SetUpLockedPrototype(SourceLocation,
["script","position","line","column","start","end"],
["sourceText",SourceLocationSourceText]
);
function SourceSlice(V,an,ao,ap,aq){
this.script=V;
this.from_line=an;
this.to_line=ao;
this.from_position=ap;
this.to_position=aq;
}
function SourceSliceSourceText(){
return %_CallFunction(this.script.source,
this.from_position,
this.to_position,
y);
}
b.SetUpLockedPrototype(SourceSlice,
["script","from_line","to_line","from_position","to_position"],
["sourceText",SourceSliceSourceText]
);
function GetStackTraceLine(as,at,au,av){
return new CallSite(as,at,au,false).toString();
}
function CallSite(aw,at,au,ax){
(this[g]=aw);
(this[h]=at);
(this[i]=au);
(this[j]=ax);
}
function CallSiteGetThis(){
return(this[j])
?(void 0):(this[g]);
}
function CallSiteGetFunction(){
return(this[j])
?(void 0):(this[h]);
}
function CallSiteGetPosition(){
return(this[i]);
}
function CallSiteGetTypeName(){
return GetTypeName((this[g]),false);
}
function CallSiteIsToplevel(){
return %CallSiteIsToplevelRT(this);
}
function CallSiteIsEval(){
return %CallSiteIsEvalRT(this);
}
function CallSiteGetEvalOrigin(){
var V=%FunctionGetScript((this[h]));
return FormatEvalOrigin(V);
}
function CallSiteGetScriptNameOrSourceURL(){
return %CallSiteGetScriptNameOrSourceUrlRT(this);
}
function CallSiteGetFunctionName(){
return %CallSiteGetFunctionNameRT(this);
}
function CallSiteGetMethodName(){
return %CallSiteGetMethodNameRT(this);
}
function CallSiteGetFileName(){
return %CallSiteGetFileNameRT(this);
}
function CallSiteGetLineNumber(){
return %CallSiteGetLineNumberRT(this);
}
function CallSiteGetColumnNumber(){
return %CallSiteGetColumnNumberRT(this);
}
function CallSiteIsNative(){
return %CallSiteIsNativeRT(this);
}
function CallSiteIsConstructor(){
return %CallSiteIsConstructorRT(this);
}
function CallSiteToString(){
var ay;
var az="";
if(this.isNative()){
az="native";
}else{
ay=this.getScriptNameOrSourceURL();
if(!ay&&this.isEval()){
az=this.getEvalOrigin();
az+=", ";
}
if(ay){
az+=ay;
}else{
az+="<anonymous>";
}
var aA=this.getLineNumber();
if(aA!=null){
az+=":"+aA;
var aB=this.getColumnNumber();
if(aB){
az+=":"+aB;
}
}
}
var ac="";
var aC=this.getFunctionName();
var aD=true;
var aE=this.isConstructor();
var aF=!(this.isToplevel()||aE);
if(aF){
var aG=GetTypeName((this[g]),true);
var aH=this.getMethodName();
if(aC){
if(aG&&
%_CallFunction(aC,aG,x)!=0){
ac+=aG+".";
}
ac+=aC;
if(aH&&
(%_CallFunction(aC,"."+aH,x)!=
aC.length-aH.length-1)){
ac+=" [as "+aH+"]";
}
}else{
ac+=aG+"."+(aH||"<anonymous>");
}
}else if(aE){
ac+="new "+(aC||"<anonymous>");
}else if(aC){
ac+=aC;
}else{
ac+=az;
aD=false;
}
if(aD){
ac+=" ("+az+")";
}
return ac;
}
b.SetUpLockedPrototype(CallSite,["receiver","fun","pos"],[
"getThis",CallSiteGetThis,
"getTypeName",CallSiteGetTypeName,
"isToplevel",CallSiteIsToplevel,
"isEval",CallSiteIsEval,
"getEvalOrigin",CallSiteGetEvalOrigin,
"getScriptNameOrSourceURL",CallSiteGetScriptNameOrSourceURL,
"getFunction",CallSiteGetFunction,
"getFunctionName",CallSiteGetFunctionName,
"getMethodName",CallSiteGetMethodName,
"getFileName",CallSiteGetFileName,
"getLineNumber",CallSiteGetLineNumber,
"getColumnNumber",CallSiteGetColumnNumber,
"isNative",CallSiteIsNative,
"getPosition",CallSiteGetPosition,
"isConstructor",CallSiteIsConstructor,
"toString",CallSiteToString
]);
function FormatEvalOrigin(V){
var aI=V.nameOrSourceURL();
if(aI){
return aI;
}
var aJ="eval at ";
if(V.eval_from_function_name){
aJ+=V.eval_from_function_name;
}else{
aJ+="<anonymous>";
}
var aK=V.eval_from_script;
if(aK){
if(aK.compilation_type==1){
aJ+=" ("+FormatEvalOrigin(aK)+")";
}else{
if(aK.name){
aJ+=" ("+aK.name;
var W=aK.locationFromPosition(
V.eval_from_script_position,true);
if(W){
aJ+=":"+(W.line+1);
aJ+=":"+(W.column+1);
}
aJ+=")";
}else{
aJ+=" (unknown source)";
}
}
}
return aJ;
}
function FormatErrorString(R){
try{
return %_CallFunction(R,ErrorToString);
}catch(e){
try{
return"<error: "+e+">";
}catch(ee){
return"<error>";
}
}
}
function GetStackFrames(aL){
var aM=new r();
var aN=aL[0];
for(var ab=1;ab<aL.length;ab+=4){
var as=aL[ab];
var at=aL[ab+1];
var aO=aL[ab+2];
var aP=aL[ab+3];
var au=%_IsSmi(aO)?aO:%FunctionGetPositionForOffset(aO,aP);
aN--;
aM.push(new CallSite(as,at,au,(aN<0)));
}
return aM;
}
var aQ=false;
function FormatStackTrace(I,aL){
var aM=GetStackFrames(aL);
if((%_IsFunction(B.prepareStackTrace))&&
!aQ){
var aR=[];
%MoveArrayContents(aM,aR);
aQ=true;
var aS=(void 0);
try{
aS=B.prepareStackTrace(I,aR);
}catch(e){
throw e;
}finally{
aQ=false;
}
return aS;
}
var aT=new r();
aT.push(FormatErrorString(I));
for(var ab=0;ab<aM.length;ab++){
var aU=aM[ab];
var ac;
try{
ac=aU.toString();
}catch(e){
try{
ac="<error: "+e+">";
}catch(ee){
ac="<error>";
}
}
aT.push("    at "+ac);
}
return %_CallFunction(aT,"\n",c);
}
function GetTypeName(aw,aV){
if((aw==null))return null;
var K=aw.constructor;
if(!K){
return aV?null:
%_CallFunction(aw,NoSideEffectsObjectToString);
}
var L=K.name;
if(!L){
return aV?null:
%_CallFunction(aw,NoSideEffectsObjectToString);
}
return L;
}
var aW=function(){
var aX=(void 0);
var aY=this;
while(aY){
var aX=
(aY[l]);
if((aX===(void 0))){
var aS=(aY[v]);
if((aS===(void 0))){
aY=%_GetPrototype(aY);
continue;
}
aX=FormatStackTrace(aY,aS);
(aY[v]=(void 0));
(aY[l]=aX);
}
return aX;
}
return(void 0);
};
var aZ=function(ba){
if((%HasOwnProperty(this,v))){
(this[v]=(void 0));
(this[l]=ba);
}
};
var bb=function(){};
function DefineError(a,bc){
var bd=bc.name;
%AddNamedProperty(a,bd,bc,2);
if(bd=='Error'){
var be=function(){};
%FunctionSetPrototype(be,n.prototype);
%FunctionSetInstanceClassName(be,'Error');
%FunctionSetPrototype(bc,new be());
}else{
%FunctionSetPrototype(bc,new B());
%InternalSetPrototype(bc,B);
}
%FunctionSetInstanceClassName(bc,'Error');
%AddNamedProperty(bc.prototype,'constructor',bc,2);
%AddNamedProperty(bc.prototype,'name',bd,2);
%SetCode(bc,function(bf){
if(%_IsConstructCall()){
try{bb(this,bc);}catch(e){}
if(!(bf===(void 0))){
%AddNamedProperty(this,'message',z(bf),2);
}
}else{
return new bc(bf);
}
});
%SetNativeFlag(bc);
return bc;
};
B=DefineError(a,function Error(){});
H=DefineError(a,function EvalError(){});
D=DefineError(a,function RangeError(){});
G=DefineError(a,function ReferenceError(){});
F=DefineError(a,function SyntaxError(){});
C=DefineError(a,function TypeError(){});
E=DefineError(a,function URIError(){});
%AddNamedProperty(B.prototype,'message','',2);
function ErrorToString(){
if(!(%_IsSpecObject(this))){
throw MakeTypeError(14,"Error.prototype.toString");
}
return %ErrorToStringRT(this);
}
b.InstallFunctions(B.prototype,2,
['toString',ErrorToString]);
$errorToString=ErrorToString;
MakeError=function(N,O,P,Q){
return MakeGenericError(B,N,O,P,Q);
}
MakeRangeError=function(N,O,P,Q){
return MakeGenericError(D,N,O,P,Q);
}
MakeSyntaxError=function(N,O,P,Q){
return MakeGenericError(F,N,O,P,Q);
}
MakeTypeError=function(N,O,P,Q){
return MakeGenericError(C,N,O,P,Q);
}
MakeURIError=function(){
return MakeGenericError(E,237);
}
var bg=MakeRangeError(149);
%DefineAccessorPropertyUnchecked(bg,'stack',
aW,aZ,
2);
bb=function captureStackTrace(I,bh){
t(I,'stack',{get:aW,
set:aZ,
configurable:true});
%CollectStackTrace(I,bh?bh:bb);
};
B.captureStackTrace=bb;
b.ExportToRuntime(function(bi){
bi["error_function"]=B;
bi["eval_error_function"]=H;
bi["get_stack_trace_line_fun"]=GetStackTraceLine;
bi["make_error_function"]=MakeGenericError;
bi["message_get_column_number"]=GetColumnNumber;
bi["message_get_line_number"]=GetLineNumber;
bi["message_get_source_line"]=GetSourceLine;
bi["no_side_effect_to_string_fun"]=NoSideEffectToString;
bi["range_error_function"]=D;
bi["reference_error_function"]=G;
bi["stack_overflow_boilerplate"]=bg;
bi["syntax_error_function"]=F;
bi["to_detail_string_fun"]=ToDetailString;
bi["type_error_function"]=C;
bi["uri_error_function"]=E;
});
});

jsonµ;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.JSON;
var d=b.InternalArray;
var e;
var f;
var g;
var h;
var i;
b.Import(function(j){
e=j.MathMax;
f=j.MathMin;
g=j.ObjectHasOwnProperty;
h=j.ToNumber;
i=j.ToString;
});
function Revive(k,l,m){
var n=k[l];
if((%_IsObject(n))){
if((%_IsArray(n))){
var o=n.length;
for(var p=0;p<o;p++){
var q=Revive(n,%_NumberToString(p),m);
n[p]=q;
}
}else{
for(var r in n){
if((%_CallFunction(n,r,g))){
var q=Revive(n,r,m);
if((q===(void 0))){
delete n[r];
}else{
n[r]=q;
}
}
}
}
}
return %_CallFunction(k,l,n,m);
}
function JSONParse(s,m){
var t=%ParseJson(((typeof(%IS_VAR(s))==='string')?s:$nonStringToString(s)));
if((%_ClassOf(m)==='Function')){
return Revive({'':t},'',m);
}else{
return t;
}
}
function SerializeArray(u,v,w,x,y){
if(!%PushIfAbsent(w,u))throw MakeTypeError(18);
var z=x;
x+=y;
var A=new d();
var B=u.length;
for(var p=0;p<B;p++){
var C=JSONSerialize(%_NumberToString(p),u,v,w,
x,y);
if((C===(void 0))){
C="null";
}
A.push(C);
}
var D;
if(y==""){
D="["+A.join(",")+"]";
}else if(A.length>0){
var E=",\n"+x;
D="[\n"+x+A.join(E)+"\n"+
z+"]";
}else{
D="[]";
}
w.pop();
return D;
}
function SerializeObject(u,v,w,x,y){
if(!%PushIfAbsent(w,u))throw MakeTypeError(18);
var z=x;
x+=y;
var A=new d();
if((%_IsArray(v))){
var o=v.length;
for(var p=0;p<o;p++){
if((%_CallFunction(v,p,g))){
var r=v[p];
var C=JSONSerialize(r,u,v,w,x,y);
if(!(C===(void 0))){
var F=%QuoteJSONString(r)+":";
if(y!="")F+=" ";
F+=C;
A.push(F);
}
}
}
}else{
for(var r in u){
if((%_CallFunction(u,r,g))){
var C=JSONSerialize(r,u,v,w,x,y);
if(!(C===(void 0))){
var F=%QuoteJSONString(r)+":";
if(y!="")F+=" ";
F+=C;
A.push(F);
}
}
}
}
var D;
if(y==""){
D="{"+A.join(",")+"}";
}else if(A.length>0){
var E=",\n"+x;
D="{\n"+x+A.join(E)+"\n"+
z+"}";
}else{
D="{}";
}
w.pop();
return D;
}
function JSONSerialize(G,k,v,w,x,y){
var u=k[G];
if((%_IsSpecObject(u))){
var H=u.toJSON;
if((%_ClassOf(H)==='Function')){
u=%_CallFunction(u,G,H);
}
}
if((%_ClassOf(v)==='Function')){
u=%_CallFunction(k,G,u,v);
}
if((typeof(u)==='string')){
return %QuoteJSONString(u);
}else if((typeof(u)==='number')){
return((%_IsSmi(%IS_VAR(u))||u-u==0)?%_NumberToString(u):"null");
}else if((typeof(u)==='boolean')){
return u?"true":"false";
}else if((u===null)){
return"null";
}else if((%_IsSpecObject(u))&&!(typeof u=="function")){
if((%_IsArray(u))){
return SerializeArray(u,v,w,x,y);
}else if((%_ClassOf(u)==='Number')){
u=h(u);
return((%_IsSmi(%IS_VAR(u))||u-u==0)?%_NumberToString(u):"null");
}else if((%_ClassOf(u)==='String')){
return %QuoteJSONString(i(u));
}else if((%_ClassOf(u)==='Boolean')){
return %_ValueOf(u)?"true":"false";
}else{
return SerializeObject(u,v,w,x,y);
}
}
return(void 0);
}
function JSONStringify(u,v,I){
if(%_ArgumentsLength()==1){
return %BasicJSONStringify(u);
}
if((%_IsArray(v))){
var J=new d();
var K={__proto__:null};
var o=v.length;
for(var p=0;p<o;p++){
var L=v[p];
var M;
if((typeof(L)==='string')){
M=L;
}else if((typeof(L)==='number')){
M=%_NumberToString(L);
}else if((%_ClassOf(L)==='String')||(%_ClassOf(L)==='Number')){
M=i(L);
}else{
continue;
}
if(!K[M]){
J.push(M);
K[M]=true;
}
}
v=J;
}
if((%_IsObject(I))){
if((%_ClassOf(I)==='Number')){
I=h(I);
}else if((%_ClassOf(I)==='String')){
I=i(I);
}
}
var y;
if((typeof(I)==='number')){
I=e(0,f($toInteger(I),10));
y=%_SubString("          ",0,I);
}else if((typeof(I)==='string')){
if(I.length>10){
y=%_SubString(I,0,10);
}else{
y=I;
}
}else{
y="";
}
return JSONSerialize('',{'':u},v,new d(),"",y);
}
%AddNamedProperty(c,symbolToStringTag,"JSON",1|2);
b.InstallFunctions(c,2,[
"parse",JSONParse,
"stringify",JSONStringify
]);
function JsonSerializeAdapter(G,N){
var k={};
k[G]=N;
return JSONSerialize(G,k,(void 0),new d(),"","");
}
b.ExportToRuntime(function(O){
O["json_serialize_adapter"]=JsonSerializeAdapter;
});
})

8array-iteratorIC
var $arrayValues;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=
b.GetPrivateSymbol("array_iteration_kind_symbol");
var d=
b.GetPrivateSymbol("array_iterator_next_symbol");
var e=
b.GetPrivateSymbol("array_iterator_object_symbol");
var f=a.Array;
var g=a.Uint8Array;

var h=a.Int8Array;

var i=a.Uint16Array;

var j=a.Int16Array;

var k=a.Uint32Array;

var l=a.Int32Array;

var m=a.Float32Array;

var n=a.Float64Array;

var o=a.Uint8ClampedArray;


function ArrayIterator(){}
function CreateArrayIterator(p,q){
var r=(%_ToObject(p));
var s=new ArrayIterator;
(s[e]=r);
(s[d]=0);
(s[c]=q);
return s;
}
function CreateIteratorResultObject(t,u){
return{value:t,done:u};
}
function ArrayIteratorIterator(){
return this;
}
function ArrayIteratorNext(){
var s=(%_ToObject(this));
if(!(!(s[d]===(void 0)))){
throw MakeTypeError(36,
'Array Iterator.prototype.next',this);
}
var p=(s[e]);
if((p===(void 0))){
return CreateIteratorResultObject((void 0),true);
}
var v=(s[d]);
var w=(s[c]);
var x=(p.length>>>0);
if(v>=x){
(s[e]=(void 0));
return CreateIteratorResultObject((void 0),true);
}
(s[d]=v+1);
if(w==2){
return CreateIteratorResultObject(p[v],false);
}
if(w==3){
return CreateIteratorResultObject([v,p[v]],false);
}
return CreateIteratorResultObject(v,false);
}
function ArrayEntries(){
return CreateArrayIterator(this,3);
}
function ArrayValues(){
return CreateArrayIterator(this,2);
}
function ArrayKeys(){
return CreateArrayIterator(this,1);
}
%FunctionSetPrototype(ArrayIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(ArrayIterator,'Array Iterator');
b.InstallFunctions(ArrayIterator.prototype,2,[
'next',ArrayIteratorNext
]);
b.SetFunctionName(ArrayIteratorIterator,symbolIterator);
%AddNamedProperty(ArrayIterator.prototype,symbolIterator,
ArrayIteratorIterator,2);
%AddNamedProperty(ArrayIterator.prototype,symbolToStringTag,
"Array Iterator",1|2);
b.InstallFunctions(f.prototype,2,[
'entries',ArrayEntries,
'keys',ArrayKeys
]);
b.SetFunctionName(ArrayValues,'values');
%AddNamedProperty(f.prototype,symbolIterator,ArrayValues,
2);
%AddNamedProperty(g.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(g.prototype,'values',ArrayValues,2);
%AddNamedProperty(g.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(g.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(h.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(h.prototype,'values',ArrayValues,2);
%AddNamedProperty(h.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(h.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(i.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(i.prototype,'values',ArrayValues,2);
%AddNamedProperty(i.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(i.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(j.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(j.prototype,'values',ArrayValues,2);
%AddNamedProperty(j.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(j.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(k.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(k.prototype,'values',ArrayValues,2);
%AddNamedProperty(k.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(k.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(l.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(l.prototype,'values',ArrayValues,2);
%AddNamedProperty(l.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(l.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(m.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(m.prototype,'values',ArrayValues,2);
%AddNamedProperty(m.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(m.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(n.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(n.prototype,'values',ArrayValues,2);
%AddNamedProperty(n.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(n.prototype,symbolIterator,ArrayValues,
2);

%AddNamedProperty(o.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(o.prototype,'values',ArrayValues,2);
%AddNamedProperty(o.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(o.prototype,symbolIterator,ArrayValues,
2);


b.Export(function(y){
y.ArrayIteratorCreateResultObject=CreateIteratorResultObject;
});
$arrayValues=ArrayValues;
b.ExportToRuntime(function(y){
y["array_values_iterator"]=ArrayValues;
});
})

<string-iteratorA
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d=a.String;
var e=
b.GetPrivateSymbol("string_iterator_iterated_string_symbol");
var f=
b.GetPrivateSymbol("string_iterator_next_index_symbol");
b.Import(function(g){
c=g.ArrayIteratorCreateResultObject;
});
function StringIterator(){}
function CreateStringIterator(h){
var i=((typeof(%IS_VAR(h))==='string')?h:$nonStringToString(h));
var j=new StringIterator;
(j[e]=i);
(j[f]=0);
return j;
}
function StringIteratorNext(){
var j=(%_ToObject(this));
if(!(!(j[f]===(void 0)))){
throw MakeTypeError(36,
'String Iterator.prototype.next');
}
var i=(j[e]);
if((i===(void 0))){
return c((void 0),true);
}
var k=(j[f]);
var l=(i.length>>>0);
if(k>=l){
(j[e]=(void 0));
return c((void 0),true);
}
var m=%_StringCharCodeAt(i,k);
var n=%_StringCharFromCode(m);
k++;
if(m>=0xD800&&m<=0xDBFF&&k<l){
var o=%_StringCharCodeAt(i,k);
if(o>=0xDC00&&o<=0xDFFF){
n+=%_StringCharFromCode(o);
k++;
}
}
(j[f]=k);
return c(n,false);
}
function StringPrototypeIterator(){
return CreateStringIterator(this);
}
%FunctionSetPrototype(StringIterator,{__proto__:$iteratorPrototype});
%FunctionSetInstanceClassName(StringIterator,'String Iterator');
b.InstallFunctions(StringIterator.prototype,2,[
'next',StringIteratorNext
]);
%AddNamedProperty(StringIterator.prototype,symbolToStringTag,
"String Iterator",1|2);
b.SetFunctionName(StringPrototypeIterator,symbolIterator);
%AddNamedProperty(d.prototype,symbolIterator,
StringPrototypeIterator,2);
})

$templatesÉ
var $getTemplateCallSite;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=b.InternalArray;
var e=new c;
var f=c.prototype.get;
var g=c.prototype.set;
function SameCallSiteElements(h,i){
var j=h.length;
var i=i.raw;
if(j!==i.length)return false;
for(var k=0;k<j;++k){
if(h[k]!==i[k])return false;
}
return true;
}
function GetCachedCallSite(l,m){
var n=%_CallFunction(e,m,f);
if((n===(void 0)))return;
var j=n.length;
for(var k=0;k<j;++k){
if(SameCallSiteElements(l,n[k]))return n[k];
}
}
function SetCachedCallSite(l,m){
var n=%_CallFunction(e,m,f);
var o;
if((n===(void 0))){
o=new d(1);
o[0]=l;
%_CallFunction(e,m,o,g);
}else{
n.push(l);
}
return l;
}
$getTemplateCallSite=function(l,h,m){
var p=GetCachedCallSite(h,m);
if(!(p===(void 0)))return p;
%AddNamedProperty(l,"raw",%ObjectFreeze(h),
1|2|4);
return SetCachedCallSite(%ObjectFreeze(l),m);
}
})

4harmony-array‰E
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c;
var d;
var e=a.Array;
var f=a.Symbol;
var g;
var h;
var i;
var j;
var k;
b.Import(function(l){
c=l.GetIterator;
d=l.GetMethod;
g=l.MathMax;
h=l.MathMin;
i=l.ObjectIsFrozen;
j=l.ObjectDefineProperty;
k=l.ToNumber;
});
function InnerArrayCopyWithin(m,n,o,p,q){
m=(%_IsSmi(%IS_VAR(m))?m:%NumberToInteger(k(m)));
var r;
if(m<0){
r=g(q+m,0);
}else{
r=h(m,q);
}
n=(%_IsSmi(%IS_VAR(n))?n:%NumberToInteger(k(n)));
var l;
if(n<0){
l=g(q+n,0);
}else{
l=h(n,q);
}
o=(o===(void 0))?q:(%_IsSmi(%IS_VAR(o))?o:%NumberToInteger(k(o)));
var s;
if(o<0){
s=g(q+o,0);
}else{
s=h(o,q);
}
var t=h(s-l,q-r);
var u=1;
if(l<r&&r<(l+t)){
u=-1;
l=l+t-1;
r=r+t-1;
}
while(t>0){
if(l in p){
p[r]=p[l];
}else{
delete p[r];
}
l=l+u;
r=r+u;
t--;
}
return p;
}
function ArrayCopyWithin(m,n,o){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.copyWithin");
var p=(%_ToObject(this));
var q=$toLength(p.length);
return InnerArrayCopyWithin(m,n,o,p,q);
}
function InnerArrayFind(v,w,p,q){
if(!(%_ClassOf(v)==='Function')){
throw MakeTypeError(13,v);
}
var x=false;
if((w===null)){
if(%IsSloppyModeFunction(v))w=(void 0);
}else if(!(w===(void 0))){
x=(!(%_IsSpecObject(w))&&%IsSloppyModeFunction(v));
}
for(var y=0;y<q;y++){
var z=p[y];
var A=x?(%_ToObject(w)):w;
if(%_CallFunction(A,z,y,p,v)){
return z;
}
}
return;
}
function ArrayFind(v,w){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.find");
var p=(%_ToObject(this));
var q=$toInteger(p.length);
return InnerArrayFind(v,w,p,q);
}
function InnerArrayFindIndex(v,w,p,q){
if(!(%_ClassOf(v)==='Function')){
throw MakeTypeError(13,v);
}
var x=false;
if((w===null)){
if(%IsSloppyModeFunction(v))w=(void 0);
}else if(!(w===(void 0))){
x=(!(%_IsSpecObject(w))&&%IsSloppyModeFunction(v));
}
for(var y=0;y<q;y++){
var z=p[y];
var A=x?(%_ToObject(w)):w;
if(%_CallFunction(A,z,y,p,v)){
return y;
}
}
return-1;
}
function ArrayFindIndex(v,w){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.findIndex");
var p=(%_ToObject(this));
var q=$toInteger(p.length);
return InnerArrayFindIndex(v,w,p,q);
}
function InnerArrayFill(B,n,o,p,q){
var y=(n===(void 0))?0:(%_IsSmi(%IS_VAR(n))?n:%NumberToInteger(k(n)));
var o=(o===(void 0))?q:(%_IsSmi(%IS_VAR(o))?o:%NumberToInteger(k(o)));
if(y<0){
y+=q;
if(y<0)y=0;
}else{
if(y>q)y=q;
}
if(o<0){
o+=q;
if(o<0)o=0;
}else{
if(o>q)o=q;
}
if((o-y)>0&&i(p)){
throw MakeTypeError(10);
}
for(;y<o;y++)
p[y]=B;
return p;
}
function ArrayFill(B,n,o){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.fill");
var p=(%_ToObject(this));
var q=(p.length>>>0);
return InnerArrayFill(B,n,o,p,q);
}
function AddArrayElement(C,p,y,B){
if(C===e){
%AddElement(p,y,B);
}else{
j(p,y,{
value:B,writable:true,configurable:true,enumerable:true
});
}
}
function ArrayFrom(D,E,F){
var G=(%_ToObject(D));
var H=!(E===(void 0));
if(H){
if(!(%_ClassOf(E)==='Function')){
throw MakeTypeError(13,E);
}else if(%IsSloppyModeFunction(E)){
if((F===null)){
F=(void 0);
}else if(!(F===(void 0))){
F=(%_ToObject(F));
}
}
}
var I=d(G,symbolIterator);
var J;
var K;
var L;
var M;
if(!(I===(void 0))){
K=%IsConstructor(this)?new this():[];
var N=c(G,I);
J=0;
while(true){
var O=N.next();
if(!(%_IsObject(O))){
throw MakeTypeError(41,O);
}
if(O.done){
K.length=J;
return K;
}
M=O.value;
if(H){
L=%_CallFunction(F,M,J,E);
}else{
L=M;
}
AddArrayElement(this,K,J,L);
J++;
}
}else{
var P=$toLength(G.length);
K=%IsConstructor(this)?new this(P):new e(P);
for(J=0;J<P;++J){
M=G[J];
if(H){
L=%_CallFunction(F,M,J,E);
}else{
L=M;
}
AddArrayElement(this,K,J,L);
}
K.length=J;
return K;
}
}
function ArrayOf(){
var q=%_ArgumentsLength();
var C=this;
var p=%IsConstructor(C)?new C(q):[];
for(var y=0;y<q;y++){
AddArrayElement(C,p,y,%_Arguments(y));
}
p.length=q;
return p;
}
%FunctionSetLength(ArrayCopyWithin,2);
%FunctionSetLength(ArrayFrom,1);
%FunctionSetLength(ArrayFill,1);
%FunctionSetLength(ArrayFind,1);
%FunctionSetLength(ArrayFindIndex,1);
b.InstallFunctions(e,2,[
"from",ArrayFrom,
"of",ArrayOf
]);
b.InstallFunctions(e.prototype,2,[
"copyWithin",ArrayCopyWithin,
"find",ArrayFind,
"findIndex",ArrayFindIndex,
"fill",ArrayFill
]);
b.Export(function(r){
r.ArrayFrom=ArrayFrom;
r.InnerArrayCopyWithin=InnerArrayCopyWithin;
r.InnerArrayFill=InnerArrayFill;
r.InnerArrayFind=InnerArrayFind;
r.InnerArrayFindIndex=InnerArrayFindIndex;
});
})

Hharmony-typedarray=²
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Uint8Array;

var d=a.Int8Array;

var e=a.Uint16Array;

var f=a.Int16Array;

var g=a.Uint32Array;

var h=a.Int32Array;

var i=a.Float32Array;

var j=a.Float64Array;

var k=a.Uint8ClampedArray;


var l=a.Array;

var m;
var n;
var o;
var p;
var q;
var r;
var s;
var t;
var u;
var v;
var w;
var x;
var y;
var z;
var A;
var B;
var C;
var D;
var E;
var F;
var G;
b.Import(function(H){
m=H.ArrayFrom;
n=H.ArrayToString;
o=H.InnerArrayCopyWithin;
p=H.InnerArrayEvery;
q=H.InnerArrayFill;
r=H.InnerArrayFilter;
s=H.InnerArrayFind;
t=H.InnerArrayFindIndex;
u=H.InnerArrayForEach;
v=H.InnerArrayIndexOf;
w=H.InnerArrayJoin;
x=H.InnerArrayLastIndexOf;
y=H.InnerArrayMap;
InnerArrayReduce=H.InnerArrayReduce;
InnerArrayReduceRight=H.InnerArrayReduceRight;
z=H.InnerArraySome;
A=H.InnerArraySort;
B=H.InnerArrayToLocaleString;
C=H.IsNaN;
D=H.MathMax;
E=H.MathMin;
F=H.PackedArrayReverse;
G=H.ToNumber;
});
function ConstructTypedArray(I,J){
if(!%IsConstructor(I)||(I.prototype===(void 0))||
!%HasOwnProperty(I.prototype,"BYTES_PER_ELEMENT")){
throw MakeTypeError(60);
}
return new I(J);
}
function ConstructTypedArrayLike(K,J){
return ConstructTypedArray(K.constructor,J);
}
function TypedArrayCopyWithin(L,M,N){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return o(L,M,N,this,O);
}
%FunctionSetLength(TypedArrayCopyWithin,2);
function TypedArrayEvery(P,Q){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return p(P,Q,this,O);
}
%FunctionSetLength(TypedArrayEvery,1);
function TypedArrayForEach(P,Q){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
u(P,Q,this,O);
}
%FunctionSetLength(TypedArrayForEach,1);
function TypedArrayFill(R,M,N){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return q(R,M,N,this,O);
}
%FunctionSetLength(TypedArrayFill,1);
function TypedArrayFilter(S,T){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
var U=r(S,T,this,O);
return ConstructTypedArrayLike(this,U);
}
%FunctionSetLength(TypedArrayFilter,1);
function TypedArrayFind(S,T){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return s(S,T,this,O);
}
%FunctionSetLength(TypedArrayFind,1);
function TypedArrayFindIndex(S,T){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return t(S,T,this,O);
}
%FunctionSetLength(TypedArrayFindIndex,1);
function TypedArrayReverse(){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return F(this,O);
}
function TypedArrayComparefn(V,W){
if(C(V)&&C(W)){
return C(W)?0:1;
}
if(C(V)){
return 1;
}
if(V===0&&V===W){
if(%_IsMinusZero(V)){
if(!%_IsMinusZero(W)){
return-1;
}
}else if(%_IsMinusZero(W)){
return 1;
}
}
return V-W;
}
function TypedArraySort(X){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
if((X===(void 0))){
X=TypedArrayComparefn;
}
return %_CallFunction(this,O,X,A);
}
function TypedArrayIndexOf(Y,Z){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return %_CallFunction(this,Y,Z,O,v);
}
%FunctionSetLength(TypedArrayIndexOf,1);
function TypedArrayLastIndexOf(Y,Z){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return %_CallFunction(this,Y,Z,O,
%_ArgumentsLength(),x);
}
%FunctionSetLength(TypedArrayLastIndexOf,1);
function TypedArrayMap(S,T){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
var U=y(S,T,this,O);
return ConstructTypedArrayLike(this,U);
}
%FunctionSetLength(TypedArrayMap,1);
function TypedArraySome(P,Q){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return z(P,Q,this,O);
}
%FunctionSetLength(TypedArraySome,1);
function TypedArrayToLocaleString(){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return B(this,O);
}
function TypedArrayToString(){
return %_CallFunction(this,n);
}
function TypedArrayJoin(aa){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return w(aa,this,O);
}
function TypedArrayReduce(ab,ac){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return InnerArrayReduce(ab,ac,this,O,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayReduce,1);
function TypedArrayReduceRight(ab,ac){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var O=%_TypedArrayGetLength(this);
return InnerArrayReduceRight(ab,ac,this,O,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayReduceRight,1);
function TypedArraySlice(M,N){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var ad=%_TypedArrayGetLength(this);
var ae=(%_IsSmi(%IS_VAR(M))?M:%NumberToInteger(G(M)));
var af;
if(ae<0){
af=D(ad+ae,0);
}else{
af=E(ae,ad);
}
var ag;
if((N===(void 0))){
ag=ad;
}else{
ag=(%_IsSmi(%IS_VAR(N))?N:%NumberToInteger(G(N)));
}
var ah;
if(ag<0){
ah=D(ad+ag,0);
}else{
ah=E(ag,ad);
}
var ai=D(ah-af,0);
var U=ConstructTypedArrayLike(this,ai);
var aj=0;
while(af<ah){
var ak=this[af];
U[aj]=ak;
af++;
aj++;
}
return U;
}
function TypedArrayOf(){
var O=%_ArgumentsLength();
var U=new this(O);
for(var al=0;al<O;al++){
U[al]=%_Arguments(al);
}
return U;
}
function TypedArrayFrom(am,an,T){
var U=%_CallFunction(l,am,an,T,m);
return ConstructTypedArray(this,U);
}
%FunctionSetLength(TypedArrayFrom,1);
b.InstallFunctions(c,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(c.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(d,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(d.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(e,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(e.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(f,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(f.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(g,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(g.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(h,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(h.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(i,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(i.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(j,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(j.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(k,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(k.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);


})

i18nbì
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d;
var e;
var f;
var g=a.Boolean;
var h=a.Date;
var i=a.Number;
var j=a.RegExp;
var k=a.String;
var l;
var m;
var n;
var o;
var p;
var q;
var r;
var s;
var t;
b.Import(function(u){
c=u.ArrayIndexOf;
d=u.ArrayJoin;
e=u.IsFinite;
f=u.IsNaN;
l=u.MathFloor;
m=u.RegExpTest;
n=u.StringIndexOf;
o=u.StringLastIndexOf;
p=u.StringMatch;
q=u.StringReplace;
r=u.StringSplit;
s=u.StringSubstr;
t=u.StringSubstring;
ToNumber=u.ToNumber;
});
b.ImportNow(function(u){
ObjectDefineProperties=u.ObjectDefineProperties;
ObjectDefineProperty=u.ObjectDefineProperty;
});
var v={};
%AddNamedProperty(a,"Intl",v,2);
var w={
'collator':(void 0),
'numberformat':(void 0),
'dateformat':(void 0),
'breakiterator':(void 0)
};
var x=(void 0);
var y=(void 0);
function GetUnicodeExtensionRE(){
if(((void 0)===(void 0))){
y=new j('-u(-[a-z0-9]{2,8})+','g');
}
return y;
}
var z=(void 0);
function GetAnyExtensionRE(){
if((z===(void 0))){
z=new j('-[a-z0-9]{1}-.*','g');
}
return z;
}
var A=(void 0);
function GetQuotedStringRE(){
if((A===(void 0))){
A=new j("'[^']+'",'g');
}
return A;
}
var B=(void 0);
function GetServiceRE(){
if((B===(void 0))){
B=
new j('^(collator|numberformat|dateformat|breakiterator)$');
}
return B;
}
var C=(void 0);
function GetLanguageTagRE(){
if((C===(void 0))){
BuildLanguageTagREs();
}
return C;
}
var D=(void 0);
function GetLanguageVariantRE(){
if((D===(void 0))){
BuildLanguageTagREs();
}
return D;
}
var E=(void 0);
function GetLanguageSingletonRE(){
if((E===(void 0))){
BuildLanguageTagREs();
}
return E;
}
var F=(void 0);
function GetTimezoneNameCheckRE(){
if((F===(void 0))){
F=
new j('^([A-Za-z]+)/([A-Za-z]+)(?:_([A-Za-z]+))*$');
}
return F;
}
function addBoundMethod(G,H,I,J){
%CheckIsBootstrapping();
function getter(){
if(!%IsInitializedIntlObject(this)){
throw MakeTypeError(44,H);
}
var K='__bound'+H+'__';
if((this[K]===(void 0))){
var L=this;
var M;
if((J===(void 0))||J===2){
M=function(N,O){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
return I(L,N,O);
}
}else if(J===1){
M=function(N){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
return I(L,N);
}
}else{
M=function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if(%_ArgumentsLength()>0){
return I(L,%_Arguments(0));
}else{
return I(L);
}
}
}
%FunctionSetName(M,K);
%FunctionRemovePrototype(M);
%SetNativeFlag(M);
this[K]=M;
}
return this[K];
}
%FunctionSetName(getter,H);
%FunctionRemovePrototype(getter);
%SetNativeFlag(getter);
ObjectDefineProperty(G.prototype,H,{
get:getter,
enumerable:false,
configurable:true
});
}
function supportedLocalesOf(P,Q,R){
if((%_CallFunction(P,GetServiceRE(),p)===null)){
throw MakeError(7,P);
}
if((R===(void 0))){
R={};
}else{
R=(%_ToObject(R));
}
var S=R.localeMatcher;
if(!(S===(void 0))){
S=k(S);
if(S!=='lookup'&&S!=='best fit'){
throw MakeRangeError(145,S);
}
}else{
S='best fit';
}
var T=initializeLocaleList(Q);
if((w[P]===(void 0))){
w[P]=getAvailableLocalesOf(P);
}
if(S==='best fit'){
return initializeLocaleList(bestFitSupportedLocalesOf(
T,w[P]));
}
return initializeLocaleList(lookupSupportedLocalesOf(
T,w[P]));
}
function lookupSupportedLocalesOf(T,U){
var V=[];
for(var W=0;W<T.length;++W){
var X=%_CallFunction(T[W],GetUnicodeExtensionRE(),
'',q);
do{
if(!(U[X]===(void 0))){
%_CallFunction(V,T[W],$arrayPush);
break;
}
var Y=%_CallFunction(X,'-',o);
if(Y===-1){
break;
}
X=%_CallFunction(X,0,Y,t);
}while(true);
}
return V;
}
function bestFitSupportedLocalesOf(T,U){
return lookupSupportedLocalesOf(T,U);
}
function getGetOption(R,Z){
if((R===(void 0)))throw MakeError(4,Z);
var aa=function getOption(ab,ac,ad,ae){
if(!(R[ab]===(void 0))){
var af=R[ab];
switch(ac){
case'boolean':
af=g(af);
break;
case'string':
af=k(af);
break;
case'number':
af=i(af);
break;
default:
throw MakeError(8);
}
if(!(ad===(void 0))&&
%_CallFunction(ad,af,c)===-1){
throw MakeRangeError(155,af,Z,ab);
}
return af;
}
return ae;
}
return aa;
}
function resolveLocale(P,T,R){
T=initializeLocaleList(T);
var aa=getGetOption(R,P);
var S=aa('localeMatcher','string',
['lookup','best fit'],'best fit');
var ag;
if(S==='lookup'){
ag=lookupMatcher(P,T);
}else{
ag=bestFitMatcher(P,T);
}
return ag;
}
function lookupMatcher(P,T){
if((%_CallFunction(P,GetServiceRE(),p)===null)){
throw MakeError(7,P);
}
if((w[P]===(void 0))){
w[P]=getAvailableLocalesOf(P);
}
for(var W=0;W<T.length;++W){
var X=%_CallFunction(T[W],GetAnyExtensionRE(),'',
q);
do{
if(!(w[P][X]===(void 0))){
var ah=
%_CallFunction(T[W],GetUnicodeExtensionRE(),
p);
var ai=(ah===null)?'':ah[0];
return{'locale':X,'extension':ai,'position':W};
}
var Y=%_CallFunction(X,'-',o);
if(Y===-1){
break;
}
X=%_CallFunction(X,0,Y,t);
}while(true);
}
if((x===(void 0))){
x=%GetDefaultICULocale();
}
return{'locale':x,'extension':'','position':-1};
}
function bestFitMatcher(P,T){
return lookupMatcher(P,T);
}
function parseExtension(ai){
var aj=%_CallFunction(ai,'-',r);
if(aj.length<=2||
(aj[0]!==''&&aj[1]!=='u')){
return{};
}
var ak={};
var al=(void 0);
for(var W=2;W<aj.length;++W){
var J=aj[W].length;
var am=aj[W];
if(J===2){
ak[am]=(void 0);
al=am;
}else if(J>=3&&J<=8&&!(al===(void 0))){
ak[al]=am;
al=(void 0);
}else{
return{};
}
}
return ak;
}
function setOptions(an,ak,ao,aa,ap){
var ai='';
var aq=function updateExtension(ar,af){
return'-'+ar+'-'+k(af);
}
var as=function updateProperty(ab,ac,af){
if(ac==='boolean'&&(typeof af==='string')){
af=(af==='true')?true:false;
}
if(!(ab===(void 0))){
defineWEProperty(ap,ab,af);
}
}
for(var ar in ao){
if(%HasOwnProperty(ao,ar)){
var af=(void 0);
var at=ao[ar];
if(!(at.property===(void 0))){
af=aa(at.property,at.type,at.values);
}
if(!(af===(void 0))){
as(at.property,at.type,af);
ai+=aq(ar,af);
continue;
}
if(%HasOwnProperty(ak,ar)){
af=ak[ar];
if(!(af===(void 0))){
as(at.property,at.type,af);
ai+=aq(ar,af);
}else if(at.type==='boolean'){
as(at.property,at.type,true);
ai+=aq(ar,true);
}
}
}
}
return ai===''?'':'-u'+ai;
}
function freezeArray(au){
var av=au.length;
for(var W=0;W<av;W++){
if(W in au){
ObjectDefineProperty(au,W,{value:au[W],
configurable:false,
writable:false,
enumerable:true});
}
}
ObjectDefineProperty(au,'length',{value:av,writable:false});
return au;
}
function getOptimalLanguageTag(aw,ag){
if(aw===ag){
return aw;
}
var Q=%GetLanguageTagVariants([aw,ag]);
if(Q[0].maximized!==Q[1].maximized){
return ag;
}
var ax=new j('^'+Q[1].base);
return %_CallFunction(ag,ax,Q[0].base,q);
}
function getAvailableLocalesOf(P){
var ay=%AvailableLocalesOf(P);
for(var W in ay){
if(%HasOwnProperty(ay,W)){
var az=%_CallFunction(W,/^([a-z]{2,3})-([A-Z][a-z]{3})-([A-Z]{2})$/,
p);
if(az!==null){
ay[az[1]+'-'+az[3]]=null;
}
}
}
return ay;
}
function defineWEProperty(aA,ab,af){
ObjectDefineProperty(aA,ab,
{value:af,writable:true,enumerable:true});
}
function addWEPropertyIfDefined(aA,ab,af){
if(!(af===(void 0))){
defineWEProperty(aA,ab,af);
}
}
function defineWECProperty(aA,ab,af){
ObjectDefineProperty(aA,ab,{value:af,
writable:true,
enumerable:true,
configurable:true});
}
function addWECPropertyIfDefined(aA,ab,af){
if(!(af===(void 0))){
defineWECProperty(aA,ab,af);
}
}
function toTitleCaseWord(aB){
return %StringToUpperCase(%_CallFunction(aB,0,1,s))+
%StringToLowerCase(%_CallFunction(aB,1,s));
}
function canonicalizeLanguageTag(aC){
if(typeof aC!=='string'&&typeof aC!=='object'||
(aC===null)){
throw MakeTypeError(43);
}
var aD=k(aC);
if(isValidLanguageTag(aD)===false){
throw MakeRangeError(137,aD);
}
var aE=%CanonicalizeLanguageTag(aD);
if(aE==='invalid-tag'){
throw MakeRangeError(137,aD);
}
return aE;
}
function initializeLocaleList(Q){
var aF=[];
if((Q===(void 0))){
aF=[];
}else{
if(typeof Q==='string'){
%_CallFunction(aF,canonicalizeLanguageTag(Q),$arrayPush);
return freezeArray(aF);
}
var aG=(%_ToObject(Q));
var aH=(aG.length>>>0);
for(var aI=0;aI<aH;aI++){
if(aI in aG){
var af=aG[aI];
var aE=canonicalizeLanguageTag(af);
if(%_CallFunction(aF,aE,c)===-1){
%_CallFunction(aF,aE,$arrayPush);
}
}
}
}
return freezeArray(aF);
}
function isValidLanguageTag(X){
if(!%_CallFunction(GetLanguageTagRE(),X,m)){
return false;
}
if(%_CallFunction(X,'x-',n)===0){
return true;
}
X=%_CallFunction(X,/-x-/,r)[0];
var aJ=[];
var aK=[];
var az=%_CallFunction(X,/-/,r);
for(var W=1;W<az.length;W++){
var af=az[W];
if(%_CallFunction(GetLanguageVariantRE(),af,m)&&
aK.length===0){
if(%_CallFunction(aJ,af,c)===-1){
%_CallFunction(aJ,af,$arrayPush);
}else{
return false;
}
}
if(%_CallFunction(GetLanguageSingletonRE(),af,m)){
if(%_CallFunction(aK,af,c)===-1){
%_CallFunction(aK,af,$arrayPush);
}else{
return false;
}
}
}
return true;
}
function BuildLanguageTagREs(){
var aL='[a-zA-Z]';
var aM='[0-9]';
var aN='('+aL+'|'+aM+')';
var aO='(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|'+
'zh-min|zh-min-nan|zh-xiang)';
var aP='(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|'+
'i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|'+
'i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)';
var aQ='('+aP+'|'+aO+')';
var aR='(x(-'+aN+'{1,8})+)';
var aS='('+aM+'|[A-WY-Za-wy-z])';
E=new j('^'+aS+'$','i');
var ai='('+aS+'(-'+aN+'{2,8})+)';
var aT='('+aN+'{5,8}|('+aM+aN+'{3}))';
D=new j('^'+aT+'$','i');
var aU='('+aL+'{2}|'+aM+'{3})';
var aV='('+aL+'{4})';
var aW='('+aL+'{3}(-'+aL+'{3}){0,2})';
var aX='('+aL+'{2,3}(-'+aW+')?|'+aL+'{4}|'+
aL+'{5,8})';
var aY=aX+'(-'+aV+')?(-'+aU+')?(-'+
aT+')*(-'+ai+')*(-'+aR+')?';
var aZ=
'^('+aY+'|'+aR+'|'+aQ+')$';
C=new j(aZ,'i');
}
function initializeCollator(ba,Q,R){
if(%IsInitializedIntlObject(ba)){
throw MakeTypeError(98,"Collator");
}
if((R===(void 0))){
R={};
}
var aa=getGetOption(R,'collator');
var bb={};
defineWEProperty(bb,'usage',aa(
'usage','string',['sort','search'],'sort'));
var bc=aa('sensitivity','string',
['base','accent','case','variant']);
if((bc===(void 0))&&bb.usage==='sort'){
bc='variant';
}
defineWEProperty(bb,'sensitivity',bc);
defineWEProperty(bb,'ignorePunctuation',aa(
'ignorePunctuation','boolean',(void 0),false));
var X=resolveLocale('collator',Q,R);
var ak=parseExtension(X.extension);
var bd={
'kn':{'property':'numeric','type':'boolean'},
'kf':{'property':'caseFirst','type':'string',
'values':['false','lower','upper']}
};
setOptions(
R,ak,bd,aa,bb);
var be='default';
var ai='';
if(%HasOwnProperty(ak,'co')&&bb.usage==='sort'){
var bf=[
'big5han','dict','direct','ducet','gb2312','phonebk','phonetic',
'pinyin','reformed','searchjl','stroke','trad','unihan','zhuyin'
];
if(%_CallFunction(bf,ak.co,c)!==
-1){
ai='-u-co-'+ak.co;
be=ak.co;
}
}else if(bb.usage==='search'){
ai='-u-co-search';
}
defineWEProperty(bb,'collation',be);
var bg=X.locale+ai;
var ag=ObjectDefineProperties({},{
caseFirst:{writable:true},
collation:{value:bb.collation,writable:true},
ignorePunctuation:{writable:true},
locale:{writable:true},
numeric:{writable:true},
requestedLocale:{value:bg,writable:true},
sensitivity:{writable:true},
strength:{writable:true},
usage:{value:bb.usage,writable:true}
});
var bh=%CreateCollator(bg,
bb,
ag);
%MarkAsInitializedIntlObjectOfType(ba,'collator',bh);
ObjectDefineProperty(ba,'resolved',{value:ag});
return ba;
}
%AddNamedProperty(v,'Collator',function(){
var Q=%_Arguments(0);
var R=%_Arguments(1);
if(!this||this===v){
return new v.Collator(Q,R);
}
return initializeCollator((%_ToObject(this)),Q,R);
},
2
);
%AddNamedProperty(v.Collator.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if(!%IsInitializedIntlObjectOfType(this,'collator')){
throw MakeTypeError(99,"Collator");
}
var bi=this;
var X=getOptimalLanguageTag(bi.resolved.requestedLocale,
bi.resolved.locale);
return{
locale:X,
usage:bi.resolved.usage,
sensitivity:bi.resolved.sensitivity,
ignorePunctuation:bi.resolved.ignorePunctuation,
numeric:bi.resolved.numeric,
caseFirst:bi.resolved.caseFirst,
collation:bi.resolved.collation
};
},
2
);
%FunctionSetName(v.Collator.prototype.resolvedOptions,'resolvedOptions');
%FunctionRemovePrototype(v.Collator.prototype.resolvedOptions);
%SetNativeFlag(v.Collator.prototype.resolvedOptions);
%AddNamedProperty(v.Collator,'supportedLocalesOf',function(Q){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
return supportedLocalesOf('collator',Q,%_Arguments(1));
},
2
);
%FunctionSetName(v.Collator.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(v.Collator.supportedLocalesOf);
%SetNativeFlag(v.Collator.supportedLocalesOf);
function compare(ba,N,O){
return %InternalCompare(%GetImplFromInitializedIntlObject(ba),
k(N),k(O));
};
addBoundMethod(v.Collator,'compare',compare,2);
function isWellFormedCurrencyCode(bj){
return typeof bj=="string"&&
bj.length==3&&
%_CallFunction(bj,/[^A-Za-z]/,p)==null;
}
function getNumberOption(R,ab,bk,bl,bm){
var af=R[ab];
if(!(af===(void 0))){
af=i(af);
if(f(af)||af<bk||af>bl){
throw MakeRangeError(148,ab);
}
return l(af);
}
return bm;
}
function initializeNumberFormat(bn,Q,R){
if(%IsInitializedIntlObject(bn)){
throw MakeTypeError(98,"NumberFormat");
}
if((R===(void 0))){
R={};
}
var aa=getGetOption(R,'numberformat');
var X=resolveLocale('numberformat',Q,R);
var bb={};
defineWEProperty(bb,'style',aa(
'style','string',['decimal','percent','currency'],'decimal'));
var bj=aa('currency','string');
if(!(bj===(void 0))&&!isWellFormedCurrencyCode(bj)){
throw MakeRangeError(133,bj);
}
if(bb.style==='currency'&&(bj===(void 0))){
throw MakeTypeError(22);
}
var bo=aa(
'currencyDisplay','string',['code','symbol','name'],'symbol');
if(bb.style==='currency'){
defineWEProperty(bb,'currency',%StringToUpperCase(bj));
defineWEProperty(bb,'currencyDisplay',bo);
}
var bp=getNumberOption(R,'minimumIntegerDigits',1,21,1);
defineWEProperty(bb,'minimumIntegerDigits',bp);
var bq=R['minimumFractionDigits'];
var br=R['maximumFractionDigits'];
if(!(bq===(void 0))||!bb.style==='currency'){
bq=getNumberOption(R,'minimumFractionDigits',0,20,0);
defineWEProperty(bb,'minimumFractionDigits',bq);
}
if(!(br===(void 0))||!bb.style==='currency'){
bq=(bq===(void 0))?0:bq;
fallback_limit=(bq>3)?bq:3;
br=getNumberOption(R,'maximumFractionDigits',bq,20,fallback_limit);
defineWEProperty(bb,'maximumFractionDigits',br);
}
var bs=R['minimumSignificantDigits'];
var bt=R['maximumSignificantDigits'];
if(!(bs===(void 0))||!(bt===(void 0))){
bs=getNumberOption(R,'minimumSignificantDigits',1,21,0);
defineWEProperty(bb,'minimumSignificantDigits',bs);
bt=getNumberOption(R,'maximumSignificantDigits',bs,21,21);
defineWEProperty(bb,'maximumSignificantDigits',bt);
}
defineWEProperty(bb,'useGrouping',aa(
'useGrouping','boolean',(void 0),true));
var ak=parseExtension(X.extension);
var bu={
'nu':{'property':(void 0),'type':'string'}
};
var ai=setOptions(R,ak,bu,
aa,bb);
var bg=X.locale+ai;
var ag=ObjectDefineProperties({},{
currency:{writable:true},
currencyDisplay:{writable:true},
locale:{writable:true},
maximumFractionDigits:{writable:true},
minimumFractionDigits:{writable:true},
minimumIntegerDigits:{writable:true},
numberingSystem:{writable:true},
requestedLocale:{value:bg,writable:true},
style:{value:bb.style,writable:true},
useGrouping:{writable:true}
});
if(%HasOwnProperty(bb,'minimumSignificantDigits')){
defineWEProperty(ag,'minimumSignificantDigits',(void 0));
}
if(%HasOwnProperty(bb,'maximumSignificantDigits')){
defineWEProperty(ag,'maximumSignificantDigits',(void 0));
}
var bv=%CreateNumberFormat(bg,
bb,
ag);
if(bb.style==='currency'){
ObjectDefineProperty(ag,'currencyDisplay',{value:bo,
writable:true});
}
%MarkAsInitializedIntlObjectOfType(bn,'numberformat',bv);
ObjectDefineProperty(bn,'resolved',{value:ag});
return bn;
}
%AddNamedProperty(v,'NumberFormat',function(){
var Q=%_Arguments(0);
var R=%_Arguments(1);
if(!this||this===v){
return new v.NumberFormat(Q,R);
}
return initializeNumberFormat((%_ToObject(this)),Q,R);
},
2
);
%AddNamedProperty(v.NumberFormat.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if(!%IsInitializedIntlObjectOfType(this,'numberformat')){
throw MakeTypeError(99,"NumberFormat");
}
var bw=this;
var X=getOptimalLanguageTag(bw.resolved.requestedLocale,
bw.resolved.locale);
var bx={
locale:X,
numberingSystem:bw.resolved.numberingSystem,
style:bw.resolved.style,
useGrouping:bw.resolved.useGrouping,
minimumIntegerDigits:bw.resolved.minimumIntegerDigits,
minimumFractionDigits:bw.resolved.minimumFractionDigits,
maximumFractionDigits:bw.resolved.maximumFractionDigits,
};
if(bx.style==='currency'){
defineWECProperty(bx,'currency',bw.resolved.currency);
defineWECProperty(bx,'currencyDisplay',
bw.resolved.currencyDisplay);
}
if(%HasOwnProperty(bw.resolved,'minimumSignificantDigits')){
defineWECProperty(bx,'minimumSignificantDigits',
bw.resolved.minimumSignificantDigits);
}
if(%HasOwnProperty(bw.resolved,'maximumSignificantDigits')){
defineWECProperty(bx,'maximumSignificantDigits',
bw.resolved.maximumSignificantDigits);
}
return bx;
},
2
);
%FunctionSetName(v.NumberFormat.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(v.NumberFormat.prototype.resolvedOptions);
%SetNativeFlag(v.NumberFormat.prototype.resolvedOptions);
%AddNamedProperty(v.NumberFormat,'supportedLocalesOf',function(Q){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
return supportedLocalesOf('numberformat',Q,%_Arguments(1));
},
2
);
%FunctionSetName(v.NumberFormat.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(v.NumberFormat.supportedLocalesOf);
%SetNativeFlag(v.NumberFormat.supportedLocalesOf);
function formatNumber(bv,af){
var by=ToNumber(af)+0;
return %InternalNumberFormat(%GetImplFromInitializedIntlObject(bv),
by);
}
function parseNumber(bv,af){
return %InternalNumberParse(%GetImplFromInitializedIntlObject(bv),
k(af));
}
addBoundMethod(v.NumberFormat,'format',formatNumber,1);
addBoundMethod(v.NumberFormat,'v8Parse',parseNumber,1);
function toLDMLString(R){
var aa=getGetOption(R,'dateformat');
var bz='';
var bA=aa('weekday','string',['narrow','short','long']);
bz+=appendToLDMLString(
bA,{narrow:'EEEEE',short:'EEE',long:'EEEE'});
bA=aa('era','string',['narrow','short','long']);
bz+=appendToLDMLString(
bA,{narrow:'GGGGG',short:'GGG',long:'GGGG'});
bA=aa('year','string',['2-digit','numeric']);
bz+=appendToLDMLString(bA,{'2-digit':'yy','numeric':'y'});
bA=aa('month','string',
['2-digit','numeric','narrow','short','long']);
bz+=appendToLDMLString(bA,{'2-digit':'MM','numeric':'M',
'narrow':'MMMMM','short':'MMM','long':'MMMM'});
bA=aa('day','string',['2-digit','numeric']);
bz+=appendToLDMLString(
bA,{'2-digit':'dd','numeric':'d'});
var bB=aa('hour12','boolean');
bA=aa('hour','string',['2-digit','numeric']);
if((bB===(void 0))){
bz+=appendToLDMLString(bA,{'2-digit':'jj','numeric':'j'});
}else if(bB===true){
bz+=appendToLDMLString(bA,{'2-digit':'hh','numeric':'h'});
}else{
bz+=appendToLDMLString(bA,{'2-digit':'HH','numeric':'H'});
}
bA=aa('minute','string',['2-digit','numeric']);
bz+=appendToLDMLString(bA,{'2-digit':'mm','numeric':'m'});
bA=aa('second','string',['2-digit','numeric']);
bz+=appendToLDMLString(bA,{'2-digit':'ss','numeric':'s'});
bA=aa('timeZoneName','string',['short','long']);
bz+=appendToLDMLString(bA,{short:'z',long:'zzzz'});
return bz;
}
function appendToLDMLString(bA,bC){
if(!(bA===(void 0))){
return bC[bA];
}else{
return'';
}
}
function fromLDMLString(bz){
bz=%_CallFunction(bz,GetQuotedStringRE(),'',
q);
var R={};
var bD=%_CallFunction(bz,/E{3,5}/g,p);
R=appendToDateTimeObject(
R,'weekday',bD,{EEEEE:'narrow',EEE:'short',EEEE:'long'});
bD=%_CallFunction(bz,/G{3,5}/g,p);
R=appendToDateTimeObject(
R,'era',bD,{GGGGG:'narrow',GGG:'short',GGGG:'long'});
bD=%_CallFunction(bz,/y{1,2}/g,p);
R=appendToDateTimeObject(
R,'year',bD,{y:'numeric',yy:'2-digit'});
bD=%_CallFunction(bz,/M{1,5}/g,p);
R=appendToDateTimeObject(R,'month',bD,{MM:'2-digit',
M:'numeric',MMMMM:'narrow',MMM:'short',MMMM:'long'});
bD=%_CallFunction(bz,/L{1,5}/g,p);
R=appendToDateTimeObject(R,'month',bD,{LL:'2-digit',
L:'numeric',LLLLL:'narrow',LLL:'short',LLLL:'long'});
bD=%_CallFunction(bz,/d{1,2}/g,p);
R=appendToDateTimeObject(
R,'day',bD,{d:'numeric',dd:'2-digit'});
bD=%_CallFunction(bz,/h{1,2}/g,p);
if(bD!==null){
R['hour12']=true;
}
R=appendToDateTimeObject(
R,'hour',bD,{h:'numeric',hh:'2-digit'});
bD=%_CallFunction(bz,/H{1,2}/g,p);
if(bD!==null){
R['hour12']=false;
}
R=appendToDateTimeObject(
R,'hour',bD,{H:'numeric',HH:'2-digit'});
bD=%_CallFunction(bz,/m{1,2}/g,p);
R=appendToDateTimeObject(
R,'minute',bD,{m:'numeric',mm:'2-digit'});
bD=%_CallFunction(bz,/s{1,2}/g,p);
R=appendToDateTimeObject(
R,'second',bD,{s:'numeric',ss:'2-digit'});
bD=%_CallFunction(bz,/z|zzzz/g,p);
R=appendToDateTimeObject(
R,'timeZoneName',bD,{z:'short',zzzz:'long'});
return R;
}
function appendToDateTimeObject(R,bA,bD,bC){
if((bD===null)){
if(!%HasOwnProperty(R,bA)){
defineWEProperty(R,bA,(void 0));
}
return R;
}
var ab=bD[0];
defineWEProperty(R,bA,bC[ab]);
return R;
}
function toDateTimeOptions(R,bE,bF){
if((R===(void 0))){
R={};
}else{
R=(%_ToObject(R));
}
var bG=true;
if((bE==='date'||bE==='any')&&
(!(R.weekday===(void 0))||!(R.year===(void 0))||
!(R.month===(void 0))||!(R.day===(void 0)))){
bG=false;
}
if((bE==='time'||bE==='any')&&
(!(R.hour===(void 0))||!(R.minute===(void 0))||
!(R.second===(void 0)))){
bG=false;
}
if(bG&&(bF==='date'||bF==='all')){
ObjectDefineProperty(R,'year',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
ObjectDefineProperty(R,'month',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
ObjectDefineProperty(R,'day',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
}
if(bG&&(bF==='time'||bF==='all')){
ObjectDefineProperty(R,'hour',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
ObjectDefineProperty(R,'minute',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
ObjectDefineProperty(R,'second',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
}
return R;
}
function initializeDateTimeFormat(bH,Q,R){
if(%IsInitializedIntlObject(bH)){
throw MakeTypeError(98,"DateTimeFormat");
}
if((R===(void 0))){
R={};
}
var X=resolveLocale('dateformat',Q,R);
R=toDateTimeOptions(R,'any','date');
var aa=getGetOption(R,'dateformat');
var S=aa('formatMatcher','string',
['basic','best fit'],'best fit');
var bz=toLDMLString(R);
var bI=canonicalizeTimeZoneID(R.timeZone);
var bb={};
var ak=parseExtension(X.extension);
var bJ={
'ca':{'property':(void 0),'type':'string'},
'nu':{'property':(void 0),'type':'string'}
};
var ai=setOptions(R,ak,bJ,
aa,bb);
var bg=X.locale+ai;
var ag=ObjectDefineProperties({},{
calendar:{writable:true},
day:{writable:true},
era:{writable:true},
hour12:{writable:true},
hour:{writable:true},
locale:{writable:true},
minute:{writable:true},
month:{writable:true},
numberingSystem:{writable:true},
pattern:{writable:true},
requestedLocale:{value:bg,writable:true},
second:{writable:true},
timeZone:{writable:true},
timeZoneName:{writable:true},
tz:{value:bI,writable:true},
weekday:{writable:true},
year:{writable:true}
});
var bv=%CreateDateTimeFormat(
bg,{skeleton:bz,timeZone:bI},ag);
if(!(bI===(void 0))&&bI!==ag.timeZone){
throw MakeRangeError(154,bI);
}
%MarkAsInitializedIntlObjectOfType(bH,'dateformat',bv);
ObjectDefineProperty(bH,'resolved',{value:ag});
return bH;
}
%AddNamedProperty(v,'DateTimeFormat',function(){
var Q=%_Arguments(0);
var R=%_Arguments(1);
if(!this||this===v){
return new v.DateTimeFormat(Q,R);
}
return initializeDateTimeFormat((%_ToObject(this)),Q,R);
},
2
);
%AddNamedProperty(v.DateTimeFormat.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if(!%IsInitializedIntlObjectOfType(this,'dateformat')){
throw MakeTypeError(99,"DateTimeFormat");
}
var bK={
'gregorian':'gregory',
'japanese':'japanese',
'buddhist':'buddhist',
'roc':'roc',
'persian':'persian',
'islamic-civil':'islamicc',
'islamic':'islamic',
'hebrew':'hebrew',
'chinese':'chinese',
'indian':'indian',
'coptic':'coptic',
'ethiopic':'ethiopic',
'ethiopic-amete-alem':'ethioaa'
};
var bw=this;
var bL=fromLDMLString(bw.resolved.pattern);
var bM=bK[bw.resolved.calendar];
if((bM===(void 0))){
bM=bw.resolved.calendar;
}
var X=getOptimalLanguageTag(bw.resolved.requestedLocale,
bw.resolved.locale);
var bx={
locale:X,
numberingSystem:bw.resolved.numberingSystem,
calendar:bM,
timeZone:bw.resolved.timeZone
};
addWECPropertyIfDefined(bx,'timeZoneName',bL.timeZoneName);
addWECPropertyIfDefined(bx,'era',bL.era);
addWECPropertyIfDefined(bx,'year',bL.year);
addWECPropertyIfDefined(bx,'month',bL.month);
addWECPropertyIfDefined(bx,'day',bL.day);
addWECPropertyIfDefined(bx,'weekday',bL.weekday);
addWECPropertyIfDefined(bx,'hour12',bL.hour12);
addWECPropertyIfDefined(bx,'hour',bL.hour);
addWECPropertyIfDefined(bx,'minute',bL.minute);
addWECPropertyIfDefined(bx,'second',bL.second);
return bx;
},
2
);
%FunctionSetName(v.DateTimeFormat.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(v.DateTimeFormat.prototype.resolvedOptions);
%SetNativeFlag(v.DateTimeFormat.prototype.resolvedOptions);
%AddNamedProperty(v.DateTimeFormat,'supportedLocalesOf',function(Q){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
return supportedLocalesOf('dateformat',Q,%_Arguments(1));
},
2
);
%FunctionSetName(v.DateTimeFormat.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(v.DateTimeFormat.supportedLocalesOf);
%SetNativeFlag(v.DateTimeFormat.supportedLocalesOf);
function formatDate(bv,bN){
var bO;
if((bN===(void 0))){
bO=%DateCurrentTime();
}else{
bO=ToNumber(bN);
}
if(!e(bO))throw MakeRangeError(127);
return %InternalDateFormat(%GetImplFromInitializedIntlObject(bv),
new h(bO));
}
function parseDate(bv,af){
return %InternalDateParse(%GetImplFromInitializedIntlObject(bv),
k(af));
}
addBoundMethod(v.DateTimeFormat,'format',formatDate,0);
addBoundMethod(v.DateTimeFormat,'v8Parse',parseDate,1);
function canonicalizeTimeZoneID(bP){
if((bP===(void 0))){
return bP;
}
var bQ=%StringToUpperCase(bP);
if(bQ==='UTC'||bQ==='GMT'||
bQ==='ETC/UTC'||bQ==='ETC/GMT'){
return'UTC';
}
var bD=%_CallFunction(bP,GetTimezoneNameCheckRE(),p);
if((bD===null))throw MakeRangeError(128,bP);
var bx=toTitleCaseWord(bD[1])+'/'+toTitleCaseWord(bD[2]);
var W=3;
while(!(bD[W]===(void 0))&&W<bD.length){
bx=bx+'_'+toTitleCaseWord(bD[W]);
W++;
}
return bx;
}
function initializeBreakIterator(bR,Q,R){
if(%IsInitializedIntlObject(bR)){
throw MakeTypeError(98,"v8BreakIterator");
}
if((R===(void 0))){
R={};
}
var aa=getGetOption(R,'breakiterator');
var bb={};
defineWEProperty(bb,'type',aa(
'type','string',['character','word','sentence','line'],'word'));
var X=resolveLocale('breakiterator',Q,R);
var ag=ObjectDefineProperties({},{
requestedLocale:{value:X.locale,writable:true},
type:{value:bb.type,writable:true},
locale:{writable:true}
});
var bS=%CreateBreakIterator(X.locale,
bb,
ag);
%MarkAsInitializedIntlObjectOfType(bR,'breakiterator',
bS);
ObjectDefineProperty(bR,'resolved',{value:ag});
return bR;
}
%AddNamedProperty(v,'v8BreakIterator',function(){
var Q=%_Arguments(0);
var R=%_Arguments(1);
if(!this||this===v){
return new v.v8BreakIterator(Q,R);
}
return initializeBreakIterator((%_ToObject(this)),Q,R);
},
2
);
%AddNamedProperty(v.v8BreakIterator.prototype,'resolvedOptions',
function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if(!%IsInitializedIntlObjectOfType(this,'breakiterator')){
throw MakeTypeError(99,"v8BreakIterator");
}
var bT=this;
var X=getOptimalLanguageTag(bT.resolved.requestedLocale,
bT.resolved.locale);
return{
locale:X,
type:bT.resolved.type
};
},
2
);
%FunctionSetName(v.v8BreakIterator.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(v.v8BreakIterator.prototype.resolvedOptions);
%SetNativeFlag(v.v8BreakIterator.prototype.resolvedOptions);
%AddNamedProperty(v.v8BreakIterator,'supportedLocalesOf',
function(Q){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
return supportedLocalesOf('breakiterator',Q,%_Arguments(1));
},
2
);
%FunctionSetName(v.v8BreakIterator.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(v.v8BreakIterator.supportedLocalesOf);
%SetNativeFlag(v.v8BreakIterator.supportedLocalesOf);
function adoptText(bR,bU){
%BreakIteratorAdoptText(%GetImplFromInitializedIntlObject(bR),
k(bU));
}
function first(bR){
return %BreakIteratorFirst(%GetImplFromInitializedIntlObject(bR));
}
function next(bR){
return %BreakIteratorNext(%GetImplFromInitializedIntlObject(bR));
}
function current(bR){
return %BreakIteratorCurrent(%GetImplFromInitializedIntlObject(bR));
}
function breakType(bR){
return %BreakIteratorBreakType(%GetImplFromInitializedIntlObject(bR));
}
addBoundMethod(v.v8BreakIterator,'adoptText',adoptText,1);
addBoundMethod(v.v8BreakIterator,'first',first,0);
addBoundMethod(v.v8BreakIterator,'next',next,0);
addBoundMethod(v.v8BreakIterator,'current',current,0);
addBoundMethod(v.v8BreakIterator,'breakType',breakType,0);
var bV={
'collator':v.Collator,
'numberformat':v.NumberFormat,
'dateformatall':v.DateTimeFormat,
'dateformatdate':v.DateTimeFormat,
'dateformattime':v.DateTimeFormat
};
var bW={
'collator':(void 0),
'numberformat':(void 0),
'dateformatall':(void 0),
'dateformatdate':(void 0),
'dateformattime':(void 0),
};
function cachedOrNewService(P,Q,R,bF){
var bX=((bF===(void 0)))?R:bF;
if((Q===(void 0))&&(R===(void 0))){
if((bW[P]===(void 0))){
bW[P]=new bV[P](Q,bX);
}
return bW[P];
}
return new bV[P](Q,bX);
}
function OverrideFunction(aA,bY,bZ){
%CheckIsBootstrapping();
ObjectDefineProperty(aA,bY,{value:bZ,
writeable:true,
configurable:true,
enumerable:false});
%FunctionSetName(bZ,bY);
%FunctionRemovePrototype(bZ);
%SetNativeFlag(bZ);
}
OverrideFunction(k.prototype,'localeCompare',function(L){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if((this==null)){
throw MakeTypeError(45);
}
var Q=%_Arguments(1);
var R=%_Arguments(2);
var ba=cachedOrNewService('collator',Q,R);
return compare(ba,this,L);
}
);
OverrideFunction(k.prototype,'normalize',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"String.prototype.normalize");
var ca=((typeof(%IS_VAR(this))==='string')?this:$nonStringToString(this));
var cb=%_Arguments(0);
var cc=(cb===(void 0))?'NFC':((typeof(%IS_VAR(cb))==='string')?cb:$nonStringToString(cb));
var cd=['NFC','NFD','NFKC','NFKD'];
var ce=
%_CallFunction(cd,cc,c);
if(ce===-1){
throw MakeRangeError(146,
%_CallFunction(cd,', ',d));
}
return %StringNormalize(ca,ce);
}
);
OverrideFunction(i.prototype,'toLocaleString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
if(!(this instanceof i)&&typeof(this)!=='number'){
throw MakeTypeError(46,"Number");
}
var Q=%_Arguments(0);
var R=%_Arguments(1);
var bn=cachedOrNewService('numberformat',Q,R);
return formatNumber(bn,this);
}
);
function toLocaleDateTime(cf,Q,R,bE,bF,P){
if(!(cf instanceof h)){
throw MakeTypeError(46,"Date");
}
if(f(cf))return'Invalid Date';
var bb=toDateTimeOptions(R,bE,bF);
var bH=
cachedOrNewService(P,Q,R,bb);
return formatDate(bH,cf);
}
OverrideFunction(h.prototype,'toLocaleString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
var Q=%_Arguments(0);
var R=%_Arguments(1);
return toLocaleDateTime(
this,Q,R,'any','all','dateformatall');
}
);
OverrideFunction(h.prototype,'toLocaleDateString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
var Q=%_Arguments(0);
var R=%_Arguments(1);
return toLocaleDateTime(
this,Q,R,'date','date','dateformatdate');
}
);
OverrideFunction(h.prototype,'toLocaleTimeString',function(){
if(%_IsConstructCall()){
throw MakeTypeError(78);
}
var Q=%_Arguments(0);
var R=%_Arguments(1);
return toLocaleDateTime(
this,Q,R,'time','time','dateformattime');
}
);
})

 (code-stubsi
(function(a,b){
"use strict";
b.StringLengthTFStub=function StringLengthTFStub(c,d){
var e=function(f,g,h,i){
return %_StringGetLength(%_JSValueGetValue(f));
}
return e;
}
b.StringAddTFStub=function StringAddTFStub(c,d){
var e=function(j,k){
return %StringAdd(j,k);
}
return e;
}
const kTurboFanICCallModeMask=1;
const kTurboFanICCallForUnptimizedCode=0;
const kTurboFanICCallForOptimizedCode=1;
b.MathFloorStub=function MathFloorStub(c,d){
var l=function(m,h,n,f,i){
"use strict";
if(m!==%_FixedArrayGet(n,h|0)){
return %_CallFunction(f,i,m);
}
var o=%_MathFloor(+i);
if(%_IsMinusZero(o)){
%_FixedArraySet(n,((h|0)+1)|0,1);
return-0;
}
var p=o|0;
if(p===o){
return p;
}
return o;
}
var q=(d&kTurboFanICCallModeMask);
if(q==kTurboFanICCallForOptimizedCode){
return l;
}else{
%SetForceInlineFlag(l);
var r=function(m,h,f,i){
var n=%_GetTypeFeedbackVector(%_GetCallerJSFunction());
return l(m,h,n,f,i);
}
return r;
}
}
})

 4proxyI5
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Function;
var d=a.Object;
var e;
b.Import(function(f){
e=f.ToNameArray;
});
function ProxyCreate(g,h){
if(!(%_IsSpecObject(g)))
throw MakeTypeError(85,"create")
if((h===(void 0)))
h=null
else if(!((%_IsSpecObject(h))||(h===null)))
throw MakeTypeError(90)
return %CreateJSProxy(g,h)
}
function ProxyCreateFunction(g,i,j){
if(!(%_IsSpecObject(g)))
throw MakeTypeError(85,"createFunction")
if(!(%_ClassOf(i)==='Function'))
throw MakeTypeError(93,"call")
if((j===(void 0))){
j=DerivedConstructTrap(i)
}else if((%_ClassOf(j)==='Function')){
var k=j
j=function(){
return %Apply(k,(void 0),arguments,0,%_ArgumentsLength());
}
}else{
throw MakeTypeError(93,"construct")
}
return %CreateJSFunctionProxy(
g,i,j,c.prototype)
}
function DerivedConstructTrap(i){
return function(){
var h=this.prototype
if(!(%_IsSpecObject(h)))h=d.prototype
var l={__proto__:h};
var m=%Apply(i,l,arguments,0,%_ArgumentsLength());
return(%_IsSpecObject(m))?m:l
}
}
function DelegateCallAndConstruct(i,j){
return function(){
return %Apply(%_IsConstructCall()?j:i,
this,arguments,0,%_ArgumentsLength())
}
}
function DerivedGetTrap(n,o){
var p=this.getPropertyDescriptor(o)
if((p===(void 0))){return p}
if('value'in p){
return p.value
}else{
if((p.get===(void 0))){return p.get}
return %_CallFunction(n,p.get)
}
}
function DerivedSetTrap(n,o,q){
var p=this.getOwnPropertyDescriptor(o)
if(p){
if('writable'in p){
if(p.writable){
p.value=q
this.defineProperty(o,p)
return true
}else{
return false
}
}else{
if(p.set){
%_CallFunction(n,q,p.set)
return true
}else{
return false
}
}
}
p=this.getPropertyDescriptor(o)
if(p){
if('writable'in p){
if(p.writable){
}else{
return false
}
}else{
if(p.set){
%_CallFunction(n,q,p.set)
return true
}else{
return false
}
}
}
this.defineProperty(o,{
value:q,
writable:true,
enumerable:true,
configurable:true});
return true;
}
function DerivedHasTrap(o){
return!!this.getPropertyDescriptor(o)
}
function DerivedHasOwnTrap(o){
return!!this.getOwnPropertyDescriptor(o)
}
function DerivedKeysTrap(){
var r=this.getOwnPropertyNames()
var s=[]
for(var t=0,count=0;t<r.length;++t){
var o=r[t]
if((typeof(o)==='symbol'))continue
var p=this.getOwnPropertyDescriptor(((typeof(%IS_VAR(o))==='string')?o:$nonStringToString(o)))
if(!(p===(void 0))&&p.enumerable){
s[count++]=r[t]
}
}
return s
}
function DerivedEnumerateTrap(){
var r=this.getPropertyNames()
var s=[]
for(var t=0,count=0;t<r.length;++t){
var o=r[t]
if((typeof(o)==='symbol'))continue
var p=this.getPropertyDescriptor(((typeof(%IS_VAR(o))==='string')?o:$nonStringToString(o)))
if(!(p===(void 0))){
if(!p.configurable){
throw MakeTypeError(91,
this,o,"getPropertyDescriptor")
}
if(p.enumerable)s[count++]=r[t]
}
}
return s
}
function ProxyEnumerate(u){
var g=%GetHandler(u)
if((g.enumerate===(void 0))){
return %Apply(DerivedEnumerateTrap,g,[],0,0)
}else{
return e(g.enumerate(),"enumerate",false)
}
}
var v=new d();
%AddNamedProperty(a,"Proxy",v,2);
b.InstallFunctions(v,2,[
"create",ProxyCreate,
"createFunction",ProxyCreateFunction
])
b.Export(function(w){
w.ProxyDelegateCallAndConstruct=DelegateCallAndConstruct;
w.ProxyDerivedHasOwnTrap=DerivedHasOwnTrap;
w.ProxyDerivedKeysTrap=DerivedKeysTrap;
});
b.ExportToRuntime(function(w){
w["derived_get_trap"]=DerivedGetTrap;
w["derived_has_trap"]=DerivedHasTrap;
w["derived_set_trap"]=DerivedSetTrap;
w["proxy_enumerate"]=ProxyEnumerate;
});
})

$generatorá
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Function;
var d;
b.Import(function(e){
d=e.NewFunctionString;
});
function GeneratorObjectNext(f){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.next',this);
}
var g=%GeneratorGetContinuation(this);
if(g>0){
if((%_DebugIsActive()!=0))%DebugPrepareStepInIfStepping(this);
try{
return %_GeneratorNext(this,f);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(g==0){
return{value:void 0,done:true};
}else{
throw MakeTypeError(34);
}
}
function GeneratorObjectThrow(h){
if(!(%_ClassOf(this)==='Generator')){
throw MakeTypeError(36,
'[Generator].prototype.throw',this);
}
var g=%GeneratorGetContinuation(this);
if(g>0){
try{
return %_GeneratorThrow(this,h);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(g==0){
throw h;
}else{
throw MakeTypeError(34);
}
}
function GeneratorFunctionConstructor(i){
var j=d(arguments,'function*');
var k=%GlobalProxy(GeneratorFunctionConstructor);
var l=%_CallFunction(k,%CompileString(j,true));
%FunctionMarkNameShouldPrintAsAnonymous(l);
return l;
}
%NeverOptimizeFunction(GeneratorObjectNext);
%NeverOptimizeFunction(GeneratorObjectThrow);
var m=GeneratorFunctionPrototype.prototype;
b.InstallFunctions(m,
2,
["next",GeneratorObjectNext,
"throw",GeneratorObjectThrow]);
%AddNamedProperty(m,"constructor",
GeneratorFunctionPrototype,2|1);
%AddNamedProperty(m,
symbolToStringTag,"Generator",2|1);
%InternalSetPrototype(GeneratorFunctionPrototype,c.prototype);
%AddNamedProperty(GeneratorFunctionPrototype,
symbolToStringTag,"GeneratorFunction",2|1);
%AddNamedProperty(GeneratorFunctionPrototype,"constructor",
GeneratorFunction,2|1);
%InternalSetPrototype(GeneratorFunction,c);
%SetCode(GeneratorFunction,GeneratorFunctionConstructor);
})

<harmony-atomicsÅ8
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d;
var e;
b.Import(function(f){
d=f.MathMax;
e=f.ToNumber;
});
function CheckSharedTypedArray(g){
if(!%IsSharedTypedArray(g)){
throw MakeTypeError(61,g);
}
}
function CheckSharedIntegerTypedArray(h){
if(!%IsSharedIntegerTypedArray(h)){
throw MakeTypeError(62,h);
}
}
function CheckSharedInteger32TypedArray(h){
CheckSharedIntegerTypedArray(h);
if(%_ClassOf(h)!=='Int32Array'){
throw MakeTypeError(63,h);
}
}
function AtomicsCompareExchangeJS(g,i,j,k){
CheckSharedTypedArray(g);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
j=e(j);
k=e(k);
return %_AtomicsCompareExchange(g,i,j,k);
}
function AtomicsLoadJS(g,i){
CheckSharedTypedArray(g);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
return %_AtomicsLoad(g,i);
}
function AtomicsStoreJS(g,i,l){
CheckSharedTypedArray(g);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(g)){
return(void 0);
}
l=e(l);
return %_AtomicsStore(g,i,l);
}
function AtomicsAddJS(h,i,l){
CheckSharedIntegerTypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
l=e(l);
return %_AtomicsAdd(h,i,l);
}
function AtomicsSubJS(h,i,l){
CheckSharedIntegerTypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
l=e(l);
return %_AtomicsSub(h,i,l);
}
function AtomicsAndJS(h,i,l){
CheckSharedIntegerTypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
l=e(l);
return %_AtomicsAnd(h,i,l);
}
function AtomicsOrJS(h,i,l){
CheckSharedIntegerTypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
l=e(l);
return %_AtomicsOr(h,i,l);
}
function AtomicsXorJS(h,i,l){
CheckSharedIntegerTypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
l=e(l);
return %_AtomicsXor(h,i,l);
}
function AtomicsExchangeJS(h,i,l){
CheckSharedIntegerTypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
l=e(l);
return %_AtomicsExchange(h,i,l);
}
function AtomicsIsLockFreeJS(m){
return %_AtomicsIsLockFree(m);
}
function AtomicsFutexWaitJS(h,i,l,n){
CheckSharedInteger32TypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
if((n===(void 0))){
n=(1/0);
}else{
n=e(n);
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))){
n=(1/0);
}else{
n=d(0,n);
}
}
return %AtomicsFutexWait(h,i,l,n);
}
function AtomicsFutexWakeJS(h,i,o){
CheckSharedInteger32TypedArray(h);
i=$toInteger(i);
if(i<0||i>=%_TypedArrayGetLength(h)){
return(void 0);
}
o=d(0,$toInteger(o));
return %AtomicsFutexWake(h,i,o);
}
function AtomicsFutexWakeOrRequeueJS(h,p,o,l,q){
CheckSharedInteger32TypedArray(h);
p=$toInteger(p);
o=d(0,$toInteger(o));
l=(l|0);
q=$toInteger(q);
if(p<0||p>=%_TypedArrayGetLength(h)||
q<0||q>=%_TypedArrayGetLength(h)){
return(void 0);
}
return %AtomicsFutexWakeOrRequeue(h,p,o,l,q);
}
function AtomicsConstructor(){}
var r=new AtomicsConstructor();
%InternalSetPrototype(r,c.prototype);
%AddNamedProperty(a,"Atomics",r,2);
%FunctionSetInstanceClassName(AtomicsConstructor,'Atomics');
%AddNamedProperty(r,symbolToStringTag,"Atomics",1|2);
b.InstallConstants(r,[
"OK",0,
"NOTEQUAL",-1,
"TIMEDOUT",-2,
]);
b.InstallFunctions(r,2,[
"compareExchange",AtomicsCompareExchangeJS,
"load",AtomicsLoadJS,
"store",AtomicsStoreJS,
"add",AtomicsAddJS,
"sub",AtomicsSubJS,
"and",AtomicsAndJS,
"or",AtomicsOrJS,
"xor",AtomicsXorJS,
"exchange",AtomicsExchangeJS,
"isLockFree",AtomicsIsLockFreeJS,
"futexWait",AtomicsFutexWaitJS,
"futexWake",AtomicsFutexWakeJS,
"futexWakeOrRequeue",AtomicsFutexWakeOrRequeueJS,
]);
})

Xharmony-array-includesÝ
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.Array;
function InnerArrayIncludes(d,e,f,g){
if(g===0){
return false;
}
var h=$toInteger(e);
var i;
if(h>=0){
i=h;
}else{
i=g+h;
if(i<0){
i=0;
}
}
while(i<g){
var j=f[i];
if($sameValueZero(d,j)){
return true;
}
++i;
}
return false;
}
function ArrayIncludes(d,e){
if((%IS_VAR(this)===null)||(this===(void 0)))throw MakeTypeError(15,"Array.prototype.includes");
var f=(%_ToObject(this));
var g=$toLength(f.length);
return InnerArrayIncludes(d,e,f,g);
}
function TypedArrayIncludes(d,e){
if(!%_IsTypedArray(this))throw MakeTypeError(60);
var g=%_TypedArrayGetLength(this);
return InnerArrayIncludes(d,e,this,g);
}
%FunctionSetLength(ArrayIncludes,1);
%FunctionSetLength(TypedArrayIncludes,1);
b.InstallFunctions(c.prototype,2,[
"includes",ArrayIncludes
]);
var k=a.Uint8Array;

var l=a.Int8Array;

var m=a.Uint16Array;

var n=a.Int16Array;

var o=a.Uint32Array;

var p=a.Int32Array;

var q=a.Float32Array;

var r=a.Float64Array;

var s=a.Uint8ClampedArray;


b.InstallFunctions(k.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(l.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(m.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(n.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(o.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(p.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(q.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(r.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(s.prototype,2,[
"includes",TypedArrayIncludes
]);


})

dharmony-concat-spreadable1
(function(a,b){
'use strict';
%CheckIsBootstrapping();
b.InstallConstants(a.Symbol,[
"isConcatSpreadable",symbolIsConcatSpreadable
]);
})

@harmony-tostring
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Symbol;
b.InstallConstants(c,[
"toStringTag",symbolToStringTag
]);
})

8harmony-regexpU
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.RegExp;
var d;
b.Import(function(e){
d=e.ToString;
});
function RegExpGetFlags(){
if(!(%_IsSpecObject(this))){
throw MakeTypeError(32,d(this));
}
var f='';
if(this.global)f+='g';
if(this.ignoreCase)f+='i';
if(this.multiline)f+='m';
if(this.unicode)f+='u';
if(this.sticky)f+='y';
return f;
}
%DefineAccessorPropertyUnchecked(c.prototype,'flags',
RegExpGetFlags,null,2);
%SetNativeFlag(RegExpGetFlags);
})

<harmony-reflect}
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.Reflect;
b.InstallFunctions(c,2,[
"apply",$reflectApply,
"construct",$reflectConstruct
]);
})

8harmony-spready
var $spreadArguments;
var $spreadIterable;
(function(a,b){
'use strict';
var c=b.InternalArray;
function SpreadArguments(){
var d=%_ArgumentsLength();
var e=new c();
for(var f=0;f<d;++f){
var g=%_Arguments(f);
var h=g.length;
for(var i=0;i<h;++i){
e.push(g[i]);
}
}
return e;
}
function SpreadIterable(j){
if((j==null)){
throw MakeTypeError(59,j);
}
var e=new c();
for(var k of j){
e.push(k);
}
return e;
}
$spreadArguments=SpreadArguments;
$spreadIterable=SpreadIterable;
})

8harmony-objectÙ
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d;
b.Import(function(e){
d=e.OwnPropertyKeys;
});
function ObjectAssign(f,g){
var h=(%_ToObject(f));
var i=%_ArgumentsLength();
if(i<2)return h;
for(var j=1;j<i;++j){
var k=%_Arguments(j);
if((k==null)){
continue;
}
var e=(%_ToObject(k));
var l=d(e);
var m=l.length;
for(var n=0;n<m;++n){
var o=l[n];
if(%IsPropertyEnumerable(e,o)){
var p=e[o];
h[o]=p;
}
}
}
return h;
}
b.InstallFunctions(c,2,[
"assign",ObjectAssign
]);
})

Xharmony-object-observe™
(function(a,b){
"use strict";
%CheckIsBootstrapping();
b.InstallFunctions(a.Object,2,$observeObjectMethods);
b.InstallFunctions(a.Array,2,$observeArrayMethods);
})

dharmony-sharedarraybuffer1
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.SharedArrayBuffer;
var d=a.Object;
function SharedArrayBufferConstructor(e){
if(%_IsConstructCall()){
var f=$toPositiveInteger(e,129);
%ArrayBufferInitialize(this,f,true);
}else{
throw MakeTypeError(21,"SharedArrayBuffer");
}
}
function SharedArrayBufferGetByteLen(){
if(!(%_ClassOf(this)==='SharedArrayBuffer')){
throw MakeTypeError(36,
'SharedArrayBuffer.prototype.byteLength',this);
}
return %_ArrayBufferGetByteLength(this);
}
function SharedArrayBufferIsViewJS(g){
return %ArrayBufferIsView(g);
}
%SetCode(c,SharedArrayBufferConstructor);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(c.prototype,"constructor",
c,2);
%AddNamedProperty(c.prototype,
symbolToStringTag,"SharedArrayBuffer",2|1);
b.InstallGetter(c.prototype,"byteLength",
SharedArrayBufferGetByteLen);
b.InstallFunctions(c,2,[
"isView",SharedArrayBufferIsViewJS
]);
})

0harmony-simdÒº
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.SIMD;
var d=c.Float32x4;


var e=c.Int32x4;

var f=c.Int16x8;

var g=c.Int8x16;


var h=c.Bool32x4;

var i=c.Bool16x8;

var j=c.Bool8x16;



function Float32x4CheckJS(k){
return %Float32x4Check(k);
}
function Float32x4ToString(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw MakeTypeError(36,
"Float32x4.prototype.toString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Float32x4(";
m+=%Float32x4ExtractLane(l,0);
for(var n=1;n<4;n++){
m+=", "+%Float32x4ExtractLane(l,n);
}
return m+")";
}
function Float32x4ToLocaleString(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw MakeTypeError(36,
"Float32x4.prototype.toLocaleString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Float32x4(";
m+=%Float32x4ExtractLane(l,0).toLocaleString();
for(var n=1;n<4;n++){
m+=", "+%Float32x4ExtractLane(l,n).toLocaleString();
}
return m+")";
}
function Float32x4ValueOf(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw MakeTypeError(36,
"Float32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Float32x4ExtractLaneJS(o,p){
return %Float32x4ExtractLane(o,p);
}
function Float32x4EqualJS(k,q){
return %Float32x4Equal(k,q);
}
function Float32x4NotEqualJS(k,q){
return %Float32x4NotEqual(k,q);
}


function Int32x4CheckJS(k){
return %Int32x4Check(k);
}
function Int32x4ToString(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw MakeTypeError(36,
"Int32x4.prototype.toString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Int32x4(";
m+=%Int32x4ExtractLane(l,0);
for(var n=1;n<4;n++){
m+=", "+%Int32x4ExtractLane(l,n);
}
return m+")";
}
function Int32x4ToLocaleString(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw MakeTypeError(36,
"Int32x4.prototype.toLocaleString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Int32x4(";
m+=%Int32x4ExtractLane(l,0).toLocaleString();
for(var n=1;n<4;n++){
m+=", "+%Int32x4ExtractLane(l,n).toLocaleString();
}
return m+")";
}
function Int32x4ValueOf(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw MakeTypeError(36,
"Int32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int32x4ExtractLaneJS(o,p){
return %Int32x4ExtractLane(o,p);
}
function Int32x4EqualJS(k,q){
return %Int32x4Equal(k,q);
}
function Int32x4NotEqualJS(k,q){
return %Int32x4NotEqual(k,q);
}

function Int16x8CheckJS(k){
return %Int16x8Check(k);
}
function Int16x8ToString(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw MakeTypeError(36,
"Int16x8.prototype.toString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Int16x8(";
m+=%Int16x8ExtractLane(l,0);
for(var n=1;n<8;n++){
m+=", "+%Int16x8ExtractLane(l,n);
}
return m+")";
}
function Int16x8ToLocaleString(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw MakeTypeError(36,
"Int16x8.prototype.toLocaleString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Int16x8(";
m+=%Int16x8ExtractLane(l,0).toLocaleString();
for(var n=1;n<8;n++){
m+=", "+%Int16x8ExtractLane(l,n).toLocaleString();
}
return m+")";
}
function Int16x8ValueOf(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw MakeTypeError(36,
"Int16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int16x8ExtractLaneJS(o,p){
return %Int16x8ExtractLane(o,p);
}
function Int16x8EqualJS(k,q){
return %Int16x8Equal(k,q);
}
function Int16x8NotEqualJS(k,q){
return %Int16x8NotEqual(k,q);
}

function Int8x16CheckJS(k){
return %Int8x16Check(k);
}
function Int8x16ToString(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw MakeTypeError(36,
"Int8x16.prototype.toString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Int8x16(";
m+=%Int8x16ExtractLane(l,0);
for(var n=1;n<16;n++){
m+=", "+%Int8x16ExtractLane(l,n);
}
return m+")";
}
function Int8x16ToLocaleString(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw MakeTypeError(36,
"Int8x16.prototype.toLocaleString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Int8x16(";
m+=%Int8x16ExtractLane(l,0).toLocaleString();
for(var n=1;n<16;n++){
m+=", "+%Int8x16ExtractLane(l,n).toLocaleString();
}
return m+")";
}
function Int8x16ValueOf(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw MakeTypeError(36,
"Int8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int8x16ExtractLaneJS(o,p){
return %Int8x16ExtractLane(o,p);
}
function Int8x16EqualJS(k,q){
return %Int8x16Equal(k,q);
}
function Int8x16NotEqualJS(k,q){
return %Int8x16NotEqual(k,q);
}


function Bool32x4CheckJS(k){
return %Bool32x4Check(k);
}
function Bool32x4ToString(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw MakeTypeError(36,
"Bool32x4.prototype.toString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Bool32x4(";
m+=%Bool32x4ExtractLane(l,0);
for(var n=1;n<4;n++){
m+=", "+%Bool32x4ExtractLane(l,n);
}
return m+")";
}
function Bool32x4ToLocaleString(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw MakeTypeError(36,
"Bool32x4.prototype.toLocaleString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Bool32x4(";
m+=%Bool32x4ExtractLane(l,0).toLocaleString();
for(var n=1;n<4;n++){
m+=", "+%Bool32x4ExtractLane(l,n).toLocaleString();
}
return m+")";
}
function Bool32x4ValueOf(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw MakeTypeError(36,
"Bool32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool32x4ExtractLaneJS(o,p){
return %Bool32x4ExtractLane(o,p);
}
function Bool32x4EqualJS(k,q){
return %Bool32x4Equal(k,q);
}
function Bool32x4NotEqualJS(k,q){
return %Bool32x4NotEqual(k,q);
}

function Bool16x8CheckJS(k){
return %Bool16x8Check(k);
}
function Bool16x8ToString(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw MakeTypeError(36,
"Bool16x8.prototype.toString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Bool16x8(";
m+=%Bool16x8ExtractLane(l,0);
for(var n=1;n<8;n++){
m+=", "+%Bool16x8ExtractLane(l,n);
}
return m+")";
}
function Bool16x8ToLocaleString(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw MakeTypeError(36,
"Bool16x8.prototype.toLocaleString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Bool16x8(";
m+=%Bool16x8ExtractLane(l,0).toLocaleString();
for(var n=1;n<8;n++){
m+=", "+%Bool16x8ExtractLane(l,n).toLocaleString();
}
return m+")";
}
function Bool16x8ValueOf(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw MakeTypeError(36,
"Bool16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool16x8ExtractLaneJS(o,p){
return %Bool16x8ExtractLane(o,p);
}
function Bool16x8EqualJS(k,q){
return %Bool16x8Equal(k,q);
}
function Bool16x8NotEqualJS(k,q){
return %Bool16x8NotEqual(k,q);
}

function Bool8x16CheckJS(k){
return %Bool8x16Check(k);
}
function Bool8x16ToString(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw MakeTypeError(36,
"Bool8x16.prototype.toString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Bool8x16(";
m+=%Bool8x16ExtractLane(l,0);
for(var n=1;n<16;n++){
m+=", "+%Bool8x16ExtractLane(l,n);
}
return m+")";
}
function Bool8x16ToLocaleString(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw MakeTypeError(36,
"Bool8x16.prototype.toLocaleString",this);
}
var l=%_ValueOf(this);
var m="SIMD.Bool8x16(";
m+=%Bool8x16ExtractLane(l,0).toLocaleString();
for(var n=1;n<16;n++){
m+=", "+%Bool8x16ExtractLane(l,n).toLocaleString();
}
return m+")";
}
function Bool8x16ValueOf(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw MakeTypeError(36,
"Bool8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool8x16ExtractLaneJS(o,p){
return %Bool8x16ExtractLane(o,p);
}
function Bool8x16EqualJS(k,q){
return %Bool8x16Equal(k,q);
}
function Bool8x16NotEqualJS(k,q){
return %Bool8x16NotEqual(k,q);
}



function Int32x4ShiftLeftByScalarJS(o,r){
return %Int32x4ShiftLeftByScalar(o,r);
}
function Int32x4ShiftRightLogicalByScalarJS(o,r){
return %Int32x4ShiftRightLogicalByScalar(o,r);
}
function Int32x4ShiftRightArithmeticByScalarJS(o,r){
return %Int32x4ShiftRightArithmeticByScalar(o,r);
}

function Int16x8ShiftLeftByScalarJS(o,r){
return %Int16x8ShiftLeftByScalar(o,r);
}
function Int16x8ShiftRightLogicalByScalarJS(o,r){
return %Int16x8ShiftRightLogicalByScalar(o,r);
}
function Int16x8ShiftRightArithmeticByScalarJS(o,r){
return %Int16x8ShiftRightArithmeticByScalar(o,r);
}

function Int8x16ShiftLeftByScalarJS(o,r){
return %Int8x16ShiftLeftByScalar(o,r);
}
function Int8x16ShiftRightLogicalByScalarJS(o,r){
return %Int8x16ShiftRightLogicalByScalar(o,r);
}
function Int8x16ShiftRightArithmeticByScalarJS(o,r){
return %Int8x16ShiftRightArithmeticByScalar(o,r);
}


function Bool32x4ReplaceLaneJS(o,p,l){
return %Bool32x4ReplaceLane(o,p,l);
}
function Bool32x4AnyTrueJS(s){
return %Bool32x4AnyTrue(s);
}
function Bool32x4AllTrueJS(s){
return %Bool32x4AllTrue(s);
}

function Bool16x8ReplaceLaneJS(o,p,l){
return %Bool16x8ReplaceLane(o,p,l);
}
function Bool16x8AnyTrueJS(s){
return %Bool16x8AnyTrue(s);
}
function Bool16x8AllTrueJS(s){
return %Bool16x8AllTrue(s);
}

function Bool8x16ReplaceLaneJS(o,p,l){
return %Bool8x16ReplaceLane(o,p,l);
}
function Bool8x16AnyTrueJS(s){
return %Bool8x16AnyTrue(s);
}
function Bool8x16AllTrueJS(s){
return %Bool8x16AllTrue(s);
}


function Int16x8UnsignedExtractLaneJS(o,p){
return %Int16x8UnsignedExtractLane(o,p);
}

function Int8x16UnsignedExtractLaneJS(o,p){
return %Int8x16UnsignedExtractLane(o,p);
}


function Float32x4ReplaceLaneJS(o,p,l){
return %Float32x4ReplaceLane(o,p,((typeof(%IS_VAR(l))==='number')?l:$nonNumberToNumber(l)));
}
function Float32x4SelectJS(t,k,q){
return %Float32x4Select(t,k,q);
}
function Float32x4NegJS(k){
return %Float32x4Neg(k);
}
function Float32x4AddJS(k,q){
return %Float32x4Add(k,q);
}
function Float32x4SubJS(k,q){
return %Float32x4Sub(k,q);
}
function Float32x4MulJS(k,q){
return %Float32x4Mul(k,q);
}
function Float32x4MinJS(k,q){
return %Float32x4Min(k,q);
}
function Float32x4MaxJS(k,q){
return %Float32x4Max(k,q);
}
function Float32x4LessThanJS(k,q){
return %Float32x4LessThan(k,q);
}
function Float32x4LessThanOrEqualJS(k,q){
return %Float32x4LessThanOrEqual(k,q);
}
function Float32x4GreaterThanJS(k,q){
return %Float32x4GreaterThan(k,q);
}
function Float32x4GreaterThanOrEqualJS(k,q){
return %Float32x4GreaterThanOrEqual(k,q);
}


function Int32x4ReplaceLaneJS(o,p,l){
return %Int32x4ReplaceLane(o,p,((typeof(%IS_VAR(l))==='number')?l:$nonNumberToNumber(l)));
}
function Int32x4SelectJS(t,k,q){
return %Int32x4Select(t,k,q);
}
function Int32x4NegJS(k){
return %Int32x4Neg(k);
}
function Int32x4AddJS(k,q){
return %Int32x4Add(k,q);
}
function Int32x4SubJS(k,q){
return %Int32x4Sub(k,q);
}
function Int32x4MulJS(k,q){
return %Int32x4Mul(k,q);
}
function Int32x4MinJS(k,q){
return %Int32x4Min(k,q);
}
function Int32x4MaxJS(k,q){
return %Int32x4Max(k,q);
}
function Int32x4LessThanJS(k,q){
return %Int32x4LessThan(k,q);
}
function Int32x4LessThanOrEqualJS(k,q){
return %Int32x4LessThanOrEqual(k,q);
}
function Int32x4GreaterThanJS(k,q){
return %Int32x4GreaterThan(k,q);
}
function Int32x4GreaterThanOrEqualJS(k,q){
return %Int32x4GreaterThanOrEqual(k,q);
}

function Int16x8ReplaceLaneJS(o,p,l){
return %Int16x8ReplaceLane(o,p,((typeof(%IS_VAR(l))==='number')?l:$nonNumberToNumber(l)));
}
function Int16x8SelectJS(t,k,q){
return %Int16x8Select(t,k,q);
}
function Int16x8NegJS(k){
return %Int16x8Neg(k);
}
function Int16x8AddJS(k,q){
return %Int16x8Add(k,q);
}
function Int16x8SubJS(k,q){
return %Int16x8Sub(k,q);
}
function Int16x8MulJS(k,q){
return %Int16x8Mul(k,q);
}
function Int16x8MinJS(k,q){
return %Int16x8Min(k,q);
}
function Int16x8MaxJS(k,q){
return %Int16x8Max(k,q);
}
function Int16x8LessThanJS(k,q){
return %Int16x8LessThan(k,q);
}
function Int16x8LessThanOrEqualJS(k,q){
return %Int16x8LessThanOrEqual(k,q);
}
function Int16x8GreaterThanJS(k,q){
return %Int16x8GreaterThan(k,q);
}
function Int16x8GreaterThanOrEqualJS(k,q){
return %Int16x8GreaterThanOrEqual(k,q);
}

function Int8x16ReplaceLaneJS(o,p,l){
return %Int8x16ReplaceLane(o,p,((typeof(%IS_VAR(l))==='number')?l:$nonNumberToNumber(l)));
}
function Int8x16SelectJS(t,k,q){
return %Int8x16Select(t,k,q);
}
function Int8x16NegJS(k){
return %Int8x16Neg(k);
}
function Int8x16AddJS(k,q){
return %Int8x16Add(k,q);
}
function Int8x16SubJS(k,q){
return %Int8x16Sub(k,q);
}
function Int8x16MulJS(k,q){
return %Int8x16Mul(k,q);
}
function Int8x16MinJS(k,q){
return %Int8x16Min(k,q);
}
function Int8x16MaxJS(k,q){
return %Int8x16Max(k,q);
}
function Int8x16LessThanJS(k,q){
return %Int8x16LessThan(k,q);
}
function Int8x16LessThanOrEqualJS(k,q){
return %Int8x16LessThanOrEqual(k,q);
}
function Int8x16GreaterThanJS(k,q){
return %Int8x16GreaterThan(k,q);
}
function Int8x16GreaterThanOrEqualJS(k,q){
return %Int8x16GreaterThanOrEqual(k,q);
}



function Int32x4AndJS(k,q){
return %Int32x4And(k,q);
}
function Int32x4OrJS(k,q){
return %Int32x4Or(k,q);
}
function Int32x4XorJS(k,q){
return %Int32x4Xor(k,q);
}
function Int32x4NotJS(k){
return %Int32x4Not(k);
}

function Int16x8AndJS(k,q){
return %Int16x8And(k,q);
}
function Int16x8OrJS(k,q){
return %Int16x8Or(k,q);
}
function Int16x8XorJS(k,q){
return %Int16x8Xor(k,q);
}
function Int16x8NotJS(k){
return %Int16x8Not(k);
}

function Int8x16AndJS(k,q){
return %Int8x16And(k,q);
}
function Int8x16OrJS(k,q){
return %Int8x16Or(k,q);
}
function Int8x16XorJS(k,q){
return %Int8x16Xor(k,q);
}
function Int8x16NotJS(k){
return %Int8x16Not(k);
}


function Bool32x4AndJS(k,q){
return %Bool32x4And(k,q);
}
function Bool32x4OrJS(k,q){
return %Bool32x4Or(k,q);
}
function Bool32x4XorJS(k,q){
return %Bool32x4Xor(k,q);
}
function Bool32x4NotJS(k){
return %Bool32x4Not(k);
}

function Bool16x8AndJS(k,q){
return %Bool16x8And(k,q);
}
function Bool16x8OrJS(k,q){
return %Bool16x8Or(k,q);
}
function Bool16x8XorJS(k,q){
return %Bool16x8Xor(k,q);
}
function Bool16x8NotJS(k){
return %Bool16x8Not(k);
}

function Bool8x16AndJS(k,q){
return %Bool8x16And(k,q);
}
function Bool8x16OrJS(k,q){
return %Bool8x16Or(k,q);
}
function Bool8x16XorJS(k,q){
return %Bool8x16Xor(k,q);
}
function Bool8x16NotJS(k){
return %Bool8x16Not(k);
}



function Float32x4FromInt32x4JS(k){
return %Float32x4FromInt32x4(k);
}

function Int32x4FromFloat32x4JS(k){
return %Int32x4FromFloat32x4(k);
}


function Float32x4FromInt32x4BitsJS(k){
return %Float32x4FromInt32x4Bits(k);
}

function Float32x4FromInt16x8BitsJS(k){
return %Float32x4FromInt16x8Bits(k);
}

function Float32x4FromInt8x16BitsJS(k){
return %Float32x4FromInt8x16Bits(k);
}

function Int32x4FromFloat32x4BitsJS(k){
return %Int32x4FromFloat32x4Bits(k);
}

function Int32x4FromInt16x8BitsJS(k){
return %Int32x4FromInt16x8Bits(k);
}

function Int32x4FromInt8x16BitsJS(k){
return %Int32x4FromInt8x16Bits(k);
}

function Int16x8FromFloat32x4BitsJS(k){
return %Int16x8FromFloat32x4Bits(k);
}

function Int16x8FromInt32x4BitsJS(k){
return %Int16x8FromInt32x4Bits(k);
}

function Int16x8FromInt8x16BitsJS(k){
return %Int16x8FromInt8x16Bits(k);
}

function Int8x16FromFloat32x4BitsJS(k){
return %Int8x16FromFloat32x4Bits(k);
}

function Int8x16FromInt32x4BitsJS(k){
return %Int8x16FromInt32x4Bits(k);
}

function Int8x16FromInt16x8BitsJS(k){
return %Int8x16FromInt16x8Bits(k);
}


function Float32x4Constructor(u,v,w,x){
if(%_IsConstructCall())throw MakeTypeError(55,"Float32x4");
return %CreateFloat32x4(((typeof(%IS_VAR(u))==='number')?u:$nonNumberToNumber(u)),((typeof(%IS_VAR(v))==='number')?v:$nonNumberToNumber(v)),
((typeof(%IS_VAR(w))==='number')?w:$nonNumberToNumber(w)),((typeof(%IS_VAR(x))==='number')?x:$nonNumberToNumber(x)));
}
function Float32x4Splat(s){
return %CreateFloat32x4(s,s,s,s);
}
function Float32x4AbsJS(k){
return %Float32x4Abs(k);
}
function Float32x4SqrtJS(k){
return %Float32x4Sqrt(k);
}
function Float32x4RecipApproxJS(k){
return %Float32x4RecipApprox(k);
}
function Float32x4RecipSqrtApproxJS(k){
return %Float32x4RecipSqrtApprox(k);
}
function Float32x4DivJS(k,q){
return %Float32x4Div(k,q);
}
function Float32x4MinNumJS(k,q){
return %Float32x4MinNum(k,q);
}
function Float32x4MaxNumJS(k,q){
return %Float32x4MaxNum(k,q);
}
function Float32x4SwizzleJS(k,u,v,w,x){
return %Float32x4Swizzle(k,u,v,w,x);
}
function Float32x4ShuffleJS(k,q,u,v,w,x){
return %Float32x4Shuffle(k,q,u,v,w,x);
}
function Int32x4Constructor(u,v,w,x){
if(%_IsConstructCall())throw MakeTypeError(55,"Int32x4");
return %CreateInt32x4(((typeof(%IS_VAR(u))==='number')?u:$nonNumberToNumber(u)),((typeof(%IS_VAR(v))==='number')?v:$nonNumberToNumber(v)),
((typeof(%IS_VAR(w))==='number')?w:$nonNumberToNumber(w)),((typeof(%IS_VAR(x))==='number')?x:$nonNumberToNumber(x)));
}
function Int32x4Splat(s){
return %CreateInt32x4(s,s,s,s);
}
function Int32x4SwizzleJS(k,u,v,w,x){
return %Int32x4Swizzle(k,u,v,w,x);
}
function Int32x4ShuffleJS(k,q,u,v,w,x){
return %Int32x4Shuffle(k,q,u,v,w,x);
}
function Bool32x4Constructor(u,v,w,x){
if(%_IsConstructCall())throw MakeTypeError(55,"Bool32x4");
return %CreateBool32x4(u,v,w,x);
}
function Bool32x4Splat(s){
return %CreateBool32x4(s,s,s,s);
}
function Bool32x4SwizzleJS(k,u,v,w,x){
return %Bool32x4Swizzle(k,u,v,w,x);
}
function Bool32x4ShuffleJS(k,q,u,v,w,x){
return %Bool32x4Shuffle(k,q,u,v,w,x);
}
function Int16x8Constructor(u,v,w,x,y,z,A,B){
if(%_IsConstructCall())throw MakeTypeError(55,"Int16x8");
return %CreateInt16x8(((typeof(%IS_VAR(u))==='number')?u:$nonNumberToNumber(u)),((typeof(%IS_VAR(v))==='number')?v:$nonNumberToNumber(v)),
((typeof(%IS_VAR(w))==='number')?w:$nonNumberToNumber(w)),((typeof(%IS_VAR(x))==='number')?x:$nonNumberToNumber(x)),
((typeof(%IS_VAR(y))==='number')?y:$nonNumberToNumber(y)),((typeof(%IS_VAR(z))==='number')?z:$nonNumberToNumber(z)),
((typeof(%IS_VAR(A))==='number')?A:$nonNumberToNumber(A)),((typeof(%IS_VAR(B))==='number')?B:$nonNumberToNumber(B)));
}
function Int16x8Splat(s){
return %CreateInt16x8(s,s,s,s,s,s,s,s);
}
function Int16x8SwizzleJS(k,u,v,w,x,y,z,A,B){
return %Int16x8Swizzle(k,u,v,w,x,y,z,A,B);
}
function Int16x8ShuffleJS(k,q,u,v,w,x,y,z,A,B){
return %Int16x8Shuffle(k,q,u,v,w,x,y,z,A,B);
}
function Bool16x8Constructor(u,v,w,x,y,z,A,B){
if(%_IsConstructCall())throw MakeTypeError(55,"Bool16x8");
return %CreateBool16x8(u,v,w,x,y,z,A,B);
}
function Bool16x8Splat(s){
return %CreateBool16x8(s,s,s,s,s,s,s,s);
}
function Bool16x8SwizzleJS(k,u,v,w,x,y,z,A,B){
return %Bool16x8Swizzle(k,u,v,w,x,y,z,A,B);
}
function Bool16x8ShuffleJS(k,q,u,v,w,x,y,z,A,B){
return %Bool16x8Shuffle(k,q,u,v,w,x,y,z,A,B);
}
function Int8x16Constructor(u,v,w,x,y,z,A,B,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw MakeTypeError(55,"Int8x16");
return %CreateInt8x16(((typeof(%IS_VAR(u))==='number')?u:$nonNumberToNumber(u)),((typeof(%IS_VAR(v))==='number')?v:$nonNumberToNumber(v)),
((typeof(%IS_VAR(w))==='number')?w:$nonNumberToNumber(w)),((typeof(%IS_VAR(x))==='number')?x:$nonNumberToNumber(x)),
((typeof(%IS_VAR(y))==='number')?y:$nonNumberToNumber(y)),((typeof(%IS_VAR(z))==='number')?z:$nonNumberToNumber(z)),
((typeof(%IS_VAR(A))==='number')?A:$nonNumberToNumber(A)),((typeof(%IS_VAR(B))==='number')?B:$nonNumberToNumber(B)),
((typeof(%IS_VAR(c8))==='number')?c8:$nonNumberToNumber(c8)),((typeof(%IS_VAR(c9))==='number')?c9:$nonNumberToNumber(c9)),
((typeof(%IS_VAR(c10))==='number')?c10:$nonNumberToNumber(c10)),((typeof(%IS_VAR(c11))==='number')?c11:$nonNumberToNumber(c11)),
((typeof(%IS_VAR(c12))==='number')?c12:$nonNumberToNumber(c12)),((typeof(%IS_VAR(c13))==='number')?c13:$nonNumberToNumber(c13)),
((typeof(%IS_VAR(c14))==='number')?c14:$nonNumberToNumber(c14)),((typeof(%IS_VAR(c15))==='number')?c15:$nonNumberToNumber(c15)));
}
function Int8x16Splat(s){
return %CreateInt8x16(s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s);
}
function Int8x16SwizzleJS(k,u,v,w,x,y,z,A,B,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Int8x16Swizzle(k,u,v,w,x,y,z,A,B,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Int8x16ShuffleJS(k,q,u,v,w,x,y,z,A,B,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Int8x16Shuffle(k,q,u,v,w,x,y,z,A,B,c8,c9,c10,
c11,c12,c13,c14,c15);
}
function Bool8x16Constructor(u,v,w,x,y,z,A,B,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw MakeTypeError(55,"Bool8x16");
return %CreateBool8x16(u,v,w,x,y,z,A,B,c8,c9,c10,c11,c12,
c13,c14,c15);
}
function Bool8x16Splat(s){
return %CreateBool8x16(s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s);
}
function Bool8x16SwizzleJS(k,u,v,w,x,y,z,A,B,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Bool8x16Swizzle(k,u,v,w,x,y,z,A,B,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Bool8x16ShuffleJS(k,q,u,v,w,x,y,z,A,B,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Bool8x16Shuffle(k,q,u,v,w,x,y,z,A,B,c8,c9,c10,
c11,c12,c13,c14,c15);
}
%AddNamedProperty(c,symbolToStringTag,'SIMD',1|2);
%SetCode(d,Float32x4Constructor);
%FunctionSetPrototype(d,{});
%AddNamedProperty(d.prototype,'constructor',d,
2);
%AddNamedProperty(d.prototype,symbolToStringTag,'Float32x4',
2|1);
b.InstallFunctions(d.prototype,2,[
'toLocaleString',Float32x4ToLocaleString,
'toString',Float32x4ToString,
'valueOf',Float32x4ValueOf,
]);


%SetCode(e,Int32x4Constructor);
%FunctionSetPrototype(e,{});
%AddNamedProperty(e.prototype,'constructor',e,
2);
%AddNamedProperty(e.prototype,symbolToStringTag,'Int32x4',
2|1);
b.InstallFunctions(e.prototype,2,[
'toLocaleString',Int32x4ToLocaleString,
'toString',Int32x4ToString,
'valueOf',Int32x4ValueOf,
]);

%SetCode(f,Int16x8Constructor);
%FunctionSetPrototype(f,{});
%AddNamedProperty(f.prototype,'constructor',f,
2);
%AddNamedProperty(f.prototype,symbolToStringTag,'Int16x8',
2|1);
b.InstallFunctions(f.prototype,2,[
'toLocaleString',Int16x8ToLocaleString,
'toString',Int16x8ToString,
'valueOf',Int16x8ValueOf,
]);

%SetCode(g,Int8x16Constructor);
%FunctionSetPrototype(g,{});
%AddNamedProperty(g.prototype,'constructor',g,
2);
%AddNamedProperty(g.prototype,symbolToStringTag,'Int8x16',
2|1);
b.InstallFunctions(g.prototype,2,[
'toLocaleString',Int8x16ToLocaleString,
'toString',Int8x16ToString,
'valueOf',Int8x16ValueOf,
]);


%SetCode(h,Bool32x4Constructor);
%FunctionSetPrototype(h,{});
%AddNamedProperty(h.prototype,'constructor',h,
2);
%AddNamedProperty(h.prototype,symbolToStringTag,'Bool32x4',
2|1);
b.InstallFunctions(h.prototype,2,[
'toLocaleString',Bool32x4ToLocaleString,
'toString',Bool32x4ToString,
'valueOf',Bool32x4ValueOf,
]);

%SetCode(i,Bool16x8Constructor);
%FunctionSetPrototype(i,{});
%AddNamedProperty(i.prototype,'constructor',i,
2);
%AddNamedProperty(i.prototype,symbolToStringTag,'Bool16x8',
2|1);
b.InstallFunctions(i.prototype,2,[
'toLocaleString',Bool16x8ToLocaleString,
'toString',Bool16x8ToString,
'valueOf',Bool16x8ValueOf,
]);

%SetCode(j,Bool8x16Constructor);
%FunctionSetPrototype(j,{});
%AddNamedProperty(j.prototype,'constructor',j,
2);
%AddNamedProperty(j.prototype,symbolToStringTag,'Bool8x16',
2|1);
b.InstallFunctions(j.prototype,2,[
'toLocaleString',Bool8x16ToLocaleString,
'toString',Bool8x16ToString,
'valueOf',Bool8x16ValueOf,
]);



b.InstallFunctions(d,2,[
'splat',Float32x4Splat,
'check',Float32x4CheckJS,
'extractLane',Float32x4ExtractLaneJS,
'replaceLane',Float32x4ReplaceLaneJS,
'neg',Float32x4NegJS,
'abs',Float32x4AbsJS,
'sqrt',Float32x4SqrtJS,
'reciprocalApproximation',Float32x4RecipApproxJS,
'reciprocalSqrtApproximation',Float32x4RecipSqrtApproxJS,
'add',Float32x4AddJS,
'sub',Float32x4SubJS,
'mul',Float32x4MulJS,
'div',Float32x4DivJS,
'min',Float32x4MinJS,
'max',Float32x4MaxJS,
'minNum',Float32x4MinNumJS,
'maxNum',Float32x4MaxNumJS,
'lessThan',Float32x4LessThanJS,
'lessThanOrEqual',Float32x4LessThanOrEqualJS,
'greaterThan',Float32x4GreaterThanJS,
'greaterThanOrEqual',Float32x4GreaterThanOrEqualJS,
'equal',Float32x4EqualJS,
'notEqual',Float32x4NotEqualJS,
'select',Float32x4SelectJS,
'swizzle',Float32x4SwizzleJS,
'shuffle',Float32x4ShuffleJS,
'fromInt32x4',Float32x4FromInt32x4JS,
'fromInt32x4Bits',Float32x4FromInt32x4BitsJS,
'fromInt16x8Bits',Float32x4FromInt16x8BitsJS,
'fromInt8x16Bits',Float32x4FromInt8x16BitsJS,
]);
b.InstallFunctions(e,2,[
'splat',Int32x4Splat,
'check',Int32x4CheckJS,
'extractLane',Int32x4ExtractLaneJS,
'replaceLane',Int32x4ReplaceLaneJS,
'neg',Int32x4NegJS,
'add',Int32x4AddJS,
'sub',Int32x4SubJS,
'mul',Int32x4MulJS,
'min',Int32x4MinJS,
'max',Int32x4MaxJS,
'and',Int32x4AndJS,
'or',Int32x4OrJS,
'xor',Int32x4XorJS,
'not',Int32x4NotJS,
'shiftLeftByScalar',Int32x4ShiftLeftByScalarJS,
'shiftRightLogicalByScalar',Int32x4ShiftRightLogicalByScalarJS,
'shiftRightArithmeticByScalar',Int32x4ShiftRightArithmeticByScalarJS,
'lessThan',Int32x4LessThanJS,
'lessThanOrEqual',Int32x4LessThanOrEqualJS,
'greaterThan',Int32x4GreaterThanJS,
'greaterThanOrEqual',Int32x4GreaterThanOrEqualJS,
'equal',Int32x4EqualJS,
'notEqual',Int32x4NotEqualJS,
'select',Int32x4SelectJS,
'swizzle',Int32x4SwizzleJS,
'shuffle',Int32x4ShuffleJS,
'fromFloat32x4',Int32x4FromFloat32x4JS,
'fromFloat32x4Bits',Int32x4FromFloat32x4BitsJS,
'fromInt16x8Bits',Int32x4FromInt16x8BitsJS,
'fromInt8x16Bits',Int32x4FromInt8x16BitsJS,
]);
b.InstallFunctions(h,2,[
'splat',Bool32x4Splat,
'check',Bool32x4CheckJS,
'extractLane',Bool32x4ExtractLaneJS,
'replaceLane',Bool32x4ReplaceLaneJS,
'and',Bool32x4AndJS,
'or',Bool32x4OrJS,
'xor',Bool32x4XorJS,
'not',Bool32x4NotJS,
'anyTrue',Bool32x4AnyTrueJS,
'allTrue',Bool32x4AllTrueJS,
'equal',Bool32x4EqualJS,
'notEqual',Bool32x4NotEqualJS,
'swizzle',Bool32x4SwizzleJS,
'shuffle',Bool32x4ShuffleJS,
]);
b.InstallFunctions(f,2,[
'splat',Int16x8Splat,
'check',Int16x8CheckJS,
'extractLane',Int16x8ExtractLaneJS,
'unsignedExtractLane',Int16x8UnsignedExtractLaneJS,
'replaceLane',Int16x8ReplaceLaneJS,
'neg',Int16x8NegJS,
'add',Int16x8AddJS,
'sub',Int16x8SubJS,
'mul',Int16x8MulJS,
'min',Int16x8MinJS,
'max',Int16x8MaxJS,
'and',Int16x8AndJS,
'or',Int16x8OrJS,
'xor',Int16x8XorJS,
'not',Int16x8NotJS,
'shiftLeftByScalar',Int16x8ShiftLeftByScalarJS,
'shiftRightLogicalByScalar',Int16x8ShiftRightLogicalByScalarJS,
'shiftRightArithmeticByScalar',Int16x8ShiftRightArithmeticByScalarJS,
'lessThan',Int16x8LessThanJS,
'lessThanOrEqual',Int16x8LessThanOrEqualJS,
'greaterThan',Int16x8GreaterThanJS,
'greaterThanOrEqual',Int16x8GreaterThanOrEqualJS,
'equal',Int16x8EqualJS,
'notEqual',Int16x8NotEqualJS,
'select',Int16x8SelectJS,
'swizzle',Int16x8SwizzleJS,
'shuffle',Int16x8ShuffleJS,
'fromFloat32x4Bits',Int16x8FromFloat32x4BitsJS,
'fromInt32x4Bits',Int16x8FromInt32x4BitsJS,
'fromInt8x16Bits',Int16x8FromInt8x16BitsJS,
]);
b.InstallFunctions(i,2,[
'splat',Bool16x8Splat,
'check',Bool16x8CheckJS,
'extractLane',Bool16x8ExtractLaneJS,
'replaceLane',Bool16x8ReplaceLaneJS,
'and',Bool16x8AndJS,
'or',Bool16x8OrJS,
'xor',Bool16x8XorJS,
'not',Bool16x8NotJS,
'anyTrue',Bool16x8AnyTrueJS,
'allTrue',Bool16x8AllTrueJS,
'equal',Bool16x8EqualJS,
'notEqual',Bool16x8NotEqualJS,
'swizzle',Bool16x8SwizzleJS,
'shuffle',Bool16x8ShuffleJS,
]);
b.InstallFunctions(g,2,[
'splat',Int8x16Splat,
'check',Int8x16CheckJS,
'extractLane',Int8x16ExtractLaneJS,
'unsignedExtractLane',Int8x16UnsignedExtractLaneJS,
'replaceLane',Int8x16ReplaceLaneJS,
'neg',Int8x16NegJS,
'add',Int8x16AddJS,
'sub',Int8x16SubJS,
'mul',Int8x16MulJS,
'min',Int8x16MinJS,
'max',Int8x16MaxJS,
'and',Int8x16AndJS,
'or',Int8x16OrJS,
'xor',Int8x16XorJS,
'not',Int8x16NotJS,
'shiftLeftByScalar',Int8x16ShiftLeftByScalarJS,
'shiftRightLogicalByScalar',Int8x16ShiftRightLogicalByScalarJS,
'shiftRightArithmeticByScalar',Int8x16ShiftRightArithmeticByScalarJS,
'lessThan',Int8x16LessThanJS,
'lessThanOrEqual',Int8x16LessThanOrEqualJS,
'greaterThan',Int8x16GreaterThanJS,
'greaterThanOrEqual',Int8x16GreaterThanOrEqualJS,
'equal',Int8x16EqualJS,
'notEqual',Int8x16NotEqualJS,
'select',Int8x16SelectJS,
'swizzle',Int8x16SwizzleJS,
'shuffle',Int8x16ShuffleJS,
'fromFloat32x4Bits',Int8x16FromFloat32x4BitsJS,
'fromInt32x4Bits',Int8x16FromInt32x4BitsJS,
'fromInt16x8Bits',Int8x16FromInt16x8BitsJS,
]);
b.InstallFunctions(j,2,[
'splat',Bool8x16Splat,
'check',Bool8x16CheckJS,
'extractLane',Bool8x16ExtractLaneJS,
'replaceLane',Bool8x16ReplaceLaneJS,
'and',Bool8x16AndJS,
'or',Bool8x16OrJS,
'xor',Bool8x16XorJS,
'not',Bool8x16NotJS,
'anyTrue',Bool8x16AnyTrueJS,
'allTrue',Bool8x16AllTrueJS,
'equal',Bool8x16EqualJS,
'notEqual',Bool8x16NotEqualJS,
'swizzle',Bool8x16SwizzleJS,
'shuffle',Bool8x16ShuffleJS,
]);
b.Export(function(C){
C.Float32x4ToString=Float32x4ToString;
C.Int32x4ToString=Int32x4ToString;
C.Bool32x4ToString=Bool32x4ToString;
C.Int16x8ToString=Int16x8ToString;
C.Bool16x8ToString=Bool16x8ToString;
C.Int8x16ToString=Int8x16ToString;
C.Bool8x16ToString=Bool8x16ToString;
});
})

 dummy<(function() {}) dummy<(function(){})
